Authentication
In ODK Central, the server thinks about identity and permissioning in terms of one core concept: the Actor. No matter how you authenticate with the API, you are doing so as an Actor of some kind or another, and when permissions are assigned and checked, they are done against the authenticated Actor.

In practice, there are two types of Actors available in the system today:

Users are accounts used by the staff members who manage the server and the data collection campaigns. They each have a set of rights assigned to them via Roles and Assignments. They are the only account types that have passwords associated with them. They also always have an email address. Users can authenticate using Session Bearer Tokens or using HTTPS Basic authentication.

App Users are only allowed to access the OpenRosa parts of the API: in essence, they are allowed to list forms, download form definitions, and create new submissions against those forms. They can only authenticate using App User URLs.

Next, you will find documentation on each of the three authentication methods described above. It is best not to present multiple credentials. If you do, the first presented scheme out of /key token, Bearer, Basic, then Cookie will be used for the request. If the multiple schemes are sent at once, and the first matching scheme fails, the request will be immediately rejected.

Note: If Single Sign-on with Open ID Connect is enabled on the ODK Central, you can neither use HTTP Basic Authentication nor login with POST /v1/session endpoint.

Authentication Errors
When authentication fails or access is denied, the API returns standard HTTP error codes:

401 Unauthorized: Authentication is required but missing or invalid. This occurs when:

No authentication credentials are provided
Invalid session tokens, passwords, or App User tokens are used
Expired session tokens are presented
403 Forbidden: Authentication succeeded but the authenticated Actor lacks sufficient permissions. This occurs when:

The Actor does not have the required role or permissions for the requested action
The Actor is trying to access resources outside their assigned scope (e.g., App Users accessing administrative endpoints)
Session Authentication
This is the authentication method used by the ODK Central Frontend packaged with Central Backend. Only Users can authenticate this way. It consists mostly of two steps:

Logging in: presenting an Email Address and a Password for verification, after which a new Session is created. Associated with the Session is an expiration and a bearer token. By default, sessions will expire 24 hours after they are created. This can be changed through the default.sessionLifetime configuration setting.
Using the session: each request to the API needs a header attached to it: Authorization: Bearer {token}. This authenticates that particular request as belonging to the Session we created by logging in.
You might notice that Step 2 greatly resembles how OAuth 2.0 works. This was an intentional first step towards OAuth support, and should make the forward migration of your code easier down the road.

Logging in
POST /v1/sessions

In order to log a User in to a new Session, you must provide their credentials, in JSON format.

For security reasons, the only possible results are success or failure. No detail is provided upon failure.

Successful responses will come with an HTTP-Only, Secure-Only cookie. This cookie is primarily meant for use by the Central frontend, and we do not recommend relying upon it. It will only work on GET requests, and it will only work over HTTPS.

Request body


Example
{
  "email": "my.email.address@getodk.org",
  "password": "my.super.secure.password"
}

Schema
HTTP Status: 200

Content Type: application/json


Example
{
  "createdAt": "2018-04-18T03:04:51.695Z",
  "expiresAt": "2018-04-19T03:04:51.695Z",
  "token": "lSpAIeksRu1CNZs7!qjAot2T17dPzkrw9B4iTtpj7OoIJBmXvnHM8z8Ka4QPEjR7"
}

Schema
Using the session
GET /v1/example1

Once you have logged in, to use your session token to authenticate with any action, supply it in a request header Authorization with a value of Bearer {token}, as seen here.

(There is not really anything at /v1/example1; this section only demonstrates how generally to use Session Bearer Token Authentication.)

Parameters

Authorization

(header)

string

Bearer encoding of the credentials

Example: Bearer lSpAIeksRu1CNZs7!qjAot2T17dPzkrw9B4iTtpj7OoIJBmXvnHM8z8Ka4QPEjR7

HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
Logging out / Revoking an App User
DELETE /v1/sessions/{token}

Logging out is not strictly necessary for Web Users; all sessions expire 24 hours after they are created. But it can be a good idea, in case someone else manages to steal your token. It is also the way Public Link and App User access are revoked. To do so, issue a DELETE request to that token resource.

Revoking an App User

The token associated with an App User is actually just its Session Token. As a result, although an App User Token can uniquely be used as a URL prefix as described here, the session associated with it can be revoked in exactly the same way a session is logged out, by issuing a DELETE request to its Session resource.

Note, however, that an App User cannot revoke itself; a User must perform this action.

Parameters

token

string

The session bearer token, obtained at login time.

Example: lSpAIeksRu1CNZs7!qjAot2T17dPzkrw9B4iTtpj7OoIJBmXvnHM8z8Ka4QPEjR7

HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
Logging out current session
DELETE /v1/sessions/current

This endpoint causes the current session to log itself out. Logging out is not strictly necessary for Web Users; all sessions expire 24 hours after they are created. But it can be a good idea, in case someone else manages to steal your token.

Only the session that was used to authenticate the request is logged out. If the Actor associated with the session has other sessions as well, those are not logged out.

This endpoint doesn't take any request parameter or data

HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
HTTPS Basic Authentication
Standard HTTP Basic Authentication is allowed, but strongly discouraged. This is because the server must verify your password with every single request, which is very slow to compute: typically, this will add hundreds of milliseconds to each request. For some one-off tasks and in cases where there is no other choice, it is reasonable to choose Basic authentication, but wherever possible we strongly encourage the use of any other authentication method.

In addition, because credentials are sent in plaintext as part of the request, the server will only accept Basic auth over HTTPS. If your ODK Central server is set up over plain HTTP, it will not accept Basic auth.

Furthermore, authenticating using accounts with email addresses with a colon (":") in them is not possible.

Using Basic Authentication
GET /v1/example2

To use HTTPS Basic Authentication, attach an Authorization header formatted so:

Authorization: Basic bXkuZW1haWwuYWRkcmVzc0BvcGVuZGF0YWtpdC5vcmc6bXkucGFzc3dvcmQ=

As given by the standard, the text following the Basic marker here is a base64 encoding of the credentials, provided in the form email:password (in this example my.email.address@getodk.org:my.password).

Because the colon symbol (":") is used as a separator, authenticating using an email address containing a colon is not possible. This is a general limitation of this authentication method; it is not specific to ODK Central.

Unlike the standard, we do not require the client to first send an unauthenticated request and retry the request only after receiving a WWW-Authenticate response, and in fact we will never send the WWW-Authenticate header. This is mostly because, as noted above, we generally discourage the use of this authentication method, and would rather not advertise its use openly. As a result, if you wish to use Basic Authentication, directly supply the header on any request that needs it.

(There is not really anything at /v1/example2; this section only demonstrates how generally to use Basic Authentication.)

Parameters

Authorization

(header)

string

Base64 encoding of the credentials

Example: Basic bXkuZW1haWwuYWRkcmVzc0BvcGVuZGF0YWtpdC5vcmc6bXkucGFzc3dvcmQ=

HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
App User Authentication
App Users are only allowed to list and download forms, and upload new submissions to those forms. Primarily, this is to allow clients like ODK Collect to use the OpenRosa API (/formList and /submission), but any action in this API reference falling into those categories will be allowed.

Revoking an App User is same as deleting session token. You can do this by calling DELETE /sessions/{appUser}.

Using App User Authentication
GET /v1/key/{appUser}/example3

To use App User Authentication, first obtain an App User, typically by using the configuration panel in the user interface, or else by using the App User API Resource. Once you have the token, you can apply it to any eligible action by prefixing the URL with /key/{appUser} as follows:

/v1/key/!Ms7V3$Zdnd63j5HFacIPFEvFAuwNqTUZW$AsVOmaQFf$vIC!F8dJjdgiDnJXXOt/example/request/path

(There is not really anything at /v1/example3; this section only demonstrates how generally to use App User Authentication.)

Parameters

appUser

string

The App User token. As with Session Bearer tokens, these tokens only contain URL-safe characters, so no escaping is required.

Example: !Ms7V3$Zdnd63j5HFacIPFEvFAuwNqTUZW$AsVOmaQFf$vIC!F8dJjdgiDnJXXOt

HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Accounts and Users
Today, there are two types of accounts: Users, which are the administrative accounts held by staff members managing the data collection process, and App Users, which are restricted access keys granted per Form within a Project to data collection clients in the field. Although both of these entities are backed by Actors as we explain in the Authentication section above, there is not yet any way to directly create or manipulate an Actor. Today, you can only create, manage, and delete Users and App Users.

Actors (and thus Users) may be granted rights via Roles. The /roles Roles API is open for all to access, which describes all defined roles on the server. Getting information for an individual role from that same API will reveal which verbs are associated with each role: some role might allow only submission.create and submission.update, for example.

Right now, there are four predefined system roles: Administrator (admin), Project Manager (manager), Data Collector (formfill), and App User (app-user). Administrators are allowed to perform any action upon the server, while Project Managers are allowed to perform any action upon the projects they are assigned to manage.

Data Collectors can see all Forms in a Project and submit to them, but cannot see Submissions and cannot edit Form settings. Similarly, App Users are granted minimal rights: they can read Form data and create new Submissions on those Forms. While Data Collectors can perform these actions directly on the Central administration website by logging in, App Users can only do these things through Collect or a similar data collection client device.

The Roles API alone does not, however, tell you which Actors have been assigned with Roles upon which system objects. For that, you will need to consult the various Assignments resources. There are two, one under the API root (/v1/assignments), which manages assignments to the entire system, and another nested under each Project (/v1/projects/…/assignments) which manage assignments to that Project.

Users
Presently, it is possible to create and list Users in the system, as well as to perform password reset operations. In future versions of this API it will be possible to manage existing user information and delete accounts as well.

Listing all Users
GET /v1/users

Currently, there are no paging or filtering options, so listing Users will get you every User in the system, every time.

Optionally, a q querystring parameter may be provided to filter the returned users by any given string. The search is performed via a trigram similarity index over both the Email and Display Name fields, and results are ordered by match score, best matches first. Note that short search terms (less than 4 or 5 characters) may not return any results. Try a longer search if nothing is appearing.

If a q parameter is given, and it exactly matches an email address that exists in the system, that user's details will always be returned, even for actors who cannot user.list. The request must still authenticate as a valid Actor. This allows non-Administrators to choose a user for an action (eg grant rights) without allowing full search.

Actors who cannot user.list will always receive [] with a 200 OK response.

Parameters

q

(query)

string

An optional search parameter.

Example: alice

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "createdAt": "2018-04-18T23:19:14.802Z",
    "displayName": "My Display Name",
    "id": 115,
    "type": "user",
    "updatedAt": "2018-04-18T23:42:11.406Z",
    "deletedAt": "2018-04-18T23:42:11.406Z",
    "email": "my.email.address@getodk.org"
  }
]

Schema
Creating a new User
POST /v1/users

All that is required to create a new user is an email address. That email address will receive a message instructing the new user on how to claim their new account and set a password.

Optionally, a password may also be supplied as a part of this request. If it is, the account is immediately usable with the given credentials. However, an email will still be dispatched with claim instructions as above.

Users are not able to do anything upon creation besides log in and change their own profile information. To allow Users to perform useful actions, you will need to assign them one or more Roles.

Request body


Example
{
  "email": "my.email.address@getodk.org"
}

Schema
HTTP Status: 200

Content Type: application/json


Example
{
  "createdAt": "2018-04-18T23:19:14.802Z",
  "displayName": "My Display Name",
  "id": 115,
  "type": "user",
  "updatedAt": "2018-04-18T23:42:11.406Z",
  "deletedAt": "2018-04-18T23:42:11.406Z",
  "email": "my.email.address@getodk.org"
}

Schema
HTTP Status: 400

Content Type: application/json


Example
{
  "code": "400",
  "message": "Could not parse the given data (2 chars) as json."
}

Schema
Getting User details
GET /v1/users/{actorId}

Typically, you supply the integer ID to get information about the user associated with that id.

It is also possible to supply the text current instead of an integer ID; please see the following endpoint for documentation about this.

Parameters

actorId

string

Typically the integer ID of the User. For getting user details, you can also supply the text current, which will tell you about the currently authenticated user.

Example: 42

HTTP Status: 200

Content Type: application/json


Example
{
  "createdAt": "2018-04-18T23:19:14.802Z",
  "displayName": "My Display Name",
  "id": 115,
  "type": "user",
  "updatedAt": "2018-04-18T23:42:11.406Z",
  "deletedAt": "2018-04-18T23:42:11.406Z",
  "email": "my.email.address@getodk.org"
}

Schema
Deleting a User
DELETE /v1/users/{actorId}

Upon User deletion:

The account will be removed,

the user will be logged out of all existing sessions,

and should the user attempt to reset their password, they will receive an email informing them that their account has been removed.

The User record will remain on file within the database, so that when for example information about the creator of a Form or Submission is requested, basic details are still available on file. A new User account may be created with the same email address as any deleted accounts.

Parameters

actorId

string

Typically the integer ID of the User. For getting user details, you can also supply the text current, which will tell you about the currently authenticated user.

Example: 42

HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
Modifying a User
PATCH /v1/users/{actorId}

You can PATCH JSON data to update User details. Not all user information is modifiable; right now, the following fields may be updated:

displayName sets the friendly display name the web interface uses to refer to the user.

email sets the email address associated with the account.

When user details are updated, the updatedAt field will be automatically updated.

Parameters

actorId

string

The integer ID of the User.

Example: 42

Request body


Example
{
  "displayName": "New Name",
  "email": "new.email.address@getodk.org"
}

Schema
HTTP Status: 200

Content Type: application/json


Example
{
  "createdAt": "2018-04-18T23:19:14.802Z",
  "displayName": "My Display Name",
  "id": 115,
  "type": "user",
  "updatedAt": "2018-04-18T23:42:11.406Z",
  "deletedAt": "2018-04-18T23:42:11.406Z",
  "email": "my.email.address@getodk.org"
}

Schema
HTTP Status: 400

Content Type: application/json


Example
{
  "code": "400",
  "message": "Could not parse the given data (2 chars) as json."
}

Schema
Getting authenticated User details
GET /v1/users/current

Typically, you would get User details by the User's numeric Actor ID.

However, if you only have a Bearer token, for example, you don't have any information about the user attached to that session, including even the ID with which to get more information. So you can instead supply the text current to get the user information associated with the authenticated session.

If you do use current, you may request extended metadata. Supply an X-Extended-Metadata header value of true to additionally receive:

an array of strings of the verbs the authenticated User/Actor is allowed to perform server-wide
an object containing the preferences of the authenticated User/Actor
This endpoint doesn't take any request parameter or data

HTTP Status: 200

Content Type: application/json


Example
{
  "createdAt": "2018-04-18T23:19:14.802Z",
  "displayName": "My Display Name",
  "id": 115,
  "type": "user",
  "updatedAt": "2018-04-18T23:42:11.406Z",
  "deletedAt": "2018-04-18T23:42:11.406Z",
  "email": "my.email.address@getodk.org"
}

Schema
HTTP Status: 200

Content Type: application/json; extended


Example
{
  "createdAt": "2018-04-18T23:19:14.802Z",
  "displayName": "My Display Name",
  "id": 115,
  "type": "user",
  "updatedAt": "2018-04-18T23:42:11.406Z",
  "deletedAt": "2018-04-18T23:42:11.406Z",
  "email": "my.email.address@getodk.org",
  "verbs": [
    "project.create",
    "project.update"
  ],
  "preferences": {
    "site": {
      "projectSortMode": "latest"
    },
    "projects": {
      "1": {
        "formTrashCollapsed": false
      }
    }
  }
}

Schema
Directly updating a user password
PUT /v1/users/{actorId}/password

To directly update a user password, you will need to reprove the user's intention by supplying the old password alongside the new. If you simply want to initiate an email-based password reset process, see the following endpoint.

Parameters

actorId

string

The integer ID of the User.

Example: 42

Request body


Example
{
  "old": "old.password",
  "new": "new.password"
}

Schema
HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
Initating a password reset
POST /v1/users/reset/initiate

Anybody can initate a reset of any user's password. An email will be sent with instructions on how to complete the password reset; it contains a token that is required to complete the process.

The optional query parameter invalidate may be set to true to immediately invalidate the user's current password, regardless of whether they complete the reset process. This can be done if, for example, their password has been compromised. In order to do this, though, the request must be performed as an authenticated user with permission to do this. If invalidation is attempted without the proper permissions, the entire request will fail.

If the email address provided does not match any user in the system, that address will still be sent an email informing them of the attempt and that no account was found.

Parameters

invalidate

(query)

boolean

Specify true in order to immediately invalidate the user's present password.

Example: true

Request body


Example
{
  "email": "my.email.address@getodk.org"
}

Schema
HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
User Preferences
The Central frontend uses this API to save various user preferences, such as the sorting order of certain listings. When a user starts a new session, these preferences are loaded in as part of the User object.

Preferences can be set site-wide or per-project.

Setting a project preference
PUT /v1/user-preferences/project/{projectId}/{propertyName}

Parameters

projectId

integer

The integer ID of the Project.

Example: 42

propertyName

string

The name of the preference.

Example: frobwazzleEnabled

Request body


Example
{
  "propertyValue": true
}

Schema
HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
HTTP Status: 404

Content Type: application/json


Example
{
  "code": 404.1,
  "message": "Could not find the resource you were looking for."
}

Schema
Deleting a project preference
DELETE /v1/user-preferences/project/{projectId}/{propertyName}

Parameters

projectId

integer

The integer ID of the Project.

Example: 42

propertyName

string

The name of the preference.

Example: frobwazzleEnabled

HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
HTTP Status: 404

Content Type: application/json


Example
{
  "code": 404.1,
  "message": "Could not find the resource you were looking for."
}

Schema
Setting a sitewide preference
PUT /v1/user-preferences/site/{propertyName}

Parameters

propertyName

string

The name of the preference.

Example: frobwazzleEnabled

Request body


Example
{
  "propertyValue": true
}

Schema
HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
Deleting a sitewide preference
DELETE /v1/user-preferences/site/{propertyName}

Parameters

propertyName

string

The name of the preference.

Example: frobwazzleEnabled

HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
HTTP Status: 404

Content Type: application/json


Example
{
  "code": 404.1,
  "message": "Could not find the resource you were looking for."
}

Schema
App Users
App Users may only be created, fetched, and manipulated within the nested Projects subresource, as App Users themselves are limited to the Project in which they are created. Through the App Users API, you can create, list, and delete the App Users of any given Project. Because they have extremely limited permissions, App Users cannot manage themselves; only Users may access this API.

For more information about the /projects containing resource, please see the following section.

Listing all App Users
GET /v1/projects/{projectId}/app-users

Currently, there are no paging or filtering options, so listing App Users will get you every App User in the system, every time.

This endpoint supports retrieving extended metadata; provide a header X-Extended-Metadata: true to additionally retrieve the lastUsed timestamp of each App User, as well as to retrieve the details of the Actor the App User was createdBy.

Parameters

projectId

number

The numeric ID of the Project

Example: 7

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "createdAt": "2018-04-18T23:19:14.802Z",
    "displayName": "My Display Name",
    "id": 115,
    "type": "user",
    "updatedAt": "2018-04-18T23:42:11.406Z",
    "deletedAt": "2018-04-18T23:42:11.406Z",
    "token": "d1!E2GVHgpr4h9bpxxtqUJ7EVJ1Q$Dusm2RBXg8XyVJMCBCbvyE8cGacxUx3bcUT",
    "projectId": 1,
    "lastUsed": "2018-04-14T08:34:21.633Z"
  }
]

Schema
HTTP Status: 200

Content Type: application/json; extended


Example
[
  {
    "createdAt": "2018-04-18T23:19:14.802Z",
    "displayName": "My Display Name",
    "id": 115,
    "type": "user",
    "updatedAt": "2018-04-18T23:42:11.406Z",
    "deletedAt": "2018-04-18T23:42:11.406Z",
    "token": "d1!E2GVHgpr4h9bpxxtqUJ7EVJ1Q$Dusm2RBXg8XyVJMCBCbvyE8cGacxUx3bcUT",
    "projectId": 1,
    "createdBy": {
      "createdAt": "2018-04-18T23:19:14.802Z",
      "displayName": "My Display Name",
      "id": 115,
      "type": "user",
      "updatedAt": "2018-04-18T23:42:11.406Z",
      "deletedAt": "2018-04-18T23:42:11.406Z"
    },
    "lastUsed": "2018-04-14T08:34:21.633Z"
  }
]

Schema
Creating a new App User
POST /v1/projects/{projectId}/app-users

The only information required to create a new App User is its displayName (this is called "Nickname" in the administrative panel).

When an App User is created, they are assigned no rights. They will be able to authenticate and list forms on a mobile client, but the form list will be empty, as the list only includes Forms that the App User has read access to. Once an App User is created, you'll likely wish to use the Form Assignments resource to actually assign the app-user role to them for the Forms you wish.

Parameters

projectId

number

The numeric ID of the Project

Example: 7

Request body


Example
{
  "displayName": "My Display Name"
}

Schema
HTTP Status: 200

Content Type: application/json


Example
{
  "createdAt": "2018-04-18T23:19:14.802Z",
  "displayName": "My Display Name",
  "id": 115,
  "type": "user",
  "updatedAt": "2018-04-18T23:42:11.406Z",
  "deletedAt": "2018-04-18T23:42:11.406Z",
  "token": "d1!E2GVHgpr4h9bpxxtqUJ7EVJ1Q$Dusm2RBXg8XyVJMCBCbvyE8cGacxUx3bcUT",
  "projectId": 1
}

Schema
HTTP Status: 400

Content Type: application/json


Example
{
  "code": "400",
  "message": "Could not parse the given data (2 chars) as json."
}

Schema
Deleting an App User
DELETE /v1/projects/{projectId}/app-users/{id}

You don't have to delete a App User in order to cut off its access. Using a User's credentials you can simply log the App User's session out using its token. This will end its session without actually deleting the App User, which allows you to still see it in the configuration panel and inspect its history. This is what the administrative panel does when you choose to "Revoke" the App User.

That said, if you do wish to delete the App User altogether, you can do so by issuing a DELETE request to its resource path. App Users cannot delete themselves.

Parameters

id

number

The numeric ID of the App User

Example: 16

projectId

number

The numeric ID of the Project

Example: 7

HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
Roles
(introduced: version 0.5)

The Roles API lists and describes each known Role within the system. Right now, Roles may not be created or customized via the API, but this will likely change in the future.

Each Role contains information about the verbs it allows its assignees to perform. Some Roles have a system name associated with them; the Roles may always be referenced by this system name in request URLs, and system Roles are always read-only.

Listing all Roles
GET /v1/roles

Currently, there are no paging or filtering options, so listing Roles will get you every Role in the system, every time. There are no authorization restrictions upon this endpoint: anybody is allowed to list all Role information at any time.

This endpoint doesn't take any request parameter or data

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "id": 4,
    "name": "Project Manager",
    "system": "manager",
    "verbs": [
      "project.update",
      "project.delete"
    ],
    "createdAt": "2018-01-19T23:58:03.395Z",
    "updatedAt": "2018-03-21T12:45:02.312Z"
  }
]

Schema
Getting Role Details
GET /v1/roles/{id}

Getting an individual Role does not reveal any additional information over listing all Roles. It is, however, useful for direct lookup of a specific role:

The id parameter for Roles here and elsewhere will accept the numeric ID associated with that Role, or a system name if there is one associated with the Role. Thus, you may request /v1/roles/admin on any ODK Central server and receive information about the Administrator role.

As with Role listing, there are no authorization restrictions upon this endpoint: anybody is allowed to get information about any Role at any time.

Parameters

id

string

Typically the integer ID of the Role. You may also supply the Role system name if it has one.

Example: 1

HTTP Status: 200

Content Type: application/json


Example
{
  "id": 4,
  "name": "Project Manager",
  "system": "manager",
  "verbs": [
    "project.update",
    "project.delete"
  ],
  "createdAt": "2018-01-19T23:58:03.395Z",
  "updatedAt": "2018-03-21T12:45:02.312Z"
}

Schema
Assignments
(introduced: version 0.5)

There are multiple Assignments resources. This one, upon the API root (/v1/assignments), manages Role assignment to the entire system (e.g. if you are assigned a Role that gives you form.create, you may create a form anywhere on the entire server).

The Project Assignments resource, nested under Projects, manages Role assignment to that Project in particular, and all objects within it. And the Form Assignments resource allows even more granular assignments, to specific Forms within a Project. All of these resources have the same structure and take and return the same data types.

Assignments may be created (POST) and deleted (DELETE) like any other resource in the system. Here, creating an Assignment grants the referenced Actor the verbs associated with the referenced Role upon all system objects. The pathing for creation and deletion is not quite REST-standard: we represent the relationship between Role and Actor directly in the URL rather than as body data: assignments/{role}/{actor} represents the assignment of the given Role to the given Actor.

Listing all Assignments
GET /v1/assignments

This will list every server-wide assignment, in the form of actorId/roleId pairs. It will not list Project-specific Assignments. To find those, you will need the Assignments subresource within Projects.

This endpoint supports retrieving extended metadata; provide a header X-Extended-Metadata: true to expand the actorId into a full actor objects. The Role reference remains a numeric ID.

This endpoint doesn't take any request parameter or data

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "actorId": 115,
    "roleId": 4
  }
]

Schema
HTTP Status: 200

Content Type: application/json; extended


Example
[
  {
    "actor": {
      "createdAt": "2018-04-18T23:19:14.802Z",
      "displayName": "My Display Name",
      "id": 115,
      "type": "user",
      "updatedAt": "2018-04-18T23:42:11.406Z",
      "deletedAt": "2018-04-18T23:42:11.406Z"
    },
    "roleId": 4
  }
]

Schema
Listing all Actors assigned some Role
GET /v1/assignments/{roleId}

Given a roleId, which may be a numeric ID or a string role system name, this endpoint lists all Actors that have been assigned that Role on a server-wide basis.

Parameters

roleId

string

Typically the integer ID of the Role. You may also supply the Role system name if it has one.

Example: admin

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "createdAt": "2018-04-18T23:19:14.802Z",
    "displayName": "My Display Name",
    "id": 115,
    "type": "user",
    "updatedAt": "2018-04-18T23:42:11.406Z",
    "deletedAt": "2018-04-18T23:42:11.406Z"
  }
]

Schema
Assigning an Actor to a server-wide Role
POST /v1/assignments/{roleId}/{actorId}

Given a roleId, which may be a numeric ID or a string role system name, and a numeric actorId, assigns that Role to that Actor across the entire server.

No POST body data is required, and if provided it will be ignored.

Parameters

roleId

string

Typically the integer ID of the Role. You may also supply the Role system name if it has one.

Example: admin

actorId

number

The integer ID of the Actor.

Example: 14

HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
Stripping an Role Assignment from an Actor
DELETE /v1/assignments/{roleId}/{actorId}

Given a roleId, which may be a numeric ID or a string role system name, and a numeric actorId, unassigns that Role from that Actor across the entire server.

Parameters

roleId

string

Typically the integer ID of the Role. You may also supply the Role system name if it has one.

Example: admin

actorId

number

The integer ID of the Actor.

Example: 14

HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Project Management
Apart from staff users ("Web Users" in the Central management interface) and some site-wide configuration details like Usage Reporting, all of ODK Central's objects (Forms, Submissions, App Users) are partitioned by Project, and available only as subresources below the main Projects resource.

Projects
(introduced: version 0.4)

You must create a containing Project before you can create any of its subobjects.

Listing Projects
GET /v1/projects

The Projects listing endpoint is somewhat unique in that it is freely accessible to anybody, even unauthenticated clients. Rather than reject the user with a 403 or similar error, the Projects listing will only return Projects that the authenticated Actor is allowed to see. In most cases, this means that unauthenticated requests will receive [] in reply.

Currently, there are no paging or filtering options, so listing Projects will get you every Project you have access to.

This endpoint supports retrieving extended metadata; provide a header X-Extended-Metadata: true to additionally retrieve the appUsers count of App Users and forms count of Forms within the Project, as well as the lastSubmission timestamp of the latest submission to any for in the project, if any.

Parameters

forms

(query)

boolean

(introduced: Version 1.5)

If set to true then endpoint also returns the Forms that the authenticated Actor is allowed to see, with those Forms nested within their corresponding Project under a new parameter formList. The returned Forms will match structure of Forms requested with extended metadata (including additional lastSubmission timestamp and submissions and reviewStates counts)

Example: true

datasets

(query)

boolean

(introduced: Version 2023.4)

If set to true then endpoint also returns the Datasets that the authenticated Actor is allowed to see, with those Datasets nested within their corresponding Project under a new parameter datasetList. The returned Datasets will match structure of Datasets requested with extended metadata (including additional lastEntity timestamp and entities)

Example: true

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "id": 1,
    "name": "Default Project",
    "description": "Description of this Project to show on Central.",
    "keyId": 3,
    "archived": false
  }
]

Schema
HTTP Status: 200

Content Type: application/json; extended


Example
[
  {
    "id": 1,
    "name": "Default Project",
    "description": "Description of this Project to show on Central.",
    "keyId": 3,
    "archived": false,
    "appUsers": 4,
    "forms": 7,
    "lastSubmission": "2018-04-18T03:04:51.695Z",
    "datasets": 2,
    "lastEntity": "2023-04-18T03:04:51.695Z"
  }
]

Schema
Creating a Project
POST /v1/projects

To create a Project, the only information you must supply (via POST body) is the desired name of the Project.

Request body


Example
{
  "name": "Project Name"
}

Schema
HTTP Status: 200

Content Type: application/json


Example
{
  "id": 1,
  "name": "Default Project",
  "description": "Description of this Project to show on Central.",
  "keyId": 3,
  "archived": false
}

Schema
Getting Project Details
GET /v1/projects/{id}

To get just the details of a single Project, GET its single resource route by its numeric ID.

This endpoint supports retrieving extended metadata; provide a header X-Extended-Metadata: true to additionally retrieve the appUsers count of App Users and forms count of forms within the Project, as well as the lastSubmission timestamp of the latest submission to any for in the project, if any.

In addition, the extended metadata version of this endpoint (but not the overall Project listing) returns an array of the verbs the authenticated Actor is able to perform on/within the Project.

Parameters

id

number

The numeric ID of the Project

Example: 16

HTTP Status: 200

Content Type: application/json


Example
{
  "id": 1,
  "name": "Default Project",
  "description": "Description of this Project to show on Central.",
  "keyId": 3,
  "archived": false
}

Schema
HTTP Status: 200

Content Type: application/json; extended


Example
{
  "id": 1,
  "name": "Default Project",
  "description": "Description of this Project to show on Central.",
  "keyId": 3,
  "archived": false,
  "appUsers": 4,
  "forms": 7,
  "lastSubmission": "2018-04-18T03:04:51.695Z",
  "datasets": 2,
  "lastEntity": "2023-04-18T03:04:51.695Z",
  "verbs": [
    "form.create",
    "form.delete"
  ]
}

Schema
Deep Updating Project and Form Details
PUT /v1/projects/{id}

(introduced: version 0.7)

When managing a large deployment, it can be necessary to make sweeping changes to all Form States and Assignments within it at once—when rolling out a new Form, for example, or replacing a deprecated version with a new revision.

For this purpose, we offer this PUT resource, which allows a deep update of Project metadata, Form metadata, and Form Assignment metadata at once and transactionally using a nested data format.

One important mechanic to note immediately here is that we follow true PUT semantics, meaning that the data you provide is not merged with existing data to form an update. With our usual PATCH endpoints, we do this kind of merging and so data that you don't explicitly pass us is left alone. Because we allow the deletion of Form Assignments by way of omission with this API, we treat all omissions as an explicit specification to null the omitted field. This means that, for example, you must always re-specify the Project name, the Project description, and archival flag with every PUT.

This adherence to PUT semantics would normally imply that Forms could be created or deleted by way of this request, but such an operation could become incredibly complex. We currently return a 501 Not Implemented error if you supply nested Form information but you do not give us exactly the entire set of extant Forms.

You can inspect the Request format for this endpoint to see the exact nested data structure this endpoint accepts. Each level of increased granularity is optional: you may PUT just Project metadata, with no forms array, and you may PUT Project and Form metadata but omit assignments from any Form, in which case the omitted detail will be left as-is.

Parameters

id

number

The numeric ID of the Project

Example: 16

Request body


Example
{
  "name": "New Project Name",
  "description": "New Project Description",
  "archived": false,
  "forms": [
    {
      "xmlFormId": "simple",
      "state": "open",
      "assignments": [
        {
          "roleId": 2,
          "actorId": 14
        },
        {
          "roleId": 2,
          "actorId": 21
        }
      ]
    },
    {
      "xmlFormId": "test",
      "state": "closed"
    }
  ]
}

Schema
HTTP Status: 200

Content Type: application/json


Example
{
  "id": 1,
  "name": "Default Project",
  "description": "Description of this Project to show on Central.",
  "keyId": 3,
  "archived": false
}

Schema
HTTP Status: 501

Content Type: application/json


Example
{
  "code": "501.1",
  "message": "The requested feature $unsupported is not supported by this server."
}

Schema
Deleting a Project
DELETE /v1/projects/{id}

Deleting a Project will remove it from the management interface and make it permanently inaccessible. Do not do this unless you are certain you will never need any of its data again. For now, deleting a Project will not purge its Forms. (We will change that in a future release.)

Parameters

id

number

The numeric ID of the Project

Example: 16

HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
Updating Project Details
PATCH /v1/projects/{id}

The Project name may be updated, as well as the Project description and the archived flag.

By default, archived is not set, which is equivalent to false. If archived is set to true, the Project will be sorted to the bottom of the list, and in the web management application the Project will become effectively read-only. API write access will not be affected.

Parameters

id

number

The numeric ID of the Project

Example: 16

Request body


Example
{
  "name": "New Project Name",
  "description": "Description of this Project to show on Central.",
  "archived": true
}

Schema
HTTP Status: 200

Content Type: application/json


Example
{
  "id": 1,
  "name": "Default Project",
  "description": "Description of this Project to show on Central.",
  "keyId": 3,
  "archived": false
}

Schema
Enabling Project Managed Encryption
POST /v1/projects/{id}/key

(introduced: version 0.6)

Project Managed Encryption can be enabled via the API. To do this, POST with the passphrase and optionally a reminder hint about the passphrase. If managed encryption is already enabled, a 409 error response will be returned.

Enabling managed encryption will modify all unencrypted forms in the project, and as a result the version of all forms within the project will also be modified. It is therefore best to enable managed encryption before devices are in the field. Any forms in the project that already have self-supplied encryption keys will be left alone.

Parameters

id

number

The numeric ID of the Project

Example: 16

Request body


Example
{
  "passphrase": "super duper secret",
  "hint": "it was a secret"
}

Schema
HTTP Status: 200

Content Type: application/json


Example
{
  "id": 1,
  "name": "Default Project",
  "description": "Description of this Project to show on Central.",
  "keyId": 3,
  "archived": false
}

Schema
HTTP Status: 400

Content Type: application/json


Example
{
  "code": "400",
  "message": "Could not parse the given data (2 chars) as json."
}

Schema
HTTP Status: 409

Content Type: application/json


Example
{
  "code": "409.1",
  "message": "A resource already exists with id value(s) of 1."
}

Schema
Project Assignments
(introduced: version 0.5)

There are multiple Assignments resources. This one, specific to the Project it is nested within, only governs Role assignments to that Project. Assigning an Actor a Role that grants, for example, a verb submission.create, allows that Actor to create a submission anywhere within this Project. It is also possible to assign rights only to specific forms for actions related only to that form and its submissions: see the Form Assignments resource for information about this.

The sitewide Assignments resource, at the API root, manages Role assignments for all objects across the server. Apart from this difference in scope, the introduction to that section contains information useful for understanding the following endpoints.

There are only one set of Roles, applicable to either scenario. There are not a separate set of Roles used only upon Projects or Forms.

Listing all Project Assignments
GET /v1/projects/{projectId}/assignments

This will list every assignment upon this Project, in the form of actorId/roleId pairs.

This endpoint supports retrieving extended metadata; provide a header X-Extended-Metadata: true to expand the actorId into a full actor objects. The Role reference remains a numeric ID.

Parameters

projectId

number

The numeric ID of the Project

Example: 2

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "actorId": 115,
    "roleId": 4
  }
]

Schema
HTTP Status: 200

Content Type: application/json; extended


Example
[
  {
    "actor": {
      "createdAt": "2018-04-18T23:19:14.802Z",
      "displayName": "My Display Name",
      "id": 115,
      "type": "user",
      "updatedAt": "2018-04-18T23:42:11.406Z",
      "deletedAt": "2018-04-18T23:42:11.406Z"
    },
    "roleId": 4
  }
]

Schema
Listing all Actors assigned some Project Role
GET /v1/projects/{projectId}/assignments/{roleId}

Given a roleId, which may be a numeric ID or a string role system name, this endpoint lists all Actors that have been assigned that Role upon this particular Project.

Parameters

roleId

string

Typically the integer ID of the Role. You may also supply the Role system name if it has one.

Example: manager

projectId

number

The numeric ID of the Project

Example: 16

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "createdAt": "2018-04-18T23:19:14.802Z",
    "displayName": "My Display Name",
    "id": 115,
    "type": "user",
    "updatedAt": "2018-04-18T23:42:11.406Z",
    "deletedAt": "2018-04-18T23:42:11.406Z"
  }
]

Schema
Assigning an Actor to a Project Role
POST /v1/projects/{projectId}/assignments/{roleId}/{actorId}

Given a roleId, which may be a numeric ID or a string role system name, and a numeric actorId, assigns that Role to that Actor for this particular Project.

No POST body data is required, and if provided it will be ignored.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

roleId

string

Typically the integer ID of the Role. You may also supply the Role system name if it has one.

Example: manager

actorId

number

The integer ID of the Actor.

Example: 14

HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
Revoking a Project Role Assignment from an Actor
DELETE /v1/projects/{projectId}/assignments/{roleId}/{actorId}

Given a roleId, which may be a numeric ID or a string role system name, and a numeric actorId, unassigns that Role from that Actor for this particular Project.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

roleId

string

Typically the integer ID of the Role. You may also supply the Role system name if it has one.

Example: manager

actorId

number

The integer ID of the Actor.

Example: 14

HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
Seeing all Form Assignments within a Project
GET /v1/projects/{projectId}/assignments/forms

Returns a summary of all Form-specific Assignments within this Project. This endpoint is meant to simplify the task of summarizing all Form permissions within a Project at a glance and in one transactional request. Because it is necessary to specify which Form each Assignment is attached to, returned results form this endpoint include an xmlFormId field.

This endpoint supports retrieving extended metadata; provide a header X-Extended-Metadata: true to expand the actorId into a full actor objects. The Role reference remains a numeric ID and the Form reference remains a string ID.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "actorId": 115,
    "xmlFormId": "simple",
    "roleId": 4
  }
]

Schema
HTTP Status: 200

Content Type: application/json; extended


Example
[
  {
    "actor": {
      "createdAt": "2018-04-18T23:19:14.802Z",
      "displayName": "My Display Name",
      "id": 115,
      "type": "user",
      "updatedAt": "2018-04-18T23:42:11.406Z",
      "deletedAt": "2018-04-18T23:42:11.406Z"
    },
    "xmlFormId": "simple",
    "roleId": 4
  }
]

Schema
Seeing Role-specific Form Assignments within a Project
GET /v1/projects/{projectId}/assignments/forms/{roleId}

Like the Form Assignments summary API, but filtered by some roleId.

This endpoint supports retrieving extended metadata; provide a header X-Extended-Metadata: true to expand the actorId into a full actor objects. The Role reference remains a numeric ID and the Form reference remains a string ID.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

roleId

number

The numeric ID of the Role

Example: 16

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "actorId": 115,
    "xmlFormId": "simple",
    "roleId": 4
  }
]

Schema
HTTP Status: 200

Content Type: application/json; extended


Example
[
  {
    "actor": {
      "createdAt": "2018-04-18T23:19:14.802Z",
      "displayName": "My Display Name",
      "id": 115,
      "type": "user",
      "updatedAt": "2018-04-18T23:42:11.406Z",
      "deletedAt": "2018-04-18T23:42:11.406Z"
    },
    "xmlFormId": "simple",
    "roleId": 4
  }
]

Form Management
Forms are the heart of ODK. They are created out of XML documents in the ODK XForms specification format. The Intro to Forms on the ODK Documentation website is a good resource if you are unsure what this means. Once created, Forms can be retrieved in a variety of ways, their state can be managed, and they can be deleted.

These subsections cover only the modern RESTful API resources involving Forms. For documentation on the OpenRosa formList endpoint (which can be used to list Forms), see that section below.

Forms
In this API, Forms are distinguished by their formIds, which are a part of the XForms XML that defines each Form. In fact, as you will see below, many of the properties of a Form are extracted automatically from the XML: hash, name, version, as well as the formId itself (which to reduce confusion internally is known as xmlFormId in ODK Central).

The only other property Forms currently have is state, which can be used to control whether Forms show up in mobile clients like ODK Collect for download, as well as whether they accept new Submissions or not.

It is not yet possible to modify a Form's XML definition once it is created.

List all Forms
GET /v1/projects/{projectId}/forms

Currently, there are no paging or filtering options, so listing Forms will get you every Form you are allowed to access, every time.

As of version 1.2, Forms that are unpublished (that only carry a draft and have never been published) will appear with full metadata detail. Previously, certain details like name were omitted. You can determine that a Form is unpublished by checking the publishedAt value: it will be null for unpublished forms.

This endpoint supports retrieving extended metadata; provide a header X-Extended-Metadata: true to additionally retrieve the submissions count of the number of Submissions that each Form has, the reviewStates object of counts of Submissions with specific review states, the lastSubmission most recent submission timestamp, the Actor the Form was createdBy, as well as other metadata.

The query ?deleted=true can be added to list deleted Forms with their numeric form IDs, which can be used to restore a deleted Form.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

deleted

(query)

boolean

If set to true, will return only deleted Forms and their IDs

Example: true

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "projectId": 1,
    "xmlFormId": "simple",
    "name": "Simple",
    "version": "2.1",
    "enketoId": "abcdef",
    "hash": "51a93eab3a1974dbffc4c7913fa5a16a",
    "keyId": 3,
    "state": "open",
    "publishedAt": "2018-01-21T00:04:11.153Z",
    "createdAt": "2018-01-19T23:58:03.395Z",
    "updatedAt": "2018-03-21T12:45:02.312Z"
  }
]

Schema
HTTP Status: 200

Content Type: application/json; extended


Example
[
  {
    "projectId": 1,
    "xmlFormId": "simple",
    "name": "Simple",
    "version": "2.1",
    "enketoId": "abcdef",
    "hash": "51a93eab3a1974dbffc4c7913fa5a16a",
    "keyId": 3,
    "state": "open",
    "publishedAt": "2018-01-21T00:04:11.153Z",
    "createdAt": "2018-01-19T23:58:03.395Z",
    "updatedAt": "2018-03-21T12:45:02.312Z",
    "submissions": 10,
    "reviewStates": {
      "received": 3,
      "hasIssues": 2,
      "edited": 1
    },
    "lastSubmission": "2018-04-18T03:04:51.695Z",
    "createdBy": {
      "createdAt": "2018-04-18T23:19:14.802Z",
      "displayName": "My Display Name",
      "id": 115,
      "type": "user",
      "updatedAt": "2018-04-18T23:42:11.406Z",
      "deletedAt": "2018-04-18T23:42:11.406Z"
    },
    "entityRelated": false,
    "publicLinks": 4
  }
]

Schema
Creating a new Form
POST /v1/projects/{projectId}/forms

When creating a Form, the only required data is the actual XForms XML or XLSForm itself. Use it as the POST body with a Content-Type header of application/xml (text/xml works too), and the Form will be created.

As of Version 0.8, Forms will by default be created in Draft state, accessible under /projects/…/forms/…/draft. The Form itself will not have a public XML definition, and will not appear for download onto mobile devices. You will need to publish the form to finalize it for data collection. To disable this behaviour, and force the new Form to be immediately ready, you can pass the querystring option ?publish=true.

For XLSForm upload, either .xls or .xlsx are accepted. You must provide the Content-Type request header corresponding to the file type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet for .xlsx files, and application/vnd.ms-excel for .xls files. You must also provide an X-XlsForm-FormId-Fallback request header with the formId you want the resulting form to have, if the spreadsheet does not already specify. This header field accepts percent-encoded values to support Unicode characters and other non-ASCII values.

By default, any XLSForm conversion Warnings will fail this request and return the warnings rather than use the converted XML to create a form. To override this behaviour, provide a querystring flag ?ignoreWarnings=true. Conversion Errors will always fail this request.

The API will currently check the XML's structure in order to extract the information we need about it, but ODK Central does not run comprehensive validation on the full contents of the XML to ensure compliance with the ODK specification. Future versions will likely do this, but in the meantime you will have to use a tool like ODK Validate to be sure your Forms are correct.

You will get following workflow warnings while creating a new form or uploading a new version of an existing form:

Structural Change: Returned when the uploaded definition of the form removes, renames or moves a field to a different group/repeat. Learn more

Deleted Form: Returned when there is a form with the same ID in the Trash. Learn more

Creating Datasets with Forms

Starting from Version 2022.3, a Form can also create a Dataset by defining a Dataset schema in the Form definition (XForms XML or XLSForm). When a Form with a Dataset schema is uploaded, a Dataset and its Properties are created. The state of the Dataset is dependent on the state of the Form; you will need to publish the Form to publish the Dataset. Datasets in the Draft state are not returned in Dataset APIs, however the Related Datasets API for the Form can be called to get the Dataset and its Properties.

It is possible to define the schema of a Dataset in multiple Forms. Such Forms can be created and published in any order. Publishing any of the Forms will also publish the Dataset and will generate a dataset.create event; dataset.update events are generated in Audit logs when a Form adds a new property in the Dataset. The state of a Property of a Dataset is also dependent on the state of the Form that FIRST defines that Property, which means if a Form is in the Draft state then the Properties defined by that Form will not appear in the .csv file of the Dataset.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

ignoreWarnings

(query)

boolean

Defaults to false. Set to true if you want the Form to be created even if the XLSForm conversion results in warnings.

Example: false

publish

(query)

boolean

Defaults to false. Set to true if you want the Form to skip the Draft state to Published.

Example: false

X-XlsForm-FormId-Fallback

(header)

string

e.g. filename.xlsx

Example: filename.xlsx

HTTP Status: 200

Content Type: application/json


Example
{
  "projectId": 1,
  "xmlFormId": "simple",
  "name": "Simple",
  "version": "2.1",
  "enketoId": "abcdef",
  "hash": "51a93eab3a1974dbffc4c7913fa5a16a",
  "keyId": 3,
  "state": "open",
  "publishedAt": "2018-01-21T00:04:11.153Z",
  "createdAt": "2018-01-19T23:58:03.395Z",
  "updatedAt": "2018-03-21T12:45:02.312Z"
}

Schema
HTTP Status: 400

Content Type: application/json


Example
{
  "code": "400",
  "message": "Could not parse the given data (2 chars) as json."
}

Schema
HTTP Status: 409

Content Type: application/json


Example
{
  "code": "409.1",
  "message": "A resource already exists with id value(s) of 1."
}

Schema
Individual Form
Getting Form Details
GET /v1/projects/{projectId}/forms/{xmlFormId}

This endpoint supports retrieving extended metadata; provide a header X-Extended-Metadata: true to additionally retrieve the submissions count of the number of Submissions that this Form has, as well as the lastSubmission most recent submission timestamp.

Parameters

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

projectId

number

The numeric ID of the Project

Example: 16

HTTP Status: 200

Content Type: application/json


Example
{
  "projectId": 1,
  "xmlFormId": "simple",
  "name": "Simple",
  "version": "2.1",
  "enketoId": "abcdef",
  "hash": "51a93eab3a1974dbffc4c7913fa5a16a",
  "keyId": 3,
  "state": "open",
  "publishedAt": "2018-01-21T00:04:11.153Z",
  "createdAt": "2018-01-19T23:58:03.395Z",
  "updatedAt": "2018-03-21T12:45:02.312Z"
}

Schema
HTTP Status: 200

Content Type: application/json; extended


Example
{
  "projectId": 1,
  "xmlFormId": "simple",
  "name": "Simple",
  "version": "2.1",
  "enketoId": "abcdef",
  "hash": "51a93eab3a1974dbffc4c7913fa5a16a",
  "keyId": 3,
  "state": "open",
  "publishedAt": "2018-01-21T00:04:11.153Z",
  "createdAt": "2018-01-19T23:58:03.395Z",
  "updatedAt": "2018-03-21T12:45:02.312Z",
  "submissions": 10,
  "reviewStates": {
    "received": 3,
    "hasIssues": 2,
    "edited": 1
  },
  "lastSubmission": "2018-04-18T03:04:51.695Z",
  "createdBy": {
    "createdAt": "2018-04-18T23:19:14.802Z",
    "displayName": "My Display Name",
    "id": 115,
    "type": "user",
    "updatedAt": "2018-04-18T23:42:11.406Z",
    "deletedAt": "2018-04-18T23:42:11.406Z"
  },
  "entityRelated": false,
  "publicLinks": 4
}

Schema
Deleting a Form
DELETE /v1/projects/{projectId}/forms/{xmlFormId}

-| When a Form is deleted, it goes into the Trash section, but it can now be restored from the Trash. After 30 days in the Trash, the Form and all of its resources and submissions will be automatically purged. If your goal is to prevent it from showing up on survey clients like ODK Collect, consider setting its state to closing or closed instead (see Modifying a Form just above for more details).The API usually identifies forms by their projectId and xmlFormId, but if a Form is deleted, the same xmlFormId can be reused. To restore a deleted Form, use its numeric ID, which can be retrieved by listing Forms with ?deleted=true.

Parameters

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

projectId

number

The numeric ID of the Project

Example: 16

HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
Modifying a Form
PATCH /v1/projects/{projectId}/forms/{xmlFormId}

It is currently possible to modify only one thing about a Form: its state, which governs whether it is available for download onto survey clients and whether it accepts new Submissions. See the state Attribute in the Request documentation to the right to see the possible values and their meanings.

We use PATCH rather than PUT to represent the update operation, so that you only have to supply the properties you wish to change. Anything you do not supply will remain untouched.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

Request body


Example
{
  "state": "open"
}

Schema
HTTP Status: 200

Content Type: application/json


Example
{
  "projectId": 1,
  "xmlFormId": "simple",
  "name": "Simple",
  "version": "2.1",
  "enketoId": "abcdef",
  "hash": "51a93eab3a1974dbffc4c7913fa5a16a",
  "keyId": 3,
  "state": "open",
  "publishedAt": "2018-01-21T00:04:11.153Z",
  "createdAt": "2018-01-19T23:58:03.395Z",
  "updatedAt": "2018-03-21T12:45:02.312Z"
}

Schema
HTTP Status: 400

Content Type: application/json


Example
{
  "code": "400",
  "message": "Could not parse the given data (2 chars) as json."
}

Schema
Getting Form Details by formLinkId
GET /v1/form-links/{formLinkId}/form

Returns Form metadata for the provided formLinkId

Parameters

formLinkId

string

The formLinkId of the Form being referenced.

Example: abcdef

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "projectId": 1,
    "xmlFormId": "simple",
    "name": "Simple",
    "version": "2.1",
    "enketoId": "abcdef",
    "hash": "51a93eab3a1974dbffc4c7913fa5a16a",
    "keyId": 3,
    "state": "open",
    "publishedAt": "2018-01-21T00:04:11.153Z",
    "createdAt": "2018-01-19T23:58:03.395Z",
    "updatedAt": "2018-03-21T12:45:02.312Z"
  }
]

Schema
Retrieving Form XML
GET /v1/projects/{projectId}/forms/{xmlFormId}.xml

To get the XML of the Form, add .xml to the end of the request URL.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

HTTP Status: 200

Content Type: application/xml


Example
<h:html xmlns="http://www.w3.org/2002/xforms" xmlns:h="http://www.w3.org/1999/xhtml" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa">
  <h:head>
    <h:title>Simple</h:title>
    <model>
      <instance>
        <data id="simple" version="2.1">
          <meta>
            <instanceID/>
          </meta>
          <name/>
          <age/>
        </data>
      </instance>

      <bind nodeset="/data/meta/instanceID" type="string" readonly="true()" calculate="concat('uuid:', uuid())"/>
      <bind nodeset="/data/name" type="string"/>
      <bind nodeset="/data/age" type="int"/>
    </model>

  </h:head>
  </h:body>
    <input ref="/data/name">
      <label>What is your name?</label>
    </input>
    <input ref="/data/age">
      <label>What is your age?</label>
    </input>
  </h:body>
</h:html>

Schema
Retrieving Form XLS(X)
GET /v1/projects/{projectId}/forms/{xmlFormId}.xlsx

If a Form was created with an Excel file (.xls or .xlsx), you can get that file back by adding .xls or .xlsx as appropriate to the Form resource path.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

HTTP Status: 200

Content Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet


Example
"(binary data)\n"

Schema
Listing Form Attachments
GET /v1/projects/{projectId}/forms/{xmlFormId}/attachments

This endpoint allows you to fetch the list of expected attachment files, and will tell you whether the server is in possession of each file or not, and a hash of the file contents. To modify an attachment, you'll need to create a Draft. The property datasetExists indicates whether the attachment is a link to a Dataset instead of an actual file.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "name": "myfile.png",
    "type": "image",
    "exists": true,
    "blobExists": true,
    "datasetExists": false,
    "hash": "d41d8cd98f00b204e9800998ecf8427e",
    "updatedAt": "2018-03-21T12:45:02.312Z"
  }
]

Schema
Downloading a Form Attachment
GET /v1/projects/{projectId}/forms/{xmlFormId}/attachments/{filename}

To download a single file, use this endpoint.

The appropriate Content-Disposition (attachment with a filename) and Content-Type will be given. Content-Type will be either:

the type supplied at upload time, or if not supplied
a type derived from the file extension, or if none found
application/octet-stream
This endpoint supports ETag, which can be used to avoid downloading the same content more than once. When an API consumer calls this endpoint, it returns a value in ETag header, you can pass this value in the header If-None-Match of subsequent requests. If the file has not been changed since the previous request, you will receive 304 Not Modified response otherwise you'll get the latest file.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

filename

string

The name of the file to download.

Example: simple

HTTP Status: 200

Content Type: {the MIME type of the attachment file itself}


Example
"(binary data)"

Schema
Getting Form Schema Fields
GET /v1/projects/{projectId}/forms/{xmlFormId}/fields

(introduced: version 0.8)

For applications that do not rely on JavaRosa, it can be challenging to parse XForms XML into a simple schema structure. Because Central Backend already implements and performs such an operation for its own internal purposes, we also expose this utility for any downstream consumers which wish to make use of it.

While this may eventually overlap with the new OData JSON CSDL specification, we are likely to maintain this API as it more closely mirrors the original XForms data types and structure.

Central internally processes the XForms schema tree into a flat list of fields, and this is how the data is returned over this endpoint as well. It will always return fields in a depth-first traversal order of the original <instance> XML block in the XForm.

You may optionally add the querystring parameter ?odata=true to sanitize the field names and paths to match the way they will be outputted for OData. While the original field names as given in the XForms definition may be used as-is for CSV output, OData has some restrictions related to the domain-qualified identifier syntax it uses.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

odata

(query)

boolean

If set to true, will sanitize field names.

Example: false

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "name": "meta",
    "path": "/meta",
    "type": "structure"
  },
  {
    "name": "instanceID",
    "path": "/meta/instanceID",
    "type": "string"
  },
  {
    "name": "name",
    "path": "/name",
    "type": "string"
  },
  {
    "name": "age",
    "path": "/age",
    "type": "int"
  },
  {
    "name": "photo",
    "path": "/photo",
    "type": "binary",
    "binary": true
  }
]

Schema
Restoring a Form
POST /v1/projects/{projectId}/forms/{id}/restore

(introduced: version 1.4)

Deleted forms can now be restored (as long as they have been in the Trash less than 30 days and have not been purged). However, a deleted Form with the same xmlFormId as an active Form cannot be restored while that other Form is active.

This /restore URL uses the numeric ID of the Form (now returned by the /forms?deleted=true endpoint) rather than the xmlFormId to unambigously restore. Note that the numeric ID of a Form is not returned by default on the Form list and is only returned when listing deleted Forms.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

id

string

The ID (not xmlFormId) of the Form

Example: simple

HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
Draft Form
(introduced: version 0.8)

Draft Forms allow you to test and fix issues with Forms before they are finalized and presented to data collectors. They make this process easier, as Draft Forms can be created and discarded without consequence: your Drafts will not count against the overall Form schema, nor against the set of unique version strings for the Form.

You can create or replace the current Draft Form at any time by POSTing to the /draft subresource on the Form, and you can publish the current Draft by POSTing to /draft/publish.

When a Draft Form is created, a Draft Token is also created for it, which can be found in Draft Form responses at draftToken. This token allows you to submit test Submissions to the Draft Form through clients like Collect. If the Draft is published or deleted, the token will be deactivated. But if you replace the Draft without first deleting it, the existing Draft Token will be carried forward, so that you do not have to reconfigure your device.

Getting Draft Form Details
GET /v1/projects/{projectId}/forms/{xmlFormId}/draft

The response here will include standard overall Form metadata, like xmlFormId, in addition to the Draft-specific information.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

HTTP Status: 200

Content Type: application/json


Example
{
  "projectId": 1.0,
  "xmlFormId": "simple",
  "name": "Simple",
  "version": "2.1",
  "enketoId": "abcdef",
  "hash": "51a93eab3a1974dbffc4c7913fa5a16a",
  "keyId": 3.0,
  "state": "",
  "publishedAt": "2018-01-21T00:04:11.153Z",
  "createdAt": "2018-01-19T23:58:03.395Z",
  "updatedAt": "2018-03-21T12:45:02.312Z",
  "webformsEnabled": "",
  "draftToken": "lSpAIeksRu1CNZs7!qjAot2T17dPzkrw9B4iTtpj7OoIJBmXvnHM8z8Ka4QPEjR7"
}

Schema
Creating a Draft Form
POST /v1/projects/{projectId}/forms/{xmlFormId}/draft

POSTing here will create a new Draft Form on the given Form. For the most part, it takes the same parameters as the Create Form request: you can submit XML or Excel files, you can provide ignoreWarnings if you'd like.

Additionally, however, you may POST with no Content-Type and an empty body to create a Draft Form with a copy of the definition (XML, XLS, etc) that is already published, if there is one. This can be useful if you don't wish to update the Form definition itself, but rather one or more Form Attachments.

If your Draft form schema contains any field path which overlaps with a field path of a previous version of the Form, but with a different data type, your request will be rejected. You can rename the conflicting field, or correct it to have the same data type as it did previously.

When a Draft is created, the expected Form Attachments are computed and slots are created, as with a new Form. Any attachments that match existing ones on the published Form, if it exists, will be copied over to the new Draft.

Even if a Draft exists, you can always replace it by POSTing here again. In that case, the attachments that exist on the Draft will similarly be copied over to the new Draft. If you wish to copy from the published version instead, you can do so by first DELETEing the extant Draft.

Draft version conflicts are allowed with prior versions of a Form while in Draft state. If you attempt to publish the Form without correcting the conflict, the publish operation will fail. You can request that Central update the version string on your behalf as part of the publish operation to avoid this: see that endpoint for more information.

The xmlFormId, however, must exactly match that of the Form overall, or the request will be rejected.

Starting from Version 2022.3, a Draft Form can also create or update a Dataset by defining a Dataset schema in the Form definition. The state of the Dataset and its Properties is dependent on the state of the Form, see Creating a new form for more details.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

ignoreWarnings

(query)

boolean

Defaults to false. Set to true if you want the form to be created even if the XLSForm conversion results in warnings.

Example: false

X-XlsForm-FormId-Fallback

(header)

string

e.g. filename.xlsx

Example: filename.xlsx

HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
HTTP Status: 400

Content Type: application/json


Example
{
  "code": "400",
  "message": "Could not parse the given data (2 chars) as json."
}

Schema
Deleting a Draft Form
DELETE /v1/projects/{projectId}/forms/{xmlFormId}/draft

Once a Draft Form is deleted, its definition and any Form Attachments associated with it will be removed.

You will not be able to delete the draft if there is no published version of the form.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
Retrieving Draft Form XML
GET /v1/projects/{projectId}/forms/{xmlFormId}/draft.xml

To get the XML of the Draft Form, add .xml to the end of the request URL.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

HTTP Status: 200

Content Type: application/xml


Example
<h:html xmlns="http://www.w3.org/2002/xforms" xmlns:h="http://www.w3.org/1999/xhtml" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa">
  <h:head>
    <h:title>Simple</h:title>
    <model>
      <instance>
        <data id="simple" version="2.1">
          <meta>
            <instanceID/>
          </meta>
          <name/>
          <age/>
        </data>
      </instance>

      <bind nodeset="/data/meta/instanceID" type="string" readonly="true()" calculate="concat('uuid:', uuid())"/>
      <bind nodeset="/data/name" type="string"/>
      <bind nodeset="/data/age" type="int"/>
    </model>

  </h:head>
  <h:body>
    <input ref="/data/name">
      <label>What is your name?</label>
    </input>
    <input ref="/data/age">
      <label>What is your age?</label>
    </input>
  </h:body>
</h:html>

Schema
Retrieving Draft Form XLS(X)
GET /v1/projects/{projectId}/forms/{xmlFormId}/draft.xlsx

If a Draft Form was created with an Excel file (.xls or .xlsx), you can get that file back by adding .xls or .xlsx as appropriate to the Draft Form resource path.This endpoint supports ETag, which can be used to avoid downloading the same content more than once. When an API consumer calls this endpoint, it returns a value in ETag header, you can pass this value in the header If-None-Match of subsequent requests. If the file has not been changed since the previous request, you will receive 304 Not Modified response otherwise you'll get the latest file.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

HTTP Status: 200

Content Type: application/xml


Example
(binary data)

Schema
Listing expected Draft Form Attachments
GET /v1/projects/{projectId}/forms/{xmlFormId}/draft/attachments

Form Attachments for each form are automatically determined when the form is first created, by scanning the XForms definition for references to media or data files. Because of this, it is not possible to directly modify the list of form attachments; that list is fully determined by the given XForm. Instead, the focus of this API subresource is around communicating that expected list of files, and uploading binaries into those file slots.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "name": "myfile.png",
    "type": "image",
    "exists": true,
    "blobExists": true,
    "datasetExists": false,
    "hash": "d41d8cd98f00b204e9800998ecf8427e",
    "updatedAt": "2018-03-21T12:45:02.312Z"
  }
]

Schema
Downloading a Draft Form Attachment
GET /v1/projects/{projectId}/forms/{xmlFormId}/draft/attachments/{filename}

To download a single file, use this endpoint. The appropriate Content-Disposition (attachment with a filename or Dataset name) and Content-Type (based on the type supplied at upload time, or text/csv in the case of a linked Dataset, or application/octet-stream otherwise) will be given.This endpoint supports ETag, which can be used to avoid downloading the same content more than once. When an API consumer calls this endpoint, it returns a value in ETag header, you can pass this value in the header If-None-Match of subsequent requests. If the file has not been changed since the previous request, you will receive 304 Not Modified response otherwise you'll get the latest file.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

filename

string

The name of tha attachment.

Example: people.csv

HTTP Status: 200

Content Type: {the MIME type of the attachment file itself or text/csv for a Dataset}


Example
"(binary data)\n"

Schema
Uploading a Draft Form Attachment
POST /v1/projects/{projectId}/forms/{xmlFormId}/draft/attachments/{filename}

To upload a binary to an expected file slot, POST the binary to its endpoint. Supply a Content-Type MIME-type header if you have one.

As of version 2022.3, if there is already a Dataset linked to this attachment, it will be unlinked and replaced with the uploaded file.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

filename

string

The name of that attachment.

Example: people.csv

HTTP Status: 200

Content Type: application/json


Example
{
  "name": "myfile.png",
  "type": "",
  "exists": "true",
  "blobExists": "true",
  "datasetExists": "true",
  "updatedAt": "2018-03-21T12:45:02.312Z"
}

Schema
Clearing a Draft Form Attachment
DELETE /v1/projects/{projectId}/forms/{xmlFormId}/draft/attachments/{filename}

Because Form Attachments are completely determined by the XForms definition of the form itself, there is no direct way to entirely remove a Form Attachment entry from the list, only to clear its uploaded content or to unlink the Dataset. Thus, when you issue a DELETE to the attachment's endpoint, that is what happens.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

filename

string

The name of tha attachment.

Example: people.csv

HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
Linking a Dataset to a Draft Form Attachment
PATCH /v1/projects/{projectId}/forms/{xmlFormId}/draft/attachments/{filename}

(introduced: version 2022.3)

This endpoint can update a Form Attachment's link to a Dataset. You can use this to link or unlink a Dataset to a Form Attachment. Linking of a Dataset to the Attachment only happens if the Attachment type is file and there is a Dataset with the exact name of the Attachment (excluding extension .csv) in the Project. For example, if the Form definition includes an Attachment named people.csv, then it can be linked to a Dataset named people. Pay special attention to letter case and spaces.

When linking a Dataset, if there is any existing file attached then it will be removed.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

filename

string

The name of the attachment.

Example: people.csv

Request body


Example
{
  "dataset": "true"
}

Schema
HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
HTTP Status: 404

Content Type: application/json


Example
{
  "code": "404.1",
  "message": "Could not find the resource you were looking for."
}

Schema
Getting Draft Form Schema Fields
GET /v1/projects/{projectId}/forms/{xmlFormId}/draft/fields

Identical to the same request for the published Form, but will return the fields related to the current Draft version.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

odata

(query)

boolean

If set to true, will sanitize field names.

Example: false

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "name": "meta",
    "path": "/meta",
    "type": "structure"
  },
  {
    "name": "instanceID",
    "path": "/meta/instanceID",
    "type": "string"
  },
  {
    "name": "name",
    "path": "/name",
    "type": "string"
  },
  {
    "name": "age",
    "path": "/age",
    "type": "int"
  },
  {
    "name": "photo",
    "path": "/photo",
    "type": "binary",
    "binary": true
  }
]

Schema
Publishing a Draft Form
POST /v1/projects/{projectId}/forms/{xmlFormId}/draft/publish

This will publish your current Draft Form and make it the active Form definition (and attachments).

If your Draft version conflicts with an older version of the Form, you will get an error.

If you wish for the version to be set on your behalf as part of the publish operation, you can provide the new version string as a querystring parameter ?version.

Once the Draft is published, there will no longer be a Draft version of the form.

Starting with Version 2022.3, publishing a Draft Form that defines a Dataset schema will also publish the Dataset. It will generate dataset.create event in Audit logs and make the Dataset available in Datasets APIs. If the Dataset is already published and the Form adds new properties then dataset.update event will be generated.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

version

(query)

string

The version to be associated with the Draft once it's published.

Example: newVersion

HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
HTTP Status: 409

Content Type: application/json


Example
{
  "code": "409.1",
  "message": "A resource already exists with id value(s) of 1."
}

Schema
Published Form Versions
All published versions of a Form are available read-only at the /versions subresource for reference, including the currently published version. You may read that version and its details, retrieve the Form definition, and any attachments associated with each version.

Listing Published Form Versions
GET /v1/projects/{projectId}/forms/{xmlFormId}/versions

Each entry of the version listing will contain some of the same duplicate keys with basic information about the Form: xmlFormId and createdAt, for example. This is done to match the data you'd receive if you'd requested each version separately.

This endpoint supports retrieving extended metadata; provide a header X-Extended-Metadata: true to additionally retrieve the Actor that each version was publishedBy.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "projectId": 1,
    "xmlFormId": "simple",
    "name": "Simple",
    "version": "2.1",
    "enketoId": "abcdef",
    "hash": "51a93eab3a1974dbffc4c7913fa5a16a",
    "keyId": 3,
    "state": "open",
    "publishedAt": "2018-01-21T00:04:11.153Z",
    "createdAt": "2018-01-19T23:58:03.395Z",
    "updatedAt": "2018-03-21T12:45:02.312Z"
  }
]

Schema
HTTP Status: 200

Content Type: application/json; extended


Example
[
  {
    "projectId": 1,
    "xmlFormId": "simple",
    "name": "Simple",
    "version": "2.1",
    "enketoId": "abcdef",
    "hash": "51a93eab3a1974dbffc4c7913fa5a16a",
    "keyId": 3,
    "state": "open",
    "publishedAt": "2018-01-21T00:04:11.153Z",
    "createdAt": "2018-01-19T23:58:03.395Z",
    "updatedAt": "2018-03-21T12:45:02.312Z",
    "publishedBy": {
      "createdAt": "2018-04-18T23:19:14.802Z",
      "displayName": "My Display Name",
      "id": 115,
      "type": "user",
      "updatedAt": "2018-04-18T23:42:11.406Z",
      "deletedAt": "2018-04-18T23:42:11.406Z"
    }
  }
]

Schema
Getting Form Version Details
GET /v1/projects/{projectId}/forms/{xmlFormId}/versions/{version}

Since the XForms specification allows blank strings as versions (and Central treats the lack of a version as a blank string), you may run into trouble using this resource if you have such a Form. In this case, pass the special value ___ (three underscores) as the version to retrieve the blank version version.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

version

string

The version of the Form version being referenced. Pass ___ to indicate a blank version.

Example: one

HTTP Status: 200

Content Type: application/json


Example
{
  "projectId": 1.0,
  "xmlFormId": "simple",
  "name": "Simple",
  "version": "2.1",
  "enketoId": "abcdef",
  "hash": "51a93eab3a1974dbffc4c7913fa5a16a",
  "keyId": 3.0,
  "state": "",
  "publishedAt": "2018-01-21T00:04:11.153Z",
  "createdAt": "2018-01-19T23:58:03.395Z",
  "updatedAt": "2018-03-21T12:45:02.312Z",
  "webformsEnabled": ""
}

Schema
Retrieving Form Version XML
GET /v1/projects/{projectId}/forms/{xmlFormId}/versions/{version}.xml

To get the XML of the Form Version, add .xml to the end of the request URL.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

version

string

The version of the Form version being referenced. Pass ___ to indicate a blank version.

Example: one

HTTP Status: 200

Content Type: application/xml


Example
<h:html xmlns="http://www.w3.org/2002/xforms" xmlns:h="http://www.w3.org/1999/xhtml" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa">
  <h:head>
    <h:title>Simple</h:title>
    <model>
      <instance>
        <data id="simple" version="2.1">
          <meta>
            <instanceID/>
          </meta>
          <name/>
          <age/>
        </data>
      </instance>

      <bind nodeset="/data/meta/instanceID" type="string" readonly="true()" calculate="concat('uuid:', uuid())"/>
      <bind nodeset="/data/name" type="string"/>
      <bind nodeset="/data/age" type="int"/>
    </model>

  </h:head>

    <input ref="/data/name">
      <label>What is your name?</label>
    </input>
    <input ref="/data/age">
      <label>What is your age?</label>
    </input>
  </h:body>
</h:html>

Schema
Retrieving Form Version XLS(X)
GET /v1/projects/{projectId}/forms/{xmlFormId}/versions/{version}.xlsx

If a Form Version was created with an Excel file (.xls or .xlsx), you can get that file back by adding .xls or .xlsx as appropriate to the Form Version resource path.This endpoint supports ETag header, which can be used to avoid downloading the same content more than once. When an API consumer calls this endpoint, the endpoint returns a value in ETag header. If you pass that value in the If-None-Match header of a subsequent request, then if the file has not been changed since the previous request, you will receive 304 Not Modified response; otherwise you'll get the latest file.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

version

string

The version of the Form version being referenced. Pass ___ to indicate a blank version.

Example: one

HTTP Status: 200

Content Type: application/xml


Example
(binary data)

Schema
Listing Form Version Attachments
GET /v1/projects/{projectId}/forms/{xmlFormId}/versions/{version}/attachments

Attachments are specific to each version of a Form. You can retrieve the attachments associated with a given version here.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

version

string

The version of the Form version being referenced. Pass ___ to indicate a blank version.

Example: one

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "name": "myfile.png",
    "type": "image",
    "exists": true,
    "blobExists": true,
    "datasetExists": false,
    "hash": "d41d8cd98f00b204e9800998ecf8427e",
    "updatedAt": "2018-03-21T12:45:02.312Z"
  }
]

Schema
Downloading a Form Version Attachment
GET /v1/projects/{projectId}/forms/{xmlFormId}/versions/{version}/attachments/{filename}

To download a single file, use this endpoint.

The appropriate Content-Disposition (attachment with a filename) and Content-Type will be given. Content-Type will be either:

the type supplied at upload time, or if not supplied
a type derived from the file extension, or if none found
application/octet-stream
This endpoint supports ETag header, which can be used to avoid downloading the same content more than once. When an API consumer calls this endpoint, the endpoint returns a value in ETag header. If you pass that value in the If-None-Match header of a subsequent request, then if the file has not been changed since the previous request, you will receive 304 Not Modified response; otherwise you'll get the latest file.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

version

string

The version of the Form version being referenced. Pass ___ to indicate a blank version.

Example: one

filename

string

The name of tha attachment.

Example: people.csv

HTTP Status: 200

Content Type: {the MIME type of the attachment file itself}


Example
"(binary data)"

Schema
Getting Form Version Schema Fields
GET /v1/projects/{projectId}/forms/{xmlFormId}/versions/{version}/fields

Identical to the same request for the published Form, but will return the fields related to the specified version.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

version

string

The version of the Form version being referenced. Pass ___ to indicate a blank version.

Example: one

odata

(query)

boolean

If set to true, will sanitize field names.

Example: false

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "name": "meta",
    "path": "/meta",
    "type": "structure"
  },
  {
    "name": "instanceID",
    "path": "/meta/instanceID",
    "type": "string"
  },
  {
    "name": "name",
    "path": "/name",
    "type": "string"
  },
  {
    "name": "age",
    "path": "/age",
    "type": "int"
  },
  {
    "name": "photo",
    "path": "/photo",
    "type": "binary",
    "binary": true
  }
]

Schema
Form Assignments
(introduced: version 0.7)

There are multiple Assignments resources. This one, specific to the Form it is nested within, only governs Role assignments to that Form. Assigning an Actor a Role that grants, for example, a verb submission.create, allows that Actor to create a submission to this Form alone. It is also possible to assign umbrella rights to a whole Project and therefore all Forms within it: see the Project Assignments resource for information about this.

The sitewide Assignments resource, at the API root, manages Role assignments for all objects across the server. Apart from this difference in scope, the introduction to that section contains information useful for understanding the following endpoints.

There are only one set of Roles, applicable to either scenario. There are not a separate set of Roles used only upon Projects or Forms.

Listing all Form Assignments
GET /v1/projects/{projectId}/forms/{xmlFormId}/assignments

This will list every assignment upon this Form, in the form of actorId/roleId pairs.

This endpoint supports retrieving extended metadata; provide a header X-Extended-Metadata: true to expand the actorId into a full actor objects. The Role reference remains a numeric ID.

Parameters

projectId

number

The numeric ID of the Project

Example: 2

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "actorId": 115,
    "roleId": 4
  }
]

Schema
HTTP Status: 200

Content Type: application/json; extended


Example
[
  {
    "actor": {
      "createdAt": "2018-04-18T23:19:14.802Z",
      "displayName": "My Display Name",
      "id": 115,
      "type": "user",
      "updatedAt": "2018-04-18T23:42:11.406Z",
      "deletedAt": "2018-04-18T23:42:11.406Z"
    },
    "roleId": 4
  }
]

Schema
Listing all Actors assigned some Form Role
GET /v1/projects/{projectId}/forms/{xmlFormId}/assignments/{roleId}

Given a roleId, which may be a numeric ID or a string role system name, this endpoint lists all Actors that have been assigned that Role upon this particular Form.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

roleId

string

Typically the integer ID of the Role. You may also supply the Role system name if it has one.

Example: manager

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "createdAt": "2018-04-18T23:19:14.802Z",
    "displayName": "My Display Name",
    "id": 115,
    "type": "user",
    "updatedAt": "2018-04-18T23:42:11.406Z",
    "deletedAt": "2018-04-18T23:42:11.406Z"
  }
]

Schema
Assigning an Actor to a Form Role
POST /v1/projects/{projectId}/forms/{xmlFormId}/assignments/{roleId}/{actorId}

Given a roleId, which may be a numeric ID or a string role system name, and a numeric actorId, assigns that Role to that Actor for this particular Form.

No POST body data is required, and if provided it will be ignored.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

roleId

string

Typically the integer ID of the Role. You may also supply the Role system name if it has one.

Example: manager

actorId

number

The integer ID of the Actor.

Example: 14

HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
Revoking a Form Role Assignment from an Actor
DELETE /v1/projects/{projectId}/forms/{xmlFormId}/assignments/{roleId}/{actorId}

Given a roleId, which may be a numeric ID or a string role system name, and a numeric actorId, unassigns that Role from that Actor for this particular Form.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

roleId

string

Typically the integer ID of the Role. You may also supply the Role system name if it has one.

Example: manager

actorId

number

The integer ID of the Actor.

Example: 14

HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
Public Access Links
(introduced: version 1.0)

Anybody in possession of a Public Access Link for a Form can use that link to submit data to that Form. Public Links are useful for collecting direct responses from a broad set of respondents, and can be revoked using the administration website or the API at any time.

The API for Public Links is particularly useful, as it can be used to, for example, programmatically create and send individually customized and controlled links for direct distribution. The user-facing link for a Public Link has the following structure: /-/{enketoId}?st={token} where - is the Enketo root, enketoId is the survey ID of this published Form on Enketo and token is a session token to identify this Public Link.

To revoke the access of any Link, terminate its session token by issuing DELETE /sessions/:token.

Listing all Links
GET /v1/projects/{projectId}/forms/{xmlFormId}/public-links

This will list every Public Access Link upon this Form.

This endpoint supports retrieving extended metadata; provide a header X-Extended-Metadata: true to retrieve the Actor the Link was createdBy.

Parameters

projectId

number

The numeric ID of the Project

Example: 2

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "createdAt": "2018-04-18T23:19:14.802Z",
    "displayName": "Public Survey",
    "id": 115,
    "type": "public_link",
    "updatedAt": "2018-04-18T23:42:11.406Z",
    "deletedAt": "2018-04-18T23:42:11.406Z",
    "token": "d1!E2GVHgpr4h9bpxxtqUJ7EVJ1Q$Dusm2RBXg8XyVJMCBCbvyE8cGacxUx3bcUT",
    "once": false
  }
]

Schema
HTTP Status: 200

Content Type: application/json; extended


Example
[
  {
    "createdAt": "2018-04-18T23:19:14.802Z",
    "displayName": "Public Survey",
    "id": 115,
    "type": "public_link",
    "updatedAt": "2018-04-18T23:42:11.406Z",
    "deletedAt": "2018-04-18T23:42:11.406Z",
    "token": "d1!E2GVHgpr4h9bpxxtqUJ7EVJ1Q$Dusm2RBXg8XyVJMCBCbvyE8cGacxUx3bcUT",
    "once": false,
    "createdBy": {
      "createdAt": "2018-04-18T23:19:14.802Z",
      "displayName": "My Display Name",
      "id": 115,
      "type": "user",
      "updatedAt": "2018-04-18T23:42:11.406Z",
      "deletedAt": "2018-04-18T23:42:11.406Z"
    }
  }
]

Schema
Creating a Link
POST /v1/projects/{projectId}/forms/{xmlFormId}/public-links

To create a new Public Access Link to this Form, you must send at least a displayName for the resulting Actor. You may also provide once: true if you want to create a link that can only be filled by each respondent once. This setting is enforced by Enketo using local device tracking; the link is still distributable to multiple recipients, and the enforcement can be defeated by using multiple browsers or devices.

Parameters

projectId

number

The numeric ID of the Project

Example: 2

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

Request body


Example
{
  "displayName": "my public link",
  "once": false
}

Schema
HTTP Status: 200

Content Type: application/json


Example
{
  "createdAt": "2018-04-18T23:19:14.802Z",
  "displayName": "My Display Name",
  "id": 115,
  "type": "user",
  "updatedAt": "2018-04-18T23:42:11.406Z",
  "deletedAt": "2018-04-18T23:42:11.406Z",
  "token": "d1!E2GVHgpr4h9bpxxtqUJ7EVJ1Q$Dusm2RBXg8XyVJMCBCbvyE8cGacxUx3bcUT",
  "once": false
}

Schema
Deleting a Link
DELETE /v1/projects/{projectId}/forms/{xmlFormId}/public-links/{linkId}

You can fully delete a link by issuing DELETE to its resource. This will remove the Link from the system entirely. If instead you wish to revoke the Link's access to prevent future submission without removing its record entirely, you can issue DELETE /sessions/:token.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

linkId

integer

The numeric ID of the Link

Example: 42

HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
Related Datasets
(introduced: version 2022.3)

Datasets are created and updated through Forms. Dataset-related Forms follow the entities sub-spec of the ODK XForms specification that allow them to define a Dataset and a mapping of Form Fields to Dataset Properties. Submissions from such a Form can create Entities within the Dataset defined in the Form.

Currently, Datasets and Dataset Properties are purely additive. Multiple Forms can add Properties to the same Dataset and multiple Forms can create Entities in the same Dataset. Not all Properties of a Dataset have to be included in a Form for that Dataset. For example, one Form publishing to a Dataset called trees could add location and species, while another could add species and circumference. The Properties of the Dataset would be the union of Properties from all Forms for that Dataset (location, species, circumference). Note that it is not necessary that a Form will save to all Properties of a Dataset, so the endpoint also returns a inForm flag for each property which is true only if the Form affects that Property.

The following endpoints return the Dataset(s) that Submissions of that Form will populate. They also return all of the Entity Properties for each Dataset and indicate which ones are mapped to Fields in the specified Form.

Published Form Related Datasets
GET /v1/projects/{projectId}/forms/{xmlFormId}/dataset-diff

This endpoint lists the name and Properties of a Dataset that are affected by a Form. The list of Properties includes all published Properties on that Dataset, but each property has the inForm flag to note whether or not it will be filled in by that form.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "name": "people",
    "properties": [
      {
        "name": "first_name",
        "inForm": true
      }
    ]
  }
]

Schema
Draft Form Dataset Diff
GET /v1/projects/{projectId}/forms/{xmlFormId}/draft/dataset-diff

This endpoint reflects the change to a Dataset that will go into effect once the form is Published. Like the endpoint above, it lists the Dataset name and Properties, but it also includes the isNew flag on both the Dataset, and on each individual property. This flag is true only if the Dataset/Property is new and is going to be created by publishing the Draft Form.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "name": "people",
    "isNew": true,
    "properties": [
      {
        "name": "first_name",
        "inForm": true,
        "isNew": true
      }
    ]
  }
]

Submission Management
Submissions are filled-out forms (also called Instances in some other ODK documentation). Each is associated with a particular Form (and in many cases with a particular version of a Form), and is also created out of a standard XML format based on the Form itself. Submissions can be sent with many accompanying multimedia attachments, such as photos taken in the course of the survey. Once created, the Submissions themselves as well as their attachments can be retrieved through this API.

These subsections cover only the modern RESTful API resources involving Submissions. For documentation on the OpenRosa submission endpoint (which can be used to submit Submissions), or the OData endpoint (which can be used to retrieve and query submission data), see those sections below.

Like Forms, Submissions can have versions. Each Form has an overall xmlFormId that represents the Form as a whole, and each version has a version that identifies that particular version. Often, when fetching data by the xmlFormId alone, information from the latest Form version is included in the response.

Similarly with Submissions, the instanceId each Submission is first submitted with will always represent that Submission as a whole. Each version of the Submission, though, has its own instanceId. Sometimes, but not very often, when getting information about the Submission by only its overall instanceId, information from the latest Submission version is included in the response.

Submissions
Submissions are available as a subresource under Forms. So, for instance, /v1/projects/1/forms/myForm/submissions refers only to the Submissions that have been submitted to the Form myForm.

Once created (which, like with Forms, is done by way of their XML data rather than a JSON description), it is possible to retrieve and export Submissions in a number of ways, as well as to access the multimedia Attachments associated with each Submission.

Listing all Submissions on a Form
GET /v1/projects/{projectId}/forms/{xmlFormId}/submissions

Currently, there are no paging or filtering options, so listing Submissions will get you every Submission in the system, every time.

This endpoint supports retrieving extended metadata; provide a header X-Extended-Metadata: true to return a submitter data object alongside the submitterId Actor ID reference.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

deleted

(query)

boolean

If set to true, returns only deleted submissions.

Example: True

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "instanceId": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
    "submitterId": 23,
    "deviceId": "imei:123456",
    "userAgent": "Enketo/3.0.4",
    "reviewState": "approved",
    "createdAt": "2018-01-19T23:58:03.395Z",
    "updatedAt": "2018-03-21T12:45:02.312Z",
    "deletedAt": null,
    "currentVersion": {
      "instanceId": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
      "instanceName": "village third house",
      "submitterId": 23,
      "deviceId": "imei:123456",
      "userAgent": "Enketo/3.0.4",
      "createdAt": "2018-01-19T23:58:03.395Z",
      "current": true
    }
  }
]

Schema
HTTP Status: 200

Content Type: application/json; extended


Example
[
  {
    "instanceId": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
    "submitterId": 23,
    "deviceId": "imei:123456",
    "userAgent": "Enketo/3.0.4",
    "reviewState": "approved",
    "createdAt": "2018-01-19T23:58:03.395Z",
    "updatedAt": "2018-03-21T12:45:02.312Z",
    "deletedAt": null,
    "currentVersion": {
      "instanceId": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
      "instanceName": "village third house",
      "submitterId": 23,
      "deviceId": "imei:123456",
      "userAgent": "Enketo/3.0.4",
      "createdAt": "2018-01-19T23:58:03.395Z",
      "current": true
    },
    "submitter": {
      "createdAt": "2018-04-18T23:19:14.802Z",
      "displayName": "My Display Name",
      "id": 115,
      "type": "user",
      "updatedAt": "2018-04-18T23:42:11.406Z",
      "deletedAt": "2018-04-18T23:42:11.406Z"
    }
  }
]

Schema
Creating a Submission
POST /v1/projects/{projectId}/forms/{xmlFormId}/submissions

To create a Submission by REST rather than over the OpenRosa interface, you may POST the Submission XML to this endpoint. The request must have an XML Content-Type (text/xml or application/xml).

Unlike the OpenRosa Form Submission API, this interface does not accept Submission attachments upon Submission creation. Instead, the server will determine which attachments are expected based on the Submission XML, and you may use the endpoints found in the following section to add the appropriate attachments and check the attachment status and content.

If the XML is unparseable or there is some other input problem with your data, you will get a 400 error in response. If a submission already exists with the given instanceId, you will get a 409 error in response.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

deviceID

(query)

string

Optionally record a particular deviceID associated with this submission. It is recorded along with the data, but Central does nothing more with it.

Example: b1628661-65ed-4cab-8e30-19c17fef2de0

HTTP Status: 200

Content Type: application/json


Example
{
  "instanceId": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
  "submitterId": 23,
  "deviceId": "imei:123456",
  "userAgent": "Enketo/3.0.4",
  "reviewState": "approved",
  "createdAt": "2018-01-19T23:58:03.395Z",
  "updatedAt": "2018-03-21T12:45:02.312Z",
  "deletedAt": null,
  "currentVersion": {
    "instanceId": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
    "instanceName": "village third house",
    "submitterId": 23,
    "deviceId": "imei:123456",
    "userAgent": "Enketo/3.0.4",
    "createdAt": "2018-01-19T23:58:03.395Z",
    "current": true
  }
}

Schema
HTTP Status: 400

Content Type: application/json


Example
{
  "code": "400",
  "message": "Could not parse the given data (2 chars) as json."
}

Schema
HTTP Status: 409

Content Type: application/json


Example
{
  "code": "409.1",
  "message": "A resource already exists with id value(s) of 1."
}

Schema
Retrieving Submissions Geodata
GET /v1/projects/{projectId}/forms/{xmlFormId}/submissions.geojson

Submissions' geodata, one form field per submission, in GeoJSON format.If no particular field path is supplied, the first non-repeat geopoint/geotrace/geoshape field is used.No particular ordering is implied.

⚠️ The specifics of this endpoint are likely to change in future releases, and the parameters this endpoint takes are not all documented.Its current behaviour should not be depended upon.Use cases for this API can be discussed on the forum.

Parameters

projectId

number

The numeric ID of the Project

Example: 10

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

HTTP Status: 200

Content Type: application/json


Example
{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "id": "uuid:f7ec6523-05f5-450c-9153-934b640b7467",
      "geometry": {
        "type": "Point",
        "coordinates": [
          170.511231,
          -52.123783,
          654
        ]
      },
      "properties": {
        "fieldpath": "/some_group/some_geopoint"
      }
    },
    {
      "type": "Feature",
      "id": "uuid:0de0e925-0f0e-467c-b809-31a7427f1518",
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              170,
              10,
              653
            ],
            [
              171.123,
              20.123,
              -30.3
            ],
            [
              172,
              30,
              65.65
            ],
            [
              170,
              10,
              653
            ]
          ]
        ]
      },
      "properties": {
        "fieldpath": "/some_geoshape"
      }
    }
  ]
}

Schema
Getting Submission metadata
GET /v1/projects/{projectId}/forms/{xmlFormId}/submissions/{instanceId}

Like how Forms are addressed by their XML formId, individual Submissions are addressed in the URL by their instanceId.

As of version 1.4, a deviceId and userAgent will also be returned with each submission. The client device may transmit these extra metadata when the data is submitted. If it does, those fields will be recognized and returned here for reference. Here, only the initial deviceId and userAgent will be reported. If you wish to see these metadata for any submission edits, including the most recent edit, you will need to list the versions.

As of version 2023.2, this API returns currentVersion that contains metadata of the most recent version of the Submission.

This endpoint supports retrieving extended metadata; provide a header X-Extended-Metadata: true to return a submitter data object alongside the submitterId Actor ID reference.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

instanceId

string

The instanceId of the Submission being referenced.

Example: uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44

HTTP Status: 200

Content Type: application/json


Example
{
  "instanceId": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
  "submitterId": 23,
  "deviceId": "imei:123456",
  "userAgent": "Enketo/3.0.4",
  "reviewState": "approved",
  "createdAt": "2018-01-19T23:58:03.395Z",
  "updatedAt": "2018-03-21T12:45:02.312Z",
  "deletedAt": null,
  "currentVersion": {
    "instanceId": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
    "instanceName": "village third house",
    "submitterId": 23,
    "deviceId": "imei:123456",
    "userAgent": "Enketo/3.0.4",
    "createdAt": "2018-01-19T23:58:03.395Z",
    "current": true
  }
}

Schema
HTTP Status: 200

Content Type: application/json; extended


Example
{
  "instanceId": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
  "submitterId": 23,
  "deviceId": "imei:123456",
  "userAgent": "Enketo/3.0.4",
  "reviewState": "approved",
  "createdAt": "2018-01-19T23:58:03.395Z",
  "updatedAt": "2018-03-21T12:45:02.312Z",
  "deletedAt": null,
  "currentVersion": {
    "instanceId": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
    "instanceName": "village third house",
    "submitterId": 23,
    "deviceId": "imei:123456",
    "userAgent": "Enketo/3.0.4",
    "createdAt": "2018-01-19T23:58:03.395Z",
    "current": true
  },
  "submitter": {
    "createdAt": "2018-04-18T23:19:14.802Z",
    "displayName": "My Display Name",
    "id": 115,
    "type": "user",
    "updatedAt": "2018-04-18T23:42:11.406Z",
    "deletedAt": "2018-04-18T23:42:11.406Z"
  }
}

Schema
HTTP Status: 301

Content Type: text/html


Example
<Redirects to correct Submission URL>

Schema
Updating Submission Data
PUT /v1/projects/{projectId}/forms/{xmlFormId}/submissions/{instanceId}

(introduced: version 1.2)

You can use this endpoint to submit updates to an existing submission.

The instanceId that is submitted with the initial version of the submission is used permanently to reference that submission logically, which is to say the initial submission and all its subsequent versions. Each subsequent version will also provide its own instanceId. This instanceId becomes that particular version's identifier.

To perform an update, you need to provide in the submission XML an additional deprecatedID metadata node with the instanceID of the particular and current submission version you are replacing. If the deprecatedID you give is anything other than the identifier of the current version of the submission at the time the server receives it, you will get a 409 Conflict back. You can get the current version instanceID by getting the current XML of the submission.

The XML data you send will replace the existing data entirely. All of the data must be present in the updated XML.

When you create a new submission version, any uploaded media files attached to the current version that match expected attachment names in the new version will automatically be copied over to the new version. So if you don't make any changes to media files, there is no need to resubmit them. You can get information about all the submission versions from the /versions subresource.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

instanceId

string

The instanceId of the Submission being updated.

Example: uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44

HTTP Status: 200

Content Type: application/json


Example
{
  "instanceId": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
  "submitterId": 23,
  "deviceId": "imei:123456",
  "userAgent": "Enketo/3.0.4",
  "reviewState": "approved",
  "createdAt": "2018-01-19T23:58:03.395Z",
  "updatedAt": "2018-03-21T12:45:02.312Z",
  "deletedAt": null,
  "currentVersion": {
    "instanceId": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
    "instanceName": "village third house",
    "submitterId": 23,
    "deviceId": "imei:123456",
    "userAgent": "Enketo/3.0.4",
    "createdAt": "2018-01-19T23:58:03.395Z",
    "current": true
  }
}

Schema
HTTP Status: 400

Content Type: application/json


Example
{
  "code": "400",
  "message": "Could not parse the given data (2 chars) as json."
}

Schema
HTTP Status: 409

Content Type: application/json


Example
{
  "code": "409.1",
  "message": "A resource already exists with id value(s) of 1."
}

Schema
Updating Submission metadata
PATCH /v1/projects/{projectId}/forms/{xmlFormId}/submissions/{instanceId}

Currently, the only updatable metadata on a Submission is its reviewState. To update the submission data itself, please see Updating Submission data.

Starting with Version 2022.3, changing the reviewState of a Submission to approved can create an Entity in a Dataset if the corresponding Form maps Dataset Properties to Form Fields. If an Entity is created successfully then an entity.create event is logged in Audit logs, else entity.error is logged.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

instanceId

string

The instanceId of the Submission being referenced.

Example: uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44

HTTP Status: 200

Content Type: application/json


Example
{
  "instanceId": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
  "submitterId": 23,
  "deviceId": "imei:123456",
  "userAgent": "Enketo/3.0.4",
  "reviewState": "approved",
  "createdAt": "2018-01-19T23:58:03.395Z",
  "updatedAt": "2018-03-21T12:45:02.312Z",
  "deletedAt": null,
  "currentVersion": {
    "instanceId": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
    "instanceName": "village third house",
    "submitterId": 23,
    "deviceId": "imei:123456",
    "userAgent": "Enketo/3.0.4",
    "createdAt": "2018-01-19T23:58:03.395Z",
    "current": true
  }
}

Schema
Deleting a Submission
DELETE /v1/projects/{projectId}/forms/{xmlFormId}/submissions/{instanceId}

When a Submission is deleted, there is a period of time (30 days) during which it can be restored. After this time, all of its resources and attachments are automatically purged. Purging deleted Submissions can also be triggered from the command line.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

instanceId

string

The instanceId of the Submission being referenced.

Example: uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44

HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
HTTP Status: 404

Content Type: application/json


Example
{
  "code": "404.1",
  "message": "Could not find the resource you were looking for."
}

Schema
Restoring a deleted Submission
POST /v1/projects/{projectId}/forms/{xmlFormId}/submissions/{instanceId}/restore

Submissions that have been recently soft-deleted and not yet purged can be restored using this endpoint.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

instanceId

string

The instanceId of the Submission being referenced.

Example: uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44

HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
HTTP Status: 404

Content Type: application/json


Example
{
  "code": "404.1",
  "message": "Could not find the resource you were looking for."
}

Schema
Retrieving Submission XML
GET /v1/projects/{projectId}/forms/{xmlFormId}/submissions/{instanceId}.xml

To retrieve the XML of the Submission, just append .xml to the end of the request URL.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

instanceId

string

The instanceId of the Submission being referenced.

Example: uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44

HTTP Status: 200

Content Type: application/xml


Example
<data id="simple">
  <orx:meta><orx:instanceID>uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44</orx:instanceID></orx:meta>
  <name>Alice</name>
  <age>32</age>
</data>

Schema
Retrieving Submission GeoJSON
GET /v1/projects/{projectId}/forms/{xmlFormId}/submissions/{instanceId}.geojson

To retrieve the GeoJSON representation of the Submission, just append .geojson to the end of the request URL.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

instanceId

string

The instanceId of the Submission being referenced.

Example: uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44

HTTP Status: 200

Content Type: application/json


Example
{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "id": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
      "geometry": {
        "type": "Point",
        "coordinates": [
          4.7871262893819555,
          52.24107555748181,
          0
        ]
      },
      "properties": {
        "fieldpath": "/singular/input_geopoint"
      }
    }
  ]
}

Schema
Getting an Enketo Edit URL
GET /v1/projects/{projectId}/forms/{xmlFormId}/submissions/{instanceId}/edit

(introduced: version 1.2)

This endpoint redirects the user to an Enketo-powered page that allows the user to interactively edit the submission. Once the user is satisfied, they can perform the submission update directly through the Enketo interface.

The Enketo instance is already hosted inside of ODK Central. There is no reason to create or use a separate Enketo installation.

This endpoint is intended for use by the Central administration frontend and will not work without it. In particular, the user must be logged into the Central administration site for Enketo editing to work. If there is no Central authentication cookie present when Enketo is loaded, the browser will then be redirected by Enketo to a Central login page.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

instanceId

string

The instanceId of the Submission being updated.

Example: uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44

HTTP Status: 302

Content Type: text/html


Example
No Example

Schema
Exporting Form Submissions to CSV
GET /v1/projects/{projectId}/forms/{xmlFormId}/submissions.csv.zip

To export all the Submission data associated with a Form, just add .csv.zip to the end of the listing URL. The response will be a ZIP file containing one or more CSV files, as well as all multimedia attachments associated with the included Submissions.

You can exclude the media attachments from the ZIP file by specifying ?attachments=false.

If Project Managed Encryption is being used, additional querystring parameters may be provided in the format {keyId}={passphrase} for any number of keys (eg 1=secret&4=password). This will decrypt any records encrypted under those managed keys. Submissions encrypted under self-supplied keys will not be decrypted. Note: if you are building a browser-based application, please consider the alternative POST endpoint, described in the following section.

If a passphrase is supplied but is incorrect, the entire request will fail. If a passphrase is not supplied but encrypted records exist, only the metadata for those records will be returned, and they will have a status of not decrypted.

If you are running an unsecured (HTTP rather than HTTPS) Central server, it is not a good idea to export data this way as your passphrase and the decrypted data will be sent plaintext over the network.

You can use an OData-style $filter query to filter the submissions that will appear in the ZIP file. This is a bit awkward, since this endpoint has nothing to do with OData, but since we already must recognize the OData syntax, it is less strange overall for now not to invent a whole other one here. Only a subset of the $filter features are available; please see the linked section for more information.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

attachments

(query)

boolean

Set to false to exclude media attachments from the export.

Example: true

$filter

(query)

string

If provided, will filter responses to those matching the given OData query. Only certain fields are available to reference. The operators lt, le, eq, neq, ge, gt, not, and, and or are supported, and the built-in functions now, year, month, day, hour, minute, second.

Example: year(__system/submissionDate) lt year(now())

groupPaths

(query)

boolean

Set to false to remove group path prefixes from field header names (eg instanceID instead of meta-instanceID). This behavior mimics a similar behavior in ODK Briefcase.

Example: true

deletedFields

(query)

boolean

Set to true to restore all fields previously deleted from this form for this export. All known fields and data for those fields will be merged and exported.

Example: false

splitSelectMultiples

(query)

boolean

Set to true to create a boolean column for every known select multiple option in the export. The option name is in the field header, and a 0 or a 1 will be present in each cell indicating whether that option was checked for that row. This behavior mimics a similar behavior in ODK Briefcase.

Example: false

HTTP Status: 200

Content Type: application/zip


Example
"(binary data)"

Schema
HTTP Status: 400

Content Type: application/json


Example
{
  "code": "400",
  "message": "Could not parse the given data (2 chars) as json."
}

Schema
Exporting Form Submissions to CSV via POST
POST /v1/projects/{projectId}/forms/{xmlFormId}/submissions.csv.zip

This non-REST-compliant endpoint is provided for use with Project Managed Encryption. In every respect, it behaves identically to the GET endpoint described in the previous section, except that it works over POST. This is necessary because for browser-based applications, it is a dangerous idea to simply link the user to /submissions.csv.zip?2=supersecretpassphrase because the browser will remember this route in its history and thus the passphrase will become exposed. This is especially dangerous as there are techniques for quickly learning browser-visited URLs of any arbitrary domain.

You can exclude the media attachments from the ZIP file by specifying ?attachments=false.

And so, for this POST version of the Submission CSV export endpoint, the passphrases may be provided via POST body rather than querystring. Two formats are supported: form URL encoding (application/x-www-form-urlencoded) and JSON. In either case, the keys should be the keyIds and the values should be the passphrases, as with the GET version above.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

attachments

(query)

boolean

Set to false to exclude media attachments from the export.

Example: true

$filter

(query)

string

If provided, will filter responses to those matching the given OData query. Only certain fields are available to reference. The operators lt, le, eq, neq, ge, gt, not, and, and or are supported, and the built-in functions now, year, month, day, hour, minute, second.

Example: year(__system/submissionDate) lt year(now())

groupPaths

(query)

boolean

Set to false to remove group path prefixes from field header names (eg instanceID instead of meta-instanceID). This behavior mimics a similar behavior in ODK Briefcase.

Example: true

deletedFields

(query)

boolean

Set to true to restore all fields previously deleted from this form for this export. All known fields and data for those fields will be merged and exported.

Example: false

splitSelectMultiples

(query)

boolean

Set to true to create a boolean column for every known select multiple option in the export. The option name is in the field header, and a 0 or a 1 will be present in each cell indicating whether that option was checked for that row. This behavior mimics a similar behavior in ODK Briefcase.

Example: false

HTTP Status: 200

Content Type: application/zip


Example
"(binary data)"

Schema
HTTP Status: 400

Content Type: application/json


Example
{
  "code": "400",
  "message": "Could not parse the given data (2 chars) as json."
}

Schema
Exporting Root Data to Plain CSV
GET /v1/projects/{projectId}/forms/{xmlFormId}/submissions.csv

(introduced: version 1.1)

The above submission endpoints will give you a ZIP file with the submission data in it. This is necessary to provide all the possible related repeat table files, as well as the media files associated with the submissions. But ZIP files can be difficult to work with, and many Forms have no repeats nor media attachments.

To export just the root table (no repeat data nor media files), you can call this endpoint instead, which will directly give you CSV data.

Please see the above endpoint for notes on dealing with Managed Encryption.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

$filter

(query)

string

If provided, will filter responses to those matching the given OData query. Only certain fields are available to reference. The operators lt, le, eq, neq, ge, gt, not, and, and or are supported, and the built-in functions now, year, month, day, hour, minute, second.

Example: year(__system/submissionDate) lt year(now())

HTTP Status: 200

Content Type: application/zip


Example
"(csv data)"

Schema
HTTP Status: 400

Content Type: application/json


Example
{
  "code": "400",
  "message": "Could not parse the given data (2 chars) as json."
}

Schema
Exporting Root Data to Plain CSV via POST
POST /v1/projects/{projectId}/forms/{xmlFormId}/submissions.csv

(introduced: version 1.1)

This endpoint is useful only for Forms under Project Managed Encryption.

As with GET to .csv just above, this endpoint will only return CSV text data, rather than a ZIP file containing ore or more files. Please see that endpoint for further explanation.

As with POST to .csv.zip it allows secure submission of decryption passkeys. Please see that endpoint for more information on how to do this.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

$filter

(query)

string

If provided, will filter responses to those matching the given OData query. Only certain fields are available to reference. The operators lt, le, eq, neq, ge, gt, not, and, and or are supported, and the built-in functions now, year, month, day, hour, minute, second.

Example: year(__system/submissionDate) lt year(now())

HTTP Status: 200

Content Type: application/zip


Example
"(csv data)"

Schema
HTTP Status: 400

Content Type: application/json


Example
{
  "code": "400",
  "message": "Could not parse the given data (2 chars) as json."
}

Schema
Retrieving Audit Logs
GET /v1/projects/{projectId}/forms/{xmlFormId}/submissions/{instanceId}/audits

(introduced: version 1.2)

You can retrieve all Server Audit Logs relating to a submission. They will be returned most recent first.

This endpoint supports retrieving extended metadata; provide a header X-Extended-Metadata: true to additionally expand the actorId into full actor details, and acteeId into full actee details. The actor will always be an Actor, and the actee will be the Form this Submission is a part of.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

instanceId

string

The instanceId of the Submission.

Example: uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "actorId": 42,
    "action": "form.create",
    "acteeId": "85cb9aff-005e-4edd-9739-dc9c1a829c44",
    "loggedAt": "2018-04-18T23:19:14.802Z"
  }
]

Schema
HTTP Status: 200

Content Type: application/json; extended


Example
[
  {
    "actorId": 42,
    "action": "form.create",
    "acteeId": "85cb9aff-005e-4edd-9739-dc9c1a829c44",
    "loggedAt": "2018-04-18T23:19:14.802Z",
    "actor": {
      "createdAt": "2018-04-18T23:19:14.802Z",
      "displayName": "My Display Name",
      "id": 115,
      "type": "user",
      "updatedAt": "2018-04-18T23:42:11.406Z",
      "deletedAt": "2018-04-18T23:42:11.406Z"
    }
  }
]

Schema
Listing Encryption Keys
GET /v1/projects/{projectId}/forms/{xmlFormId}/submissions/keys

This endpoint provides a listing of all known encryption keys needed to decrypt all Submissions for a given Form. It will return at least the base64RsaPublicKey property (as public) of all known versions of the form that have submissions against them. If managed keys are being used and a hint was provided, that will be returned as well.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "id": 1,
    "public": "bcFeKDF3Sg8W91Uf5uxaIlsuhzmjbgUnIyiLzIjrx4CAaf9Y9LG7TAu6wKPqfbH6ZAkJTFSfjLNovbKhpOQcmO5VZGGay6yvXrX1TFW6C6RLITy74erxfUAStdtpP4nraCYqQYqn5zD4/1OmgweJt5vzGXW2ch7lrROEQhXB9lK+bjEeWx8TFW/+6ha/oRLnl6a2RBRL6mhwy3PoByNTKndB2MP4TygCJ/Ini4ivk74iSqVnoeuNJR/xUcU+kaIpZEIjxpAS2VECJU9fZvS5Gt84e5wl/t7bUKu+dlh/cUgHfk6+6bwzqGQYOe5A==",
    "managed": true,
    "hint": "it was a secret"
  }
]

Schema
Listing Submitters
GET /v1/projects/{projectId}/forms/{xmlFormId}/submissions/submitters

This endpoint provides a listing of all known submitting actors to a given Form. Each Actor that has submitted to the given Form will be returned once.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "createdAt": "2018-04-18T23:19:14.802Z",
    "displayName": "My Display Name",
    "id": 115,
    "type": "user",
    "updatedAt": "2018-04-18T23:42:11.406Z",
    "deletedAt": "2018-04-18T23:42:11.406Z"
  }
]

Schema
Comments
(introduced: version 1.2)

This API is likely to change in the future. In version 1.2 we have added comments to submissions, so changes and problems with the data can be discussed. It's very likely we will want comments in more places in the future, and at that time a more complete comments API will be introduced, and this current one may be changed or deprecated entirely.

Currently, it is not possible to get a specific comment's details, or to edit or delete a comment once it has been made.

Listing Comments
GET /v1/projects/{projectId}/forms/{xmlFormId}/submissions/{instanceId}/comments

Comments have only a body comment text and an actor that made the comment.

This endpoint supports retrieving extended metadata; provide a header X-Extended-Metadata: true to return a actor data object alongside the actorId Actor ID reference.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

instanceId

string

The instanceId of the Submission being referenced.

Example: uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "body": "this is my comment",
    "actorId": 42
  }
]

Schema
HTTP Status: 200

Content Type: application/json; extended


Example
[
  {
    "body": "this is my comment",
    "actorId": 42,
    "actor": {
      "createdAt": "2018-04-18T23:19:14.802Z",
      "displayName": "My Display Name",
      "id": 115,
      "type": "user",
      "updatedAt": "2018-04-18T23:42:11.406Z",
      "deletedAt": "2018-04-18T23:42:11.406Z"
    }
  }
]

Schema
Posting Comments
POST /v1/projects/{projectId}/forms/{xmlFormId}/submissions/{instanceId}/comments

Currently, the only accepted data is body, which contains the body of the comment to be made.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

instanceId

string

The instanceId of the Submission being referenced.

Example: uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44

Request body


Example
{
  "body": "this is the text of my comment"
}

Schema
HTTP Status: 200

Content Type: application/json


Example
{
  "body": "this is my comment",
  "actorId": 42
}

Schema
Attachments
When a Submission is created, either over the OpenRosa or the REST interface, its XML data is analyzed to determine which file attachments it references: these may be photos or video taken as part of the survey, or an audit/timing log, among other things. Each reference is an expected attachment, and these expectations are recorded permanently alongside the Submission.

With this subresource, you can list the expected attachments, see whether the server actually has a copy or not, and download, upload, re-upload, or clear binary data for any particular attachment.

Listing expected Submission Attachments
GET /v1/projects/{projectId}/forms/{xmlFormId}/submissions/{instanceId}/attachments

You can retrieve the list of expected Submission attachments at this route, along with a boolean flag indicating whether the server actually has a copy of the expected file or not. If the server has a file, you can then append its filename to the request URL to download only that file (see below).

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

instanceId

string

The instanceId of the Submission being referenced.

Example: uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "name": "file1.jpg",
    "exists": true
  },
  {
    "name": "file2.jpg",
    "exists": false
  },
  {
    "name": "file3.jpg",
    "exists": true
  }
]

Schema
Downloading an Attachment
GET /v1/projects/{projectId}/forms/{xmlFormId}/submissions/{instanceId}/attachments/{filename}

The Content-Type and Content-Disposition will be set appropriately based on the file itself when requesting an attachment file download.This endpoint supports ETag, which can be used to avoid downloading the same content more than once. When an API consumer calls this endpoint, it returns a value in ETag header, you can pass this value in the header If-None-Match of subsequent requests. If the file has not been changed since the previous request, you will receive 304 Not Modified response otherwise you'll get the latest file.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

instanceId

string

The instanceId of the Submission being referenced.

Example: uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44

filename

string

The name of the file as given by the Attachments listing resource.

Example: file1.jpg

HTTP Status: 200

Content Type: {the MIME type of the attachment file itself}


Example
"(binary data)\n"

Schema
Uploading an Attachment
POST /v1/projects/{projectId}/forms/{xmlFormId}/submissions/{instanceId}/attachments/{filename}

(introduced: version 0.4)

To upload a binary to an expected file slot, POST the binary to its endpoint. Supply a Content-Type MIME-type header if you have one.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

instanceId

string

The instanceId of the Submission being referenced.

Example: uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44

filename

string

The name of the file as given by the Attachments listing resource.

Example: file1.jpg

HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
Clearing a Submission Attachment
DELETE /v1/projects/{projectId}/forms/{xmlFormId}/submissions/{instanceId}/attachments/{filename}

(introduced: version 0.4)

Because Submission Attachments are completely determined by the XML data of the submission itself, there is no direct way to entirely remove a Submission Attachment entry from the list, only to clear its uploaded content. Thus, when you issue a DELETE to the attachment's endpoint, that is what happens.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

instanceId

string

The instanceId of the Submission being referenced.

Example: uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44

filename

string

The name of the file as given by the Attachments listing resource.

Example: file1.jpg

HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
Submission Versions
(introduced: version 1.2)

The instanceId that is submitted with the initial version of the submission is used permanently to reference that submission logically, which is to say the initial submission and all its subsequent versions. Each subsequent version will also provide its own instanceId. This instanceId becomes that particular version's identifier.

So if you submit a submission with <orx:instanceID>one</orx:instanceID> and then update it, deprecating one for version two, then the full route for version one is /v1/projects/…/forms/…/submissions/one/versions/one, and for two it is /v1/projects/…/forms/…/submissions/one/versions/two.

As of version 1.4, a deviceId and userAgent will also be returned with each submission. For each submission of a version, the submitting client device may transmit these extra metadata. If it does, those fields will be recognized and returned here for reference.

Listing Versions
GET /v1/projects/{projectId}/forms/{xmlFormId}/submissions/{instanceId}/versions

This will return all submission metadata for every version of this submission, in descending creation order.

This endpoint supports retrieving extended metadata; provide a header X-Extended-Metadata: true to return a submitter data object alongside the submitterId Actor ID reference.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

instanceId

string

The instanceId of the initially submitted version. Please see the notes at the top of this documentation section for more information.

Example: uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "instanceId": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
    "instanceName": "village third house",
    "submitterId": 23,
    "deviceId": "imei:123456",
    "userAgent": "Enketo/3.0.4",
    "createdAt": "2018-01-19T23:58:03.395Z",
    "current": true,
    "formVersion": "1.0"
  }
]

Schema
HTTP Status: 200

Content Type: application/json; extended


Example
[
  {
    "instanceId": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
    "instanceName": "village third house",
    "submitterId": 23,
    "deviceId": "imei:123456",
    "userAgent": "Enketo/3.0.4",
    "createdAt": "2018-01-19T23:58:03.395Z",
    "current": true,
    "submitter": {
      "createdAt": "2018-04-18T23:19:14.802Z",
      "displayName": "My Display Name",
      "id": 115,
      "type": "user",
      "updatedAt": "2018-04-18T23:42:11.406Z",
      "deletedAt": "2018-04-18T23:42:11.406Z"
    },
    "formVersion": "1.0"
  }
]

Schema
Getting Version Details
GET /v1/projects/{projectId}/forms/{xmlFormId}/submissions/{instanceId}/versions/{versionId}

Returns metadata about a particular version of the submission. As with the normal submission endpoint, you'll only get metadata in JSON out of this route. If you want to retrieve the XML, add .xml.

This endpoint supports retrieving extended metadata; provide a header X-Extended-Metadata: true to return a submitter data object alongside the submitterId Actor ID reference.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

instanceId

string

The instanceId of the Submission being referenced.

Example: uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44

versionId

string

The instanceId of the particular version of this submission in question.

Example: uuid:b1628661-65ed-4cab-8e30-19c17fef2de0

HTTP Status: 200

Content Type: application/json


Example
{
  "instanceId": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
  "instanceName": "village third house",
  "submitterId": 23,
  "deviceId": "imei:123456",
  "userAgent": "Enketo/3.0.4",
  "createdAt": "2018-01-19T23:58:03.395Z",
  "current": true,
  "formVersion": "1.0"
}

Schema
HTTP Status: 200

Content Type: application/json; extended


Example
{
  "instanceId": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
  "instanceName": "village third house",
  "submitterId": 23,
  "deviceId": "imei:123456",
  "userAgent": "Enketo/3.0.4",
  "createdAt": "2018-01-19T23:58:03.395Z",
  "current": true,
  "submitter": {
    "createdAt": "2018-04-18T23:19:14.802Z",
    "displayName": "My Display Name",
    "id": 115,
    "type": "user",
    "updatedAt": "2018-04-18T23:42:11.406Z",
    "deletedAt": "2018-04-18T23:42:11.406Z"
  },
  "formVersion": "1.0"
}

Schema
Getting Version XML
GET /v1/projects/{projectId}/forms/{xmlFormId}/submissions/{instanceId}/versions/{versionId}.xml

Returns the XML of a particular version of the submission.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

instanceId

string

The instanceId of the Submission being referenced.

Example: uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44

versionId

string

The instanceId of the particular version of this submission in question.

Example: uuid:b1628661-65ed-4cab-8e30-19c17fef2de0

HTTP Status: 200

Content Type: application/xml


Example
<data id="simple">
  <orx:meta><orx:instanceID>uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44</orx:instanceID></orx:meta>
  <name>Alice</name>
  <age>32</age>
</data>

Schema
Getting Version GeoJSON
GET /v1/projects/{projectId}/forms/{xmlFormId}/submissions/{instanceId}/versions/{versionId}.geojson

Returns the GeoJSON of a particular version of the submission.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

instanceId

string

The instanceId of the Submission being referenced.

Example: uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44

versionId

string

The instanceId of the particular version of this submission in question.

Example: uuid:b1628661-65ed-4cab-8e30-19c17fef2de0

HTTP Status: 200

Content Type: application/json


Example
{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "id": "uuid:b1628661-65ed-4cab-8e30-19c17fef2de0",
      "geometry": {
        "type": "Point",
        "coordinates": [
          4.7871262893819555,
          52.24107555748181,
          0
        ]
      },
      "properties": {
        "fieldpath": "/singular/input_geopoint"
      }
    }
  ]
}

Schema
Listing Version expected Attachments
GET /v1/projects/{projectId}/forms/{xmlFormId}/submissions/{instanceId}/versions/{versionId}/attachments

You can retrieve the list of expected Submission attachments for the given version at this route, along with a boolean flag indicating whether the server actually has a copy of the expected file or not. If the server has a file, you can then append its filename to the request URL to download only that file (see below).

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

instanceId

string

The instanceId of the Submission being referenced.

Example: uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44

versionId

string

The instanceId of the particular version of this submission in question.

Example: uuid:b1628661-65ed-4cab-8e30-19c17fef2de0

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "name": "file1.jpg",
    "exists": true
  },
  {
    "name": "file2.jpg",
    "exists": false
  },
  {
    "name": "file3.jpg",
    "exists": true
  }
]

Schema
Downloading a Version's Attachment
GET /v1/projects/{projectId}/forms/{xmlFormId}/submissions/{instanceId}/versions/{versionId}/attachments/{filename}

It is important to note that this endpoint returns whatever is currently uploaded against the particular version of the Submission. It will not track overwritten attachments.This endpoint supports ETag, which can be used to avoid downloading the same content more than once. When an API consumer calls this endpoint, it returns a value in ETag header, you can pass this value in the header If-None-Match of subsequent requests. If the file has not been changed since the previous request, you will receive 304 Not Modified response otherwise you'll get the latest file.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

instanceId

string

The instanceId of the Submission being referenced.

Example: uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44

versionId

string

The instanceId of the particular version of this submission in question.

Example: uuid:b1628661-65ed-4cab-8e30-19c17fef2de0

filename

string

The name of the file as given by the Attachments listing resource.

Example: file1.jpg

HTTP Status: 200

Content Type: {the MIME type of the attachment file itself}


Example
"(binary data)\n"

Schema
Getting changes between Versions
GET /v1/projects/{projectId}/forms/{xmlFormId}/submissions/{instanceId}/diffs

This returns the changes, or edits, between different versions of a Submission. These changes are returned in an object that is indexed by the instanceId that uniquely identifies that version. Between two submissions, there is an array of objects representing how each field changed. This change object contains the old and new values, as well as the path of that changed node in the Submission XML. These changes reflect the updated instanceID and deprecatedID fields as well as the edited value.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

instanceId

string

The instanceId of the Submission being referenced.

Example: uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44

HTTP Status: 200

Content Type: application/json


Example
{
  "two": [
    {
      "new": "Donna",
      "old": "Dana",
      "path": [
        "name"
      ]
    },
    {
      "new": "55",
      "old": "44",
      "path": [
        "age"
      ]
    },
    {
      "new": "two",
      "old": "one",
      "path": [
        "meta",
        "instanceID"
      ]
    },
    {
      "new": "one",
      "old": null,
      "path": [
        "meta",
        "deprecatedID"
      ]
    }
  ]
}

Schema
Draft Submissions
All Draft Forms feature a /submissions subresource (/draft/submissions), which is identical to the same subresource on the form itself. These submissions exist only as long as the Draft Form does: they are removed if the Draft Form is published, and they are abandoned if the Draft Form is deleted or overwritten.

Here we list all those resources again just for completeness.

Listing all Submissions on a Draft Form
GET /v1/projects/{projectId}/forms/{xmlFormId}/draft/submissions

Identical to the non-Draft version of this endpoint.

Parameters

projectId

number

The id of the project this form belongs to.

Example: 1

xmlFormId

string

The id of this form as given in its XForms XML definition

Example: simple

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "instanceId": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
    "submitterId": 23,
    "deviceId": "imei:123456",
    "userAgent": "Enketo/3.0.4",
    "reviewState": "approved",
    "createdAt": "2018-01-19T23:58:03.395Z",
    "updatedAt": "2018-03-21T12:45:02.312Z",
    "currentVersion": {
      "instanceId": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
      "instanceName": "village third house",
      "submitterId": 23,
      "deviceId": "imei:123456",
      "userAgent": "Enketo/3.0.4",
      "createdAt": "2018-01-19T23:58:03.395Z",
      "current": true
    }
  }
]

Schema
HTTP Status: 200

Content Type: application/json; extended


Example
[
  {
    "instanceId": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
    "submitterId": 23,
    "deviceId": "imei:123456",
    "userAgent": "Enketo/3.0.4",
    "reviewState": "approved",
    "createdAt": "2018-01-19T23:58:03.395Z",
    "updatedAt": "2018-03-21T12:45:02.312Z",
    "currentVersion": {
      "instanceId": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
      "instanceName": "village third house",
      "submitterId": 23,
      "deviceId": "imei:123456",
      "userAgent": "Enketo/3.0.4",
      "createdAt": "2018-01-19T23:58:03.395Z",
      "current": true
    },
    "submitter": {
      "createdAt": "2018-04-18T23:19:14.802Z",
      "displayName": "My Display Name",
      "id": 115,
      "type": "user",
      "updatedAt": "2018-04-18T23:42:11.406Z",
      "deletedAt": "2018-04-18T23:42:11.406Z"
    }
  }
]

Schema
Creating a Submission
POST /v1/projects/{projectId}/forms/{xmlFormId}/draft/submissions

Or

POST /v1/test/{token}/projects/{projectId}/forms/{xmlFormId}/draft/submissions

Identical to the non-Draft version of this endpoint.

Parameters

projectId

number

The id of the project this form belongs to.

Example: 1

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

HTTP Status: 200

Content Type: application/json


Example
{
  "instanceId": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
  "submitterId": 23,
  "deviceId": "imei:123456",
  "userAgent": "Enketo/3.0.4",
  "reviewState": "approved",
  "createdAt": "2018-01-19T23:58:03.395Z",
  "updatedAt": "2018-03-21T12:45:02.312Z",
  "deletedAt": null,
  "currentVersion": {
    "instanceId": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
    "instanceName": "village third house",
    "submitterId": 23,
    "deviceId": "imei:123456",
    "userAgent": "Enketo/3.0.4",
    "createdAt": "2018-01-19T23:58:03.395Z",
    "current": true
  }
}

Schema
HTTP Status: 400

Content Type: application/json


Example
{
  "code": "400",
  "message": "Could not parse the given data (2 chars) as json."
}

Schema
HTTP Status: 409

Content Type: application/json


Example
{
  "code": "409.1",
  "message": "A resource already exists with id value(s) of 1."
}

Schema
Exporting Form Submissions to CSV
GET /v1/projects/{projectId}/forms/{xmlFormId}/draft/submissions.csv.zip

Identical to the non-Draft version of this endpoint.

Parameters

projectId

number

The id of the project this form belongs to.

Example: 1

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

HTTP Status: 200

Content Type: application/zip


Example
"(binary data)"

Schema
HTTP Status: 400

Content Type: application/json


Example
{
  "code": "400",
  "message": "Could not parse the given data (2 chars) as json."
}

Schema
Exporting Form Submissions to CSV via POST
POST /v1/projects/{projectId}/forms/{xmlFormId}/draft/submissions.csv.zip

Identical to the non-Draft version of this endpoint.

Parameters

projectId

number

The id of the project this form belongs to.

Example: 1

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

HTTP Status: 200

Content Type: application/zip


Example
"(binary data)"

Schema
HTTP Status: 400

Content Type: application/json


Example
{
  "code": "400",
  "message": "Could not parse the given data (2 chars) as json."
}

Schema
Listing Encryption Keys
GET /v1/projects/{projectId}/forms/{xmlFormId}/draft/submissions/keys

Identical to the non-Draft version of this endpoint.

Parameters

projectId

number

The id of the project this form belongs to.

Example: 1

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "id": 1,
    "public": "bcFeKDF3Sg8W91Uf5uxaIlsuhzmjbgUnIyiLzIjrx4CAaf9Y9LG7TAu6wKPqfbH6ZAkJTFSfjLNovbKhpOQcmO5VZGGay6yvXrX1TFW6C6RLITy74erxfUAStdtpP4nraCYqQYqn5zD4/1OmgweJt5vzGXW2ch7lrROEQhXB9lK+bjEeWx8TFW/+6ha/oRLnl6a2RBRL6mhwy3PoByNTKndB2MP4TygCJ/Ini4ivk74iSqVnoeuNJR/xUcU+kaIpZEIjxpAS2VECJU9fZvS5Gt84e5wl/t7bUKu+dlh/cUgHfk6+6bwzqGQYOe5A==",
    "managed": true,
    "hint": "it was a secret"
  }
]

Schema
Getting Submission details
GET /v1/projects/{projectId}/forms/{xmlFormId}/draft/submissions/{instanceId}

Identical to the non-Draft version of this endpoint.

Parameters

projectId

number

The id of the project this form belongs to.

Example: 1

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

instanceId

string

The instanceId of the Submission being referenced.

Example: uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44

HTTP Status: 200

Content Type: application/json


Example
{
  "instanceId": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
  "submitterId": 23,
  "deviceId": "imei:123456",
  "userAgent": "Enketo/3.0.4",
  "reviewState": "approved",
  "createdAt": "2018-01-19T23:58:03.395Z",
  "updatedAt": "2018-03-21T12:45:02.312Z",
  "deletedAt": null,
  "currentVersion": {
    "instanceId": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
    "instanceName": "village third house",
    "submitterId": 23,
    "deviceId": "imei:123456",
    "userAgent": "Enketo/3.0.4",
    "createdAt": "2018-01-19T23:58:03.395Z",
    "current": true
  }
}

Schema
HTTP Status: 200

Content Type: application/json; extended


Example
{
  "instanceId": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
  "submitterId": 23,
  "deviceId": "imei:123456",
  "userAgent": "Enketo/3.0.4",
  "reviewState": "approved",
  "createdAt": "2018-01-19T23:58:03.395Z",
  "updatedAt": "2018-03-21T12:45:02.312Z",
  "deletedAt": null,
  "currentVersion": {
    "instanceId": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
    "instanceName": "village third house",
    "submitterId": 23,
    "deviceId": "imei:123456",
    "userAgent": "Enketo/3.0.4",
    "createdAt": "2018-01-19T23:58:03.395Z",
    "current": true
  },
  "submitter": {
    "createdAt": "2018-04-18T23:19:14.802Z",
    "displayName": "My Display Name",
    "id": 115,
    "type": "user",
    "updatedAt": "2018-04-18T23:42:11.406Z",
    "deletedAt": "2018-04-18T23:42:11.406Z"
  }
}

Schema
Retrieving Submission XML
GET /v1/projects/{projectId}/forms/{xmlFormId}/draft/submissions/{instanceId}.xml

Identical to the non-Draft version of this endpoint.

Parameters

projectId

number

The id of the project this form belongs to.

Example: 1

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

instanceId

string

The instanceId of the Submission being referenced.

Example: uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44

HTTP Status: 200

Content Type: application/xml


Example
<data id="simple">
  <orx:meta><orx:instanceID>uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44</orx:instanceID></orx:meta>
  <name>Alice</name>
  <age>32</age>
</data>

Schema
Listing expected Submission Attachments
GET /v1/projects/{projectId}/forms/{xmlFormId}/draft/submissions/{instanceId}/attachments

Identical to the non-Draft version of this endpoint.

Parameters

projectId

number

The id of the project this form belongs to.

Example: 1

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

instanceId

string

The instanceId of the Submission being referenced.

Example: uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "name": "file1.jpg",
    "exists": true
  },
  {
    "name": "file2.jpg",
    "exists": false
  },
  {
    "name": "file3.jpg",
    "exists": true
  }
]

Schema
Downloading an Attachment
GET /v1/projects/{projectId}/forms/{xmlFormId}/draft/submissions/{instanceId}/attachments/{filename}

Identical to the non-Draft version of this endpoint.

Parameters

projectId

number

The id of the project this form belongs to.

Example: 1

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

instanceId

string

The instanceId of the Submission being referenced.

Example: uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44

filename

string

The name of the file as given by the Attachments listing resource.

Example: file1.jpg

HTTP Status: 200

Content Type: {the MIME type of the attachment file itself}


Example
"(binary data)\n"

Schema
Uploading an Attachment
POST /v1/projects/{projectId}/forms/{xmlFormId}/draft/submissions/{instanceId}/attachments/{filename}

Identical to the non-Draft version of this endpoint.

Parameters

projectId

number

The id of the project this form belongs to.

Example: 1

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

instanceId

string

The instanceId of the Submission being referenced.

Example: uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44

filename

string

The name of the file as given by the Attachments listing resource.

Example: file1.jpg

HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
Clearing a Submission Attachment
DELETE /v1/projects/{projectId}/forms/{xmlFormId}/draft/submissions/{instanceId}/attachments/{filename}

Identical to the non-Draft version of this endpoint.

Parameters

projectId

number

The id of the project this form belongs to.

Example: 1

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

instanceId

string

The instanceId of the Submission being referenced.

Example: uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44

filename

string

The name of the file as given by the Attachments listing resource.

Example: file1.jpg

HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Dataset Management
(introduced: version 2022.3)

⚠️ In this API and in the related ODK XForms specification, collections of Entities are referred to as Datasets. The term "Entity List" is used for this concept in the Central frontend UI, user documentation, and all other text intended for end users who are not developers.

A Dataset is a named collection of Entities that have the same properties.

A Dataset can be linked to Forms as Attachments. This will make it available to clients as an automatically-updating CSV.

Related APIs:

Implicit creation of Datasets via Forms

Link a Dataset to a Form Attachment

Get a Form's Related Datasets

Listing Datasets
GET /v1/projects/{projectId}/datasets

The Dataset listing endpoint returns all published Datasets in a Project. If a Draft Form defines a new Dataset, that Dataset will not be included in this list until the Form is published.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "name": "people",
    "createdAt": "2018-01-19T23:58:03.395Z",
    "projectId": 1,
    "approvalRequired": true,
    "ownerOnly": false
  }
]

Schema
HTTP Status: 200

Content Type: application/json; extended


Example
[
  {
    "name": "people",
    "createdAt": "2018-01-19T23:58:03.395Z",
    "projectId": 1,
    "approvalRequired": true,
    "ownerOnly": false,
    "lastEntity": "2018-04-18T03:04:51.695Z",
    "entities": 10,
    "conflicts": 2
  }
]

Schema
Creating Datasets
POST /v1/projects/{projectId}/datasets

You can create a Dataset with a specific name within a Project. This Dataset can then be populated with Entities via the API or via Forms and Submissions, and then used by other Forms. This endpoint allows a Dataset to be created programatically without an input form.

The name of a Dataset is case-sensitive in that it will keep the capitalization provided (e.g. "Trees"). But Central will not allow a second Dataset with the same name but different capitalization to be created (e.g. "trees" when "Trees" already exists).

By default, the Dataset will have no properties, but each Entity will have a label and a unique ID (uuid). You can add additional properties with this related endpoint.

The Dataset name must follow the the same rules as XML identifiers and not start with . or __. See the Entities XForms Specification for more information.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

Request body


Example
{
  "name": "Trees",
  "approvalRequired": false
}

Schema
HTTP Status: 200

Content Type: application/json


Example
{
  "name": "people",
  "createdAt": "2018-01-19T23:58:03.395Z",
  "projectId": 1,
  "approvalRequired": false,
  "ownerOnly": false,
  "lastUpdate": "2018-01-19T23:58:03.395Z",
  "sourceForms": [],
  "linkedForms": [],
  "properties": []
}

Schema
HTTP Status: 409

Content Type: application/json


Example
{
  "code": 409.3,
  "message": "A resource already exists with name,projectId value(s) of trees,1."
}

Schema
Dataset Metadata
GET /v1/projects/{projectId}/datasets/{name}

Returns the metadata of a published Dataset including properties and forms that create and consume the Dataset.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

name

string

Name of the Dataset

Example: people

HTTP Status: 200

Content Type: application/json


Example
{
  "name": "people",
  "createdAt": "2018-01-19T23:58:03.395Z",
  "projectId": 1,
  "approvalRequired": true,
  "ownerOnly": false,
  "lastUpdate": "2020-10-10T03:04:51.695Z",
  "sourceForms": [
    {
      "xmlFormId": "treeRegistration",
      "name": "Tree Registration"
    }
  ],
  "linkedForms": [
    {
      "xmlFormId": "simple",
      "name": "Simple"
    }
  ],
  "properties": [
    {
      "name": "the.age",
      "odataName": "the_age",
      "publishedAt": "2018-01-21T00:04:11.153Z",
      "forms": [
        {
          "xmlFormId": "simple",
          "name": "Simple"
        }
      ]
    }
  ]
}

Schema
Update Dataset Metadata
PATCH /v1/projects/{projectId}/datasets/{name}

You can use this endpoint to update approvalRequired and ownerOnly. However, you cannot update other properties, such as name.

The approvalRequired flag controls the Entity creation flow. If it is true, then the Submission must be approved before an Entity can be created from it. If it is false, then an Entity is created as soon as the Submission is received by ODK Central. By default, approvalRequired is false for Datasets created after v2023.3. Datasets created prior to that will have approvalRequired set to true.

The ownerOnly flag determines which Entities in the Dataset are included for download to an OpenRosa client. More specifically, it determines which Entities are included in a Form Attachment that has been linked to the Dataset. If ownerOnly is true, and the Actor using the OpenRosa client only has access to the Dataset CSV file via linked Form Attachments, then only Entities created by the Actor will be included. This is true of App Users, Web Users with a role of Data Collector, and Public Access Links. If ownerOnly is false, or if the Actor has direct access to the Dataset CSV file, then all Entities will be included. Accessing the Dataset CSV file via linked Form Attachments using a draftToken will also retrieve all Entities, this functionality assumes the draftToken is used by Actors with full dataset access, such as Project Managers and System Administrators. By default, ownerOnly is false.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

name

string

Name of the Dataset

Example: people

Request body


Example
{
  "approvalRequired": true
}

Schema
HTTP Status: 200

Content Type: application/json


Example
{
  "name": "people",
  "createdAt": "2018-01-19T23:58:03.395Z",
  "projectId": 1,
  "approvalRequired": true,
  "ownerOnly": false,
  "lastUpdate": "2020-10-10T03:04:51.695Z",
  "sourceForms": [
    {
      "xmlFormId": "treeRegistration",
      "name": "Tree Registration"
    }
  ],
  "linkedForms": [
    {
      "xmlFormId": "simple",
      "name": "Simple"
    }
  ],
  "properties": [
    {
      "name": "the.age",
      "odataName": "the_age",
      "publishedAt": "2018-01-21T00:04:11.153Z",
      "forms": [
        {
          "xmlFormId": "simple",
          "name": "Simple"
        }
      ]
    }
  ]
}

Schema
Adding Properties
POST /v1/projects/{projectId}/datasets/{name}/properties

Creates a new Property with a specified name in the Dataset.

The name of a Property is case-sensitive in that it will keep the capitalization provided (e.g. "Firstname"). But Central will not allow another Property with the same name but different capitalization to be created (e.g. "FIRSTNAME" when "Firstname" already exists).

Property names follow the same rules as form field names (valid XML identifiers) and cannot use the reserved names of name or label, or begin with the reserved prefix __.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

name

string

Name of the Dataset

Example: people

Request body


Example
{
  "name": "circumference"
}

Schema
HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
Download Dataset
GET /v1/projects/{projectId}/datasets/{name}/entities.csv

Datasets (collections of Entities) can be used as Attachments in other Forms, but they can also be downloaded directly as a CSV file.

The CSV format closely matches the OData Dataset Service format, with columns for system properties such as __id (the Entity UUID), __createdAt, __creatorName, etc., the Entity Label label, and the Dataset/Entity Properties themselves. If any Property for an given Entity is blank (e.g. it was not captured by that Form or was left blank), that field of the CSV is blank.

The $filter querystring parameter can be used to filter on system-level properties, similar to how filtering in the OData Dataset Service works.

The $search querystring parameter can be used to search entity data (user-defined properties) and the label field, using the same search behavior as the OData Dataset Service.

This endpoint supports ETag header, which can be used to avoid downloading the same content more than once. When an API consumer calls this endpoint, the endpoint returns a value in the ETag header. If you pass that value in the If-None-Match header of a subsequent request, then if the Dataset has not been changed since the previous request, you will receive 304 Not Modified response; otherwise you'll get the new data.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

name

string

Name of the Dataset

Example: people

$filter

(query)

string

If provided, will filter responses to those matching the query. Only system-level Entity fields are available to reference. The operators lt, le, eq, neq, ge, gt, not, and, and or are supported, and the built-in functions now, year, month, day, hour, minute, second.

Example: __system/conflict eq \'hard\'

$search

(query)

string

If provided, will search entity data (user-defined properties) and the label field.

Example: john

HTTP Status: 200

Content Type: text/csv


Example
__id,label,geometry,species,circumference_cm,__createdAt,__creatorId,__creatorName,__updates,__updatedAt,__version
2c1ee90b-dde8-434b-9985-2eefd8465339,666cm purpleheart,-29.281608 -67.624883 0 0,purpleheart,667,2023-05-31T19:49:28.902Z,22,Alice,1,2023-05-31T19:52:34.467Z,1
84ac3a03-9980-4098-93a5-b81fdc6ea749,555cm wallaba,18.921876 77.309451 0 0,wallaba,555,2023-05-31T19:49:20.152Z,22,Alice,0,,1

Entity Management
(introduced: version 2023.3)

⚠️ In this API and in the related ODK XForms specification, collections of Entities are referred to as Datasets. The term "Entity List" is used for this concept in the Central frontend UI, user facing documentation, and all other text intended for end users who are not developers.

Entities are data objects that can be shared between Forms to support workflows with multiple steps. They can be created either through form design or through this API. A collection of Entities is a Dataset.

Entities Metadata
GET /v1/projects/{projectId}/datasets/{name}/entities

This endpoint returns a list of the Entities of a Dataset. Please note that this endpoint only returns metadata of the entities not the data. If you want to get the data of all entities then please refer to OData Dataset ServiceYou can provide ?deleted=true to get only deleted entities.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

name

string

Name of the Dataset

Example: people

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "uuid": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
    "createdAt": "2018-01-19T23:58:03.395Z",
    "updatedAt": "2018-03-21T12:45:02.312Z",
    "deletedAt": "2018-03-21T12:45:02.312Z",
    "creatorId": 1,
    "currentVersion": {
      "label": "John (88)",
      "current": true,
      "createdAt": "2018-03-21T12:45:02.312Z",
      "creatorId": 1,
      "userAgent": "Enketo/3.0.4",
      "version": 1,
      "baseVersion": null,
      "branchId": null,
      "trunkVersion": null,
      "branchBaseVersion": null,
      "conflictingProperties": null
    }
  }
]

Schema
HTTP Status: 200

Content Type: application/json; extended


Example
[
  {
    "uuid": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
    "createdAt": "2018-01-19T23:58:03.395Z",
    "updatedAt": "2018-03-21T12:45:02.312Z",
    "deletedAt": "2018-03-21T12:45:02.312Z",
    "creatorId": 1,
    "conflict": null,
    "creator": {
      "createdAt": "2018-04-18T23:19:14.802Z",
      "displayName": "My Display Name",
      "id": 115,
      "type": "user",
      "updatedAt": "2018-04-18T23:42:11.406Z",
      "deletedAt": "2018-04-18T23:42:11.406Z"
    },
    "currentVersion": {
      "label": "John (88)",
      "current": true,
      "createdAt": "2018-03-21T12:45:02.312Z",
      "creatorId": 1,
      "userAgent": "Enketo/3.0.4",
      "version": 1,
      "baseVersion": null,
      "branchId": null,
      "trunkVersion": null,
      "branchBaseVersion": null,
      "conflictingProperties": null,
      "creator": {
        "createdAt": "2018-04-18T23:19:14.802Z",
        "displayName": "My Display Name",
        "id": 115,
        "type": "user",
        "updatedAt": "2018-04-18T23:42:11.406Z",
        "deletedAt": "2018-04-18T23:42:11.406Z"
      }
    }
  }
]

Schema
Entities Geodata
GET /v1/projects/{projectId}/datasets/{name}/entities.geojson

This endpoint returns the geometry-interpretable value of the geometry attribute of Entities of an entity dataset, in GeoJSON format.No particular ordering is implied.

⚠️ The specifics of this endpoint are likely to change in future releases, and the parameters this endpoint takes are not all documented.Its current behaviour should not be depended upon.Use cases for this API can be discussed on the forum.

Parameters

projectId

number

The numeric ID of the Project

Example: 10

name

string

Name of the Dataset

Example: people

HTTP Status: 200

Content Type: application/json


Example
{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "id": "06f1b19a-a14e-4916-b850-b5a5155ea4b7",
      "properties": null,
      "geometry": {
        "type": "Point",
        "coordinates": [
          27.98833,
          86.92528,
          8848
        ]
      }
    },
    {
      "type": "Feature",
      "id": "b4677e0a-8731-4b75-b8df-8e4337ff9b5e",
      "properties": null,
      "geometry": {
        "type": "Point",
        "coordinates": [
          11.3733,
          142.5917,
          -10984
        ]
      }
    }
  ]
}

Schema
Entities Creators
GET /v1/projects/{projectId}/datasets/{name}/entities/creators

This endpoint returns a list of all Actors who have created Entities in the Dataset, sorted by display name.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

name

string

Name of the Dataset

Example: people

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "id": 115,
    "type": "user",
    "displayName": "Alice Johnson",
    "createdAt": "2018-04-18T23:19:14.802Z",
    "updatedAt": "2018-04-18T23:42:11.406Z",
    "deletedAt": null
  },
  {
    "id": 23,
    "type": "user",
    "displayName": "Bob Smith",
    "createdAt": "2018-03-15T15:30:22.150Z",
    "updatedAt": "2018-03-15T15:30:22.150Z",
    "deletedAt": null
  }
]

Schema
Creating Entities
POST /v1/projects/{projectId}/datasets/{name}/entities/creators

Creates one or more Entities in the Dataset.

For creating a single Entity, the request body takes a JSON representation of the Entity, which has the following properties:

A data object containing values for the user-defined Dataset properties. (Not all properties have to have values.)
A label property, which cannot be blank or an empty string. (This is used as a human-readable label in Forms that consume Entities.)
An optional uuid property. If the uuid is not specified, Central will generate a UUID for an Entity with the provided data and label.
{ "label": "John Doe", "data": { "firstName": "John", "age": "22" } }

The value type of all properties is string.

For creating multiple Entities in bulk, the request body takes an array entities containing a list of Entity objects as described above. The bulk entity version also takes a source property with a required name field and optional size, for example to capture the filename and size of a bulk upload source.

{ "entities": [...], "source": {"name": "file.csv", "size": 100} }

You can provide header X-Action-Notes to store the metadata about the request. The metadata can retrieved using Entity Audit Log

Parameters

projectId

number

The numeric ID of the Project

Example: 16

name

string

Name of the Dataset

Example: people

Request body


Example
{
  "entities": [
    {
      "uuid": "54a405a0-53ce-4748-9788-d23a30cc3afa",
      "label": "John Doe (22)",
      "data": {
        "firstName": "John",
        "age": "22"
      }
    },
    {
      "uuid": "0c3a7922-b611-42ca-a961-944e09fa9aa2",
      "label": "Amy Jane (38)",
      "data": {
        "firstName": "Amy",
        "age": "38"
      }
    }
  ],
  "source": {
    "name": "my_dataset.csv",
    "size": 100
  }
}

Schema
HTTP Status: 200

Content Type: application/json


Example
{
  "uuid": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
  "createdAt": "2018-01-19T23:58:03.395Z",
  "updatedAt": "2018-03-21T12:45:02.312Z",
  "deletedAt": "2018-03-21T12:45:02.312Z",
  "creatorId": 1,
  "conflict": null,
  "currentVersion": {
    "label": "John (88)",
    "current": true,
    "createdAt": "2018-03-21T12:45:02.312Z",
    "creatorId": 1,
    "userAgent": "Enketo/3.0.4",
    "conflictingProperties": null,
    "version": 1,
    "baseVersion": null,
    "branchId": null,
    "trunkVersion": null,
    "branchBaseVersion": null,
    "data": {
      "firstName": "John",
      "age": "88"
    },
    "dataReceived": {
      "label": "John (88)",
      "firstName": "John",
      "age": "88"
    }
  }
}

Schema
HTTP Status: 200

Content Type: application/json; bulk


Example
{
  "success": true
}

Schema
Getting Entity Details
GET /v1/projects/{projectId}/datasets/{name}/entities/{uuid}

This returns the metadata and current data of an Entity.

The data and label of an Entity are found in the currentVersion object under data and label respectively. The currentVersion object also contains version-specific metadata fields such as version, baseVersion, details about conflicts that version introduced, etc. See the versions endpoint for more details.

The Entity also contains top-level system metadata such as uuid, createdAt and updatedAt timestamps, and creatorId (or full creator if extended metadata is requested).

Conflicts

An Entity's metadata also has a conflict field, which indicates the current conflict status of the Entity. The value of a conflict can either be:

null. The Entity does not have conflicting versions.
soft. The Entity has a version that was based on a version other than the version immediately prior to it. (The specified baseVerson was not the latest version on the server.)
hard. The Entity has a version that was based on a version other than the version immediately prior to it. Further, that version updated the same property as another update.
If an Entity has a conflict, it can be marked as resolved. After that, the conflict field will be null until a new conflicting version is received.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

name

string

Name of the Dataset

Example: people

uuid

string

UUID of the Entity

Example: 54a405a0-53ce-4748-9788-d23a30cc3afa

HTTP Status: 200

Content Type: application/json


Example
{
  "uuid": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
  "createdAt": "2018-01-19T23:58:03.395Z",
  "updatedAt": "2018-03-21T12:45:02.312Z",
  "deletedAt": "2018-03-21T12:45:02.312Z",
  "creatorId": 1,
  "conflict": null,
  "currentVersion": {
    "label": "John (88)",
    "current": true,
    "createdAt": "2018-03-21T12:45:02.312Z",
    "creatorId": 1,
    "userAgent": "Enketo/3.0.4",
    "conflictingProperties": null,
    "version": 1,
    "baseVersion": null,
    "branchId": null,
    "trunkVersion": null,
    "branchBaseVersion": null,
    "data": {
      "firstName": "John",
      "age": "88"
    },
    "dataReceived": {
      "firstName": "John",
      "age": "88",
      "label": "John (88)"
    }
  }
}

Schema
HTTP Status: 200

Content Type: application/json; extended


Example
{
  "uuid": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
  "createdAt": "2018-01-19T23:58:03.395Z",
  "updatedAt": "2018-03-21T12:45:02.312Z",
  "deletedAt": "2018-03-21T12:45:02.312Z",
  "creatorId": 1,
  "conflict": null,
  "creator": {
    "createdAt": "2018-04-18T23:19:14.802Z",
    "displayName": "My Display Name",
    "id": 115,
    "type": "user",
    "updatedAt": "2018-04-18T23:42:11.406Z",
    "deletedAt": "2018-04-18T23:42:11.406Z"
  },
  "currentVersion": {
    "label": "John (88)",
    "current": true,
    "createdAt": "2018-03-21T12:45:02.312Z",
    "creatorId": 1,
    "userAgent": "Enketo/3.0.4",
    "conflictingProperties": null,
    "version": 1,
    "baseVersion": null,
    "branchId": null,
    "trunkVersion": null,
    "branchBaseVersion": null,
    "data": {
      "firstName": "John",
      "age": "88"
    },
    "dataReceived": {
      "firstName": "John",
      "age": "88",
      "label": "John (88)"
    },
    "creator": {
      "createdAt": "2018-04-18T23:19:14.802Z",
      "displayName": "My Display Name",
      "id": 115,
      "type": "user",
      "updatedAt": "2018-04-18T23:42:11.406Z",
      "deletedAt": "2018-04-18T23:42:11.406Z"
    }
  }
}

Schema
Updating an Entity
PATCH /v1/projects/{projectId}/datasets/{name}/entities/{uuid}

This endpoint is used to update the label or the properties (passed as JSON in the request body) of an Entity. You only need to include the properties you wish to update. To unset the value of any property, you can set it to empty string (""). The label must be a non-empty string. Setting a property to null will throw an error. Attempting to update a property that doesn't exist in the Dataset will throw an error.

Specifying a base version

You must either provide the query parameter baseVersion or use the force=true query parameter. The specified baseVersion must match the current version of the Entity on the server or the request will be rejected. This acts as a check to ensure you are not trying to update based on stale data. To update an Entity regardless of its current state, use the force flag with value true.

Resolving a conflict

You can also use this endpoint to resolve an Entity conflict by passing the resolve=true query parameter, in which case providing data in the request body is optional. When not providing new data, only the conflict status from the Entity will be cleared and no new version will be created. When providing data, the conflict will be cleared and an updated version of the Entity will be added.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

name

string

Name of the Dataset

Example: people

uuid

string

UUID of the Entity

Example: 54a405a0-53ce-4748-9788-d23a30cc3afa

baseVersion

(query)

integer

The base version of the Entity you are applying the update to (must match the latest version on the server)

Example: 2

force

(query)

boolean

Flag to forcefully update the Entity

Example: True

resolve

(query)

boolean

Flag to resolve the conflict

Example: True

Request body


Example
{
  "label": "John Doe (88)",
  "data": {
    "firstName": "John",
    "age": "88"
  }
}

Schema
HTTP Status: 200

Content Type: application/json


Example
{
  "uuid": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
  "createdAt": "2018-01-19T23:58:03.395Z",
  "updatedAt": "2018-03-21T12:45:02.312Z",
  "deletedAt": "2018-03-21T12:45:02.312Z",
  "creatorId": 1,
  "conflict": null,
  "currentVersion": {
    "label": "John (88)",
    "current": true,
    "createdAt": "2018-03-21T12:45:02.312Z",
    "creatorId": 1,
    "userAgent": "Enketo/3.0.4",
    "conflictingProperties": null,
    "version": 1,
    "baseVersion": null,
    "branchId": null,
    "trunkVersion": null,
    "branchBaseVersion": null,
    "data": {
      "firstName": "John",
      "age": "88"
    },
    "dataReceived": {
      "firstName": "John",
      "age": "88",
      "label": "John (88)"
    }
  }
}

Schema
Deleting an Entity
DELETE /v1/projects/{projectId}/datasets/{name}/entities/{uuid}

Use this API to delete an Entity. With this API, Entity is soft-deleted, which means it is still in the database and you can retreive it by passing ?deleted=true to GET /projects/:id/datasets/:name/entities.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

name

string

Name of the Dataset

Example: people

uuid

string

UUID of the Entity

Example: 54a405a0-53ce-4748-9788-d23a30cc3afa

HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
Restoring a deleted Entity
POST /v1/projects/{projectId}/datasets/{name}/entities/{uuid}/restore

Entities that have been recently soft-deleted and not yet purged can be restored using this endpoint.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

name

string

Name of the Dataset

Example: people

uuid

string

UUID of the Entity

Example: 54a405a0-53ce-4748-9788-d23a30cc3afa

HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
HTTP Status: 404

Content Type: application/json


Example
{
  "code": 404.1,
  "message": "Could not find the resource you were looking for."
}

Schema
Listing Versions
GET /v1/projects/{projectId}/datasets/{name}/entities/{uuid}/versions

This returns the Entity metadata and data for every version of this Entity, in ascending creation order.

This endpoint supports retrieving extended metadata; provide a header X-Extended-Metadata: true to return a creator data object alongside the creatorId Actor ID reference.

There is an optional query flag relevantToConflict that returns the subset of past versions of an Entity that are relevant to the Entity's current conflict. This includes the latest version, the base version, the previous server version, and any other versions since the last time the Entity was in a conflict-free state. If the Entity is not in conflict, zero versions are returned.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

name

string

Name of the Dataset

Example: people

uuid

string

UUID of the Entity

Example: 54a405a0-53ce-4748-9788-d23a30cc3afa

relevantToConflict

(query)

boolean

Flag to return only the versions of the entity that are relevant to the current conflict.

Example: True

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "label": "John (88)",
    "current": true,
    "createdAt": "2018-03-21T12:45:02.312Z",
    "creatorId": 1,
    "userAgent": "Enketo/3.0.4",
    "version": 1,
    "baseVersion": null,
    "branchId": null,
    "trunkVersion": null,
    "branchBaseVersion": null,
    "conflict": null,
    "resolved": false,
    "lastGoodVersion": true,
    "relevantToConflict": false,
    "conflictingProperties": null,
    "baseDiff": [],
    "serverDiff": [],
    "source": "// Similar to Audit.details. This property is experimental and may change in the future.",
    "data": {
      "firstName": "John",
      "age": "88"
    },
    "dataReceived": {
      "firstName": "John",
      "age": "88",
      "label": "John (88)"
    }
  }
]

Schema
HTTP Status: 200

Content Type: application/json; extended


Example
[
  {
    "label": "John (88)",
    "current": true,
    "createdAt": "2018-03-21T12:45:02.312Z",
    "creatorId": 1,
    "userAgent": "Enketo/3.0.4",
    "version": 1,
    "baseVersion": null,
    "branchId": null,
    "trunkVersion": null,
    "branchBaseVersion": null,
    "conflict": null,
    "resolved": false,
    "lastGoodVersion": true,
    "relevantToConflict": false,
    "conflictingProperties": null,
    "baseDiff": [],
    "serverDiff": [],
    "source": "// Similar to Audit.details. This property is experimental and may change in the future.",
    "data": {
      "firstName": "John",
      "age": "88"
    },
    "dataReceived": {
      "firstName": "John",
      "age": "88",
      "label": "John (88)"
    },
    "creator": {
      "createdAt": "2018-04-18T23:19:14.802Z",
      "displayName": "My Display Name",
      "id": 115,
      "type": "user",
      "updatedAt": "2018-04-18T23:42:11.406Z",
      "deletedAt": "2018-04-18T23:42:11.406Z"
    }
  }
]

Schema
Getting changes between Versions
GET /v1/projects/{projectId}/datasets/{name}/entities/{uuid}/diffs

This returns the changes, or edits, between different versions of an Entity. These changes are returned as an array of arrays. Between two Entities, there is an array of objects representing how each property changed. This change object contains the old and new values, as well as the property name.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

name

string

Name of the Dataset

Example: people

uuid

string

UUID of the Entity

Example: 54a405a0-53ce-4748-9788-d23a30cc3afa

HTTP Status: 200

Content Type: application/json


Example
[
  [
    {
      "new": "John",
      "old": "Dana",
      "propertyName": "firstName"
    },
    {
      "new": "Doe",
      "old": "Roe",
      "propertyName": "lastName"
    },
    {
      "new": "John Doe",
      "old": "Jane Roe",
      "propertyName": "label"
    }
  ],
  [
    {
      "new": "Robert",
      "old": "Doe",
      "propertyName": "firstName"
    },
    {
      "new": "Robert Doe",
      "old": "Doe Doe",
      "propertyName": "label"
    }
  ]
]

Schema
Entity Audit Log
GET /v1/projects/{projectId}/datasets/{name}/entities/{uuid}/audits

Returns Server Audit Logs relating to an Entity. They will be returned most recent first.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

name

string

Name of the Dataset

Example: people

uuid

string

UUID of the Entity

Example: 54a405a0-53ce-4748-9788-d23a30cc3afa

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "actorId": 42,
    "action": "entity.create",
    "acteeId": "85cb9aff-005e-4edd-9739-dc9c1a829c44",
    "loggedAt": "2018-04-18T23:19:14.802Z"
  }
]

Schema
Entity GeoJSON representation
GET /v1/projects/{projectId}/datasets/{name}/entities/{uuid}/geojson

Returns the GeoJSON representation of an Entity's geometry attribute, if available.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

name

string

Name of the Dataset

Example: people

uuid

string

UUID of the Entity

Example: 54a405a0-53ce-4748-9788-d23a30cc3afa

HTTP Status: 200

Content Type: application/json


Example
{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "id": "54a405a0-53ce-4748-9788-d23a30cc3afa",
      "properties": null,
      "geometry": {
        "type": "Point",
        "coordinates": [
          1.087337169764714,
          40.007726575882074,
          44.93365478515625
        ]
      }
    }
  ]
}

Schema
Bulk Deleting Entities
POST /v1/projects/{projectId}/datasets/{name}/entities/bulk-delete

Use this API to delete multiple Entities at once. This endpoint accepts an array of Entity UUIDs and performs soft-deletion on all of them.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

name

string

Name of the Dataset

Example: people

Request body


Example
{
  "ids": [
    "12345678-1234-4123-8234-123456789abc",
    "12345678-1234-4123-8234-123456789aaa"
  ]
}

Schema
HTTP Status: 200

Content Type: application/json


Example
{
  "success": "true"
}

Schema
HTTP Status: 404

Content Type: application/json


Example
{
  "code": 404.1,
  "message": "Could not find the resource you were looking for."
}

Schema
Bulk Restoring Entities
POST /v1/projects/{projectId}/datasets/{name}/entities/bulk-restore

Use this API to restore multiple deleted Entities at once. This endpoint accepts an array of Entity UUIDs and restores all of them that were previously deleted.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

name

string

Name of the Dataset

Example: people

Request body


Example
{
  "ids": [
    "12345678-1234-4123-8234-123456789abc",
    "12345678-1234-4123-8234-123456789aaa"
  ]
}

Schema
HTTP Status: 200

Content Type: application/json


Example
{
  "success": "true"
}

Schema
HTTP Status: 404

Content Type: application/json


Example
{
  "code": 404.1,
  "message": "Could not find the resource you were looking for."
}

OpenRosa Endpoints
OpenRosa is an API standard which accompanies the ODK XForms XML standard, allowing compliant servers and clients to use a common protocol to communicate Forms and Submissions to each other. When survey clients like ODK Collect and Enketo submit Submission data to a Form, this is the API they use.

ODK Central is not a fully compliant OpenRosa server. OpenRosa requires compliance with five major components:

Metadata Schema, which defines a standard way to include metadata like the survey device ID and survey duration with a Submission. ODK Central will accept and return this data, but does nothing special with anything besides the instanceId at this time.

HTTP Request API, which defines a set of requirements every OpenRosa request and response must follow. ODK Central is fully compliant with this component, except that we do not require the Date header.

Form Submission API, which defines how Submissions are submitted to the server. ODK Central is fully compliant with this component.

Authentication API, which defines how users authenticate with the server. ODK Central provides three authentication methods. One of these is HTTPS Basic Authentication, which is recommended by the OpenRosa specification. However, because we do not follow the try/retry pattern required by the OpenRosa and the RFC specification, ODK Central is not compliant with this component. Our recommendation generally is to use App User Authentication when submitting data from survey clients.

Form Discovery (Listing) API, which returns a listing of Forms available for survey clients to download and submit to. At this time, ODK Central is partially compliant with this component: the server will return a correctly formatted formList response, but it does not currently handle the optional filter parameters.

In practical usage, ODK survey clients like Collect will interact with Central in three places:

The OpenRosa Form Listing API, documented below, lists the Forms the client can retrieve.

The Form XML download endpoint, a part of the standard REST API for Forms, is linked in the Form Listing response and allows clients to then download the ODK XForms XML for each form.

The OpenRosa Submission API, documented below, allows survey clients to submit new Submissions to any Form.

The Form Listing and Submission APIs are partitioned by Project, and their URLs are nested under the Project in question as a result. When you List or Submit, you will only be able to get forms from and submit submissions to that particular Project at a time.

Where the HTTP Request API OpenRosa standards specification requires two headers for any request, Central requires only one:

X-OpenRosa-Version must be set to exactly 1.0 or the request will be rejected.

But Central does not require a Date header field. You may set it if you wish, but it will have no effect on Central.

OpenRosa Form Listing API
GET /v1/projects/{projectId}/formList

This is the mostly standards-compliant implementation of the OpenRosa Form Discovery (Listing) API. We will not attempt to redocument the standard here.

The following aspects of the standard are not supported by ODK Central:

The deviceID may be provided with the request, but it will be ignored.

The Accept-Language header may be provided with the request, but it will be ignored.

The ?formID= querystring parameter is not supported and will be ignored.

The ?verbose querystring parameter is not supported and will be ignored.

The ?listAllVersions querystring is not supported and will be ignored. Central does not yet support multiple active versions of the same Form.

No <xforms-group/> will ever be provided, as Central does not yet support this feature.

By default, the given <name/> in the Form Listing response is the friendly name associated with the Form (<title> in the XML and name on the API resource). If no such value can be found, then the xmlFormId will be given as the <name> instead.

A <manifestUrl/> property will be given per <xform> if and only if that form is expected to have media or data file attachments associated with it, based on its XForms definition. It will appear even if no attachments have actually been uploaded to the server to fulfill those expectations.

This resource always requires authentication. If a valid Actor is authenticated at all, a form list will always be returned, filtered by what that Actor is allowed to access.

If you haven't already, please take a look at the HTTP Request API notes above on the required OpenRosa headers.

Parameters

projectId

number

The numeric ID of the Project

Example: 7

X-OpenRosa-Version

(header)

string

e.g. 1.0

Example: 1.0

HTTP Status: 200

Content Type: text/xml


Example
<?xml version="1.0" encoding="UTF-8"?>
<xforms xmlns="http://openrosa.org/xforms/xformsList">
  <xform>
    <formID>basic</formID>
    <name>basic</name>
    <version></version>
    <hash>md5:a64817a5688dd7c17563e32d4eb1cab2</hash>
    <downloadUrl>https://your.odk.server/v1/projects/7/forms/basic.xml</downloadUrl>
    <manifestUrl>https://your.odk.server/v1/projects/7/forms/basic/manifest</manifestUrl>
  </xform>
  <xform>
    <formID>simple</formID>
    <name>Simple</name>
    <version></version>
    <hash>md5:</hash>
    <downloadUrl>https://your.odk.server/v1/projects/7/forms/simple.xml</downloadUrl>
  </xform>
</xforms>

Schema
OpenRosa Form Submission API
POST /v1/projects/{projectId}/submission

This is the fully standards-compliant implementation of the OpenRosa Form Submission API. We will not attempt to redocument the submission part of the standard here, but please read further for information about updating submissions with new data.

Some things to understand when using this API for any reason:

ODK Central will always provide an X-OpenRosa-Accept-Content-Length of 100 megabytes. In reality, this number depends on how the server has been deployed. The default Docker-based installation, for example, is limited to 100MB at the nginx layer.

The xml_submission_file may have a Content Type of either text/xml or application/xml.

Central supports the HEAD request preflighting recommended by the specification, but does not require it. Because our supported authentication methods do not follow the try/retry pattern, only preflight your request if you want to read the X-OpenRosa-Accept-Content-Length header or are concerned about the other issues listed in the standards document, like proxies.

As stated in the standards document, it is possible to submit multimedia attachments with the Submission across multiple POST requests to this API. However, we impose the additional restriction that the Submission XML (xml_submission_file) may not change between requests. If Central sees a Submission with an instanceId it already knows about but the XML has changed in any way, it will respond with a 409 Conflict error and reject the submission. Additionally, a 409 Conflict error is returned if the Submission has been deleted in Central while attempting to send further POST requests.

Central will never return a 202 in any response from this API.

If you haven't already, please take a look at the HTTP Request API notes above on the required OpenRosa headers.

You can use this endpoint to submit updates to an existing submission. To do so, provide additionally a deprecatedID metadata XML node with the instanceID of the submission you are replacing. Some things to understand when submitting updates:

The new XML entirely replaces the old XML. No merging will be performed. So your new submission must contain exactly the current data.

If the deprecatedID you provide has already been deprecated, your request will be rejected with a 409 Conflict and a useful error message.

If the submission you are deprecating had media files uploaded for it, any of those that are still relevant will be carried over to the new version by filename reference. Any files you provide will overwrite these carryovers.

Just as with initial submission, you can send multiple requests to this endpoint to submit additional media files if they do not comfortably fit in a single request. Also the same as initial submission, you'll need to provide exactly the same XML to make this happen. For updates, this will need to include the deprecatedID.

Parameters

projectId

number

The numeric ID of the Project

Example: 7

X-OpenRosa-Version

(header)

string

e.g. 1.0

Example: 1.0

HTTP Status: 201

Content Type: text/xml


Example
<OpenRosaResponse xmlns="http://openrosa.org/http/response" items="0">
  <message nature="">full submission upload was successful!</message>
</OpenRosaResponse>

Schema
HTTP Status: 400

Content Type: text/xml


Example
<OpenRosaResponse xmlns="http://openrosa.org/http/response" items="0">
  <message nature="error">A resource already exists with a attachment file name of attachment1.jpg.</message>
</OpenRosaResponse>

Schema
HTTP Status: 409

Content Type: text/xml


Example
<OpenRosaResponse xmlns="http://openrosa.org/http/response" items="0">
  <message nature="error">A submission already exists with this ID, but with different XML. Resubmissions to attach additional multimedia must resubmit an identical xml_submission_file.</message>
</OpenRosaResponse>

Schema
OpenRosa Form Manifest API
GET /v1/projects/{projectId}/forms/{xmlFormId}/manifest

(introduced: version 0.2)

This is the fully standards-compliant implementation of the OpenRosa Form Manifest API. We will not attempt to redocument the standard here.

A Manifest document is available at this resource path for any form in the system. However:

A link to this document will not be given in the Form Listing API unless we expect the form to have media or data file attachments based on the XForms definition of the form.

The Manifest will only output information for files the server actually has in its possession. Any missing expected files will be omitted, as we cannot provide a hash or downloadUrl for them.

For Attachments that are linked to a Dataset, the value of hash is an MD5 sum derived from the last updated timestamp of the Dataset. It is not the MD5 sum for the content of the Dataset CSV file.

Offline Entities support:

If an attachment is linked to a Dataset, then type="entityList" attribute is added to the mediaFile element. If the Dataset requires approval of Submission to create new Entity then type="approvalEntityList" is added instead.

integrityUrl is also returned for the attachments that are linked to a Dataset.

Parameters

projectId

number

The numeric ID of the Project

Example: 7

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

X-OpenRosa-Version

(header)

string

e.g. 1.0

Example: 1.0

HTTP Status: 200

Content Type: text/xml


Example
<?xml version="1.0" encoding="UTF-8"?>
<manifest xmlns="http://openrosa.org/xforms/xformsManifest">
  <mediaFile>
    <filename>question1.jpg</filename>
    <hash>md5:a64817a5688dd7c17563e32d4eb1cab2</hash>
    <downloadUrl>https://your.odk.server/v1/projects/7/forms/basic/attachments/question1.jpg</downloadUrl>
  </mediaFile>
  <mediaFile>
    <filename>question2.jpg</filename>
    <hash>md5:a6fdc426037143cf71cced68e2532e3c</hash>
    <downloadUrl>https://your.odk.server/v1/projects/7/forms/basic/attachments/question2.jpg</downloadUrl>
  </mediaFile>
  <mediaFile type="entityList">
    <filename>people.csv</filename>
    <hash>md5:9fd39ac868eccdc0c134b3b7a6a25eb7</hash>
    <downloadUrl>https://your.odk.server/v1/projects/7/forms/basic/attachments/people.csv</downloadUrl>
    <integrityUrl>https://your.odk.server/v1/projects/7/datasets/people/integrity</integrityUrl>
  </mediaFile>
</manifest>

Schema
OpenRosa Dataset Integrity API
GET /v1/projects/{projectId}/datasets/{name}/integrity

(introduced: version 2025.1)

This is the fully standards-compliant implementation of the Entities Integrity API as described in OpenRosa spec proposal: support offline Entities.

This returns the deleted flag of the Entities requested through id query parameter. If no id is provided then all Entities are return.

Parameters

projectId

number

The numeric ID of the Project

Example: 7

name

string

The name of the dataset being referenced.

Example: people

id

(query)

string

The comma separated UUIDs of the Entities

Example: 6fdfa3b6-64fb-46cf-b98c-c92b57f914b1,97717278-2bf8-4565-88b2-711c88d66e75

X-OpenRosa-Version

(header)

string

e.g. 1.0

Example: 1.0

HTTP Status: 200

Content Type: text/xml


Example
<?xml version="1.0" encoding="UTF-8"?>
<data>
  <entities>
    <entity id="6fdfa3b6-64fb-46cf-b98c-c92b57f914b1">
      <deleted>true</deleted>
    </entity>
    <entity id="97717278-2bf8-4565-88b2-711c88d66e75">
      <deleted>false</deleted>
    </entity>
  </entities>
</data>

Schema
Draft Testing Endpoints
(introduced: version 0.8)

To facilitate testing, there is an alternative collection of OpenRosa endpoints that will give access to the draft version of a form and allow submitting test submissions to it. If you are using User or App User authentication, you can use the following resources without the /test/{token} prefix with your existing authentication.

Otherwise, and in particular if you plan to test your form in Collect or another OpenRosa-compliant client, you will likely want to use the /test Draft Token prefix. It functions similarly to the standard OpenRosa support, with App User authentication, but instead of a /key route prefix they feature a /test route prefix, and they point directly at each form (example: /test/lSpA…EjR7/projects/1/forms/myform/draft).

You can get the appropriate Draft Token for any given draft by requesting the Draft Form.

The /test tokens are not actual App Users, and Central does not keep track of user identity when they are used.

With the /test prefix, the following resources are available:

OpenRosa Form Listing API
GET /v1/test/{token}/projects/{projectId}/forms/{xmlFormId}/draft/formList

Identical to the non-Draft version, but will only list the Draft Form to be tested.

Parameters

token

string

The authentication Draft Token associated with the Draft Form in question.

Example: IeksRu1CNZs7!qjAot2T17dPzkrw9B4iTtpj7OoIJBmXvnHM8z8Ka4QP

projectId

number

The numeric ID of the Project

Example: 7

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

X-OpenRosa-Version

(header)

string

e.g. 1.0

Example: 1.0

HTTP Status: 200

Content Type: text/xml


Example
<?xml version="1.0" encoding="UTF-8"?>
<xforms xmlns="http://openrosa.org/xforms/xformsList">
  <xform>
    <formID>basic</formID>
    <name>basic</name>
    <version></version>
    <hash>md5:a64817a5688dd7c17563e32d4eb1cab2</hash>
    <downloadUrl>https://your.odk.server/v1/test/IeksRu1CNZs7!qjAot2T17dPzkrw9B4iTtpj7OoIJBmXvnHM8z8Ka4QP/projects/7/forms/basic/draft.xml</downloadUrl>
    <manifestUrl>https://your.odk.server/v1/test/IeksRu1CNZs7!qjAot2T17dPzkrw9B4iTtpj7OoIJBmXvnHM8z8Ka4QP/projects/7/forms/basic/draft/manifest</manifestUrl>
  </xform>
</xforms>

Schema
OpenRosa Form Submission API
POST /v1/test/{token}/projects/{projectId}/forms/{xmlFormId}/draft/submission

Identical to the non-Draft version, but will only submit to (and allow submissions to) the Draft Form to be tested.

Parameters

token

string

The authentication Draft Token associated with the Draft Form in question.

Example: IeksRu1CNZs7!qjAot2T17dPzkrw9B4iTtpj7OoIJBmXvnHM8z8Ka4QP

projectId

number

The numeric ID of the Project

Example: 7

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

X-OpenRosa-Version

(header)

string

e.g. 1.0

Example: 1.0

HTTP Status: 201

Content Type: text/xml


Example
<OpenRosaResponse xmlns="http://openrosa.org/http/response" items="0">
  <message nature="">full submission upload was successful!</message>
</OpenRosaResponse>

Schema
HTTP Status: 400

Content Type: text/xml


Example
<OpenRosaResponse xmlns="http://openrosa.org/http/response" items="0">
  <message nature="error">A resource already exists with a attachment file name of attachment1.jpg.</message>
</OpenRosaResponse>

Schema
HTTP Status: 409

Content Type: text/xml


Example
<OpenRosaResponse xmlns="http://openrosa.org/http/response" items="0">
  <message nature="error">A submission already exists with this ID, but with different XML. Resubmissions to attach additional multimedia must resubmit an identical xml_submission_file.</message>
</OpenRosaResponse>

Schema
OpenRosa Form Manifest API
GET /v1/test/{token}/projects/{projectId}/forms/{xmlFormId}/draft/manifest

Identical to the non-Draft version.

Parameters

token

string

The authentication Draft Token associated with the Draft Form in question.

Example: IeksRu1CNZs7!qjAot2T17dPzkrw9B4iTtpj7OoIJBmXvnHM8z8Ka4QP

projectId

number

The numeric ID of the Project

Example: 7

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

X-OpenRosa-Version

(header)

string

e.g. 1.0

Example: 1.0

HTTP Status: 200

Content Type: text/xml


Example
<?xml version="1.0" encoding="UTF-8"?>
<manifest xmlns="http://openrosa.org/xforms/xformsManifest">
  <mediaFile>
    <filename>question.jpg</filename>
    <hash>md5:a64817a5688dd7c17563e32d4eb1cab2</hash>
    <downloadUrl>https://your.odk.server/v1/test/IeksRu1CNZs7!qjAot2T17dPzkrw9B4iTtpj7OoIJBmXvnHM8z8Ka4QP/projects/7/forms/basic/draft/attachments/question.jpg</downloadUrl>
  </mediaFile>
</manifest>

Schema
Downloading a Form Attachment
GET /v1/test/{token}/projects/{projectId}/forms/{xmlFormId}/draft/attachments/{filename}

Identical to the non-Draft version.

Parameters

token

string

The authentication Draft Token associated with the Draft Form in question.

Example: IeksRu1CNZs7!qjAot2T17dPzkrw9B4iTtpj7OoIJBmXvnHM8z8Ka4QP

projectId

number

The numeric ID of the Project

Example: 7

xmlFormId

string

The xmlFormId of the Form being referenced.

Example: simple

filename

string

The name of the file as given by the Attachments listing resource.

Example: file1.jpg

HTTP Status: 200

Content Type: {the MIME type of the attachment file itself}


Example
"(binary data)\n"

OData Endpoints
OData is a standard for sharing data and its schema between web services. It allows for interoperability with tools like Excel, Power BI or Tableau. If you want to use your data in a service that does not support the OData standard but does support JSON data sources, you can use the data document directly.

ODK Central implements the 4.0 Minimal Conformance level of the specification. Our goal is to enable data analysis and reporting through powerful third-party tools, sending them the data over OData, rather than attempt to create our own analysis tools. Our implementation primarily targets Microsoft Power BI and Tableau, two tools with reasonably robust free offerings that provide versatile analysis and visualization of data.

While OData itself supports data of any sort of structure, Power BI and Tableau both think in terms of relational tables. Our current solution for representing ODK's repeat structures in OData is to treat every repeat in the Form definition as its own relational table, and we compute stable join IDs to relate the tables together.

In general, the OData standard protocol consists of three API endpoints:

The Service Document describes the available resources in the service. We provide one of these for every Form in the system. As of version 2023.2, we also provide one for every Dataset.

The Metadata Document defines the data schema using an XML-based standard. It is linked in every OData response.

The data documents, linked from the Service Document, are a simple JSON representation of the Submission or Entity data, conforming to the schema we describe in our Metadata Document.

OData Form Service
ODK Central presents one OData service for every Form it knows about. To access the OData service, add .svc to the resource URL for the given Form.

Service Document
GET /v1/projects/{projectId}/forms/{xmlFormId}.svc

The Service Document is essentially the index of all available documents. From this document, you will find links to all other available information in this OData service. In particular, you will find the Metadata Document, as well as a data document for each table defined by the Form.

You will always find a link to the /Submissions subpath, which is the data document that represents the "root" table, the data from each Submission that is not nested within any repeats.

This document is available only in JSON format.

Parameters

projectId

number

The numeric ID of the Project

Example: 7

xmlFormId

string

The xmlFormId of the Form whose OData service you wish to access.

Example: simple

HTTP Status: 200

Content Type: application/json; charset=utf-8; odata.metadata=minimal


Example
{
  "@odata.context": "https://your.odk.server/v1/projects/7/forms/sample.svc/$metadata",
  "value": [
    {
      "kind": "EntitySet",
      "name": "Submissions",
      "url": "Submissions"
    },
    {
      "kind": "EntitySet",
      "name": "Submissions.children.child",
      "url": "Submissions.children.child"
    }
  ]
}

Schema
HTTP Status: 200

Content Type: application/json


Example
{
  "@odata.context": "https://your.odk.server/v1/projects/7/forms/sample.svc/$metadata",
  "value": [
    {
      "kind": "EntitySet",
      "name": "Submissions",
      "url": "Submissions"
    },
    {
      "kind": "EntitySet",
      "name": "Submissions.children.child",
      "url": "Submissions.children.child"
    }
  ]
}

Schema
HTTP Status: 406

Content Type: application/json; charset=utf-8; odata.metadata=minimal


Example
{
  "code": "pencil",
  "message": "pencil"
}

Schema
HTTP Status: 406

Content Type: application/json


Example
{
  "code": "406.1",
  "message": "Requested format not acceptable; this resource allows: (application/json, json)."
}

Schema
Metadata Document
GET /v1/projects/{projectId}/forms/{xmlFormId}.svc/$metadata

The Metadata Document describes, in EDMX CSDL, the schema of all the data you can retrieve from the OData Form Service in question. This is essentially the XForms form schema translated into the OData format. EDMX/CSDL defines schemas in terms of objects, their properties, and relationships to other objects.

If you are writing a tool to analyze your own data, whose schema you already know and understand, there is very little reason to touch this endpoint. You can likely skip ahead to the data documents themselves and work directly with the simple JSON output returned by those endpoints. This endpoint is more useful for authors of tools which seek to generically work with arbitrary data whose schemas they cannot know in advance.

In general, the way we model the XForms schema in OData terms is to represent groups as ComplexTypes, and repeats as EntityTypes. In the world of OData, the primary difference between these two types is that Entity Types require Primary Keys, while Complex Types do not. This fits well with the way XForms surveys tend to be structured.

Most other types map to String. The exceptions are numbers, which map either to Int64 or Decimal as appropriate, datetime fields which are always DateTimeOffset, date fields which become Date, and geography points which will appear as GeographyPoint, GeographyLineString, or GeographyPolygon given a geopoint, geotrace, or geoshape.

We also advertise the relationships between tables (the point at which a repeat connects the parent data to the repeated subtable) using the NavigationProperty. This should allow clients to present the data in an interconnected way, without the user having to specify how the tables connect to each other.

This implementation of the OData standard includes a set of Annotations describing the supported features of the service in the form of the Capabilities Vocabulary. In general, however, you can assume that the server supports the Minimal Conformance level and nothing beyond.

While the latest 4.01 OData specification adds a new JSON EDMX CSDL format, most servers and clients do not yet support that format, and so for this release of ODK Central only the older XML EDMX CSDL format is available.

Parameters

projectId

number

The numeric ID of the Project

Example: 7

xmlFormId

string

The xmlFormId of the Form whose OData service you wish to access.

Example: simple

HTTP Status: 200

Content Type: application/xml


Example
<?xml version="1.0" encoding="UTF-8"?>
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <edmx:DataServices>
    <Schema xmlns="http://docs.oasis-open.org/odata/ns/edm" Namespace="org.opendatakit.user.simple">
      <EntityType Name="Submissions">
        <Key><PropertyRef Name="__id"/></Key>
        <Property Name="__id" Type="Edm.String"/>
        <Property Name="meta" Type="org.opendatakit.user.simple.meta"/>
        <Property Name="name" Type="Edm.String"/>
        <Property Name="age" Type="Edm.Int64"/>
      </EntityType>
      <ComplexType Name="meta">
        <Property Name="instanceID" Type="Edm.String"/>
      </ComplexType>
      <EntityContainer Name="simple">
        <EntitySet Name="Submissions" EntityType="org.opendatakit.user.simple.Submissions">
          <Annotation Term="Org.OData.Capabilities.V1.ConformanceLevel" EnumMember="Org.OData.Capabilities.V1.ConformanceLevelType/Minimal"/>
          <Annotation Term="Org.OData.Capabilities.V1.BatchSupported" Bool="false"/>
          <Annotation Term="Org.OData.Capabilities.V1.CountRestrictions">
            <Record><PropertyValue Property="Countable" Bool="true"/></Record>
          </Annotation>
          <Annotation Term="Org.OData.Capabilities.V1.FilterFunctions">
            <Record>
              <PropertyValue Property="NonCountableProperties">
                <Collection>
                  <String>eq</String>
                </Collection>
              </PropertyValue>
            </Record>
          </Annotation>
          <Annotation Term="Org.OData.Capabilities.V1.FilterFunctions">
            <Record>
              <PropertyValue Property="Filterable" Bool="true"/>
              <PropertyValue Property="RequiresFilter" Bool="false"/>
              <PropertyValue Property="NonFilterableProperties">
                <Collection>
                  <PropertyPath>meta</PropertyPath>
                  <PropertyPath>name</PropertyPath>
                  <PropertyPath>age</PropertyPath>
                </Collection>
              </PropertyValue>
            </Record>
          </Annotation>
          <Annotation Term="Org.OData.Capabilities.V1.SortRestrictions">
            <Record><PropertyValue Property="Sortable" Bool="false"/></Record>
          </Annotation>
          <Annotation Term="Org.OData.Capabilities.V1.ExpandRestrictions">
            <Record><PropertyValue Property="Expandable" Bool="false"/></Record>
          </Annotation>
        </EntitySet>
      </EntityContainer>
    </Schema>
  </edmx:DataServices>
</edmx:Edmx>

Schema
HTTP Status: 406

Content Type: application/xml


Example
No Example

Schema
HTTP Status: 406

Content Type: application/json


Example
{
  "code": "406.1",
  "message": "Requested format not acceptable; this resource allows: (application/json, json)."
}

Schema
Data Document
GET /v1/projects/{projectId}/forms/{xmlFormId}.svc/{table}

The data documents are JSON representations of each table of Submission data. They follow the corresponding specification, but apart from the representation of geospatial data as GeoJSON rather than the ODK proprietary format, the output here should not be surprising. If you are looking for JSON output of Submission data, this is the best place to look.

The $top and $skip querystring parameters, specified by OData, apply limit and offset operations to the data, respectively. The $count parameter, also an OData standard, will annotate the response data with the total row count, regardless of the scoping requested by $top and $skip. If $top parameter is provided in the request then the response will include @odata.nextLink that you can use as is to fetch the next set of data. As of ODK Central v2023.4, @odata.nextLink contains a $skiptoken (an opaque cursor), which allows you to page through Submissions with a consistent offset, even while new Submissions are being created.

While paging is possible through these parameters, it will not greatly improve the performance of exporting data. ODK Central prefers to bulk-export all of its data at once if possible.

As of ODK Central v1.1, the $filter querystring parameter is partially supported. In OData, you can use $filter to filter by certain data fields in the schema. The operators lt, le, eq, ne, ge, gt, not, and, and or are supported. The built-in functions now, year, month, day, hour, minute, second are supported. These supported elements may be combined in any way, but all other $filter features will cause an error.

The fields you can query against are as follows:

Submission Metadata	REST API Name	OData Field Name
Submission ID	instanceId	__id
Submitter Actor ID	submitterId	__system/submitterId
Submission Timestamp	createdAt	__system/submissionDate
Submission Update Timestamp	updatedAt	__system/updatedAt
Review State	reviewState	__system/reviewState
Submission Delete Timestamp (v2024.3)	deletedAt	__system/deletedAt
You can use $root expression to filter subtables (repeats) by Submission Metadata, you'll have to prefix above fields by $root/Submissions/ in the filter criteria. For example, to filter a repeat table by Submission Timestamp you can pass $filter=$root/Submissions/__system/submissionDate gt 2020-01-31T23:59:59.999Z in the query parameter.

Note that the submissionDate has a time component. This means that any comparisons you make need to account for the full time of the submission. It might seem like $filter=__system/submissionDate le 2020-01-31 would return all results on or before 31 Jan 2020, but in fact only submissions made before midnight of that day would be accepted. To include all of the month of January, you need to filter by either $filter=__system/submissionDate le 2020-01-31T23:59:59.999Z or $filter=__system/submissionDate lt 2020-02-01. Remember also that you can query by a specific timezone.

Please see the OData documentation on $filter operations and functions for more information.

As of ODK Central v1.2, you can use $expand=* to expand all repeat repetitions. This is helpful if you'd rather get one nested JSON data payload of all hierarchical data, rather than retrieve each of repeat as a separate flat table with references.

The nonstandard $wkt querystring parameter may be set to true to request that geospatial data is returned as a Well-Known Text (WKT) string rather than a GeoJSON structure. This exists primarily to support Tableau, which cannot yet read GeoJSON, but you may find it useful as well depending on your mapping software. Please note that both GeoJSON and WKT follow a (lon, lat, alt) coördinate ordering rather than the ODK-proprietary lat lon alt. This is so that the values map neatly to (x, y, z). GPS accuracy information is not a part of either standards specification, and so is presently omitted from OData output entirely. GeoJSON support may come in a future version.

As of ODK Central v2022.3, the $select query parameter is supported with some limitations:

$select and $expand can't be used together.

Child properties of repeats can't be requested using $select

As of ODK Central v2024.1, the $orderby query parameter is now supported, and can sort on the same fields as $filter, noted above. The order can be specified as ASC (ascending) or DESC (descending), which are case-insensitive. Multiple sort expressions can be used together, separated by commas, e.g. $orderby=__system/submitterId ASC, __system/reviewState DESC.

As the vast majority of clients only support the JSON OData format, that is the only format ODK Central offers.

Parameters

projectId

number

The numeric ID of the Project

Example: 7

xmlFormId

string

The xmlFormId of the Form whose OData service you wish to access.

Example: simple

table

string

The name of the table to be returned. These names can be found in the output of the Service Document.

Example: Submissions

$skip

(query)

number

If supplied, the first $skip rows will be omitted from the results.

Example: 10

$top

(query)

number

If supplied, only up to $top rows will be returned in the results.

Example: 5

$count

(query)

boolean

If set to true, an @odata.count property will be added to the result indicating the total number of rows, ignoring the above paging parameters.

Example: true

$wkt

(query)

boolean

If set to true, geospatial data will be returned as Well-Known Text (WKT) strings rather than GeoJSON structures.

Example: true

$filter

(query)

string

If provided, will filter responses to those matching the query. Only certain fields are available to reference. The operators lt, le, eq, neq, ge, gt, not, and, and or are supported, and the built-in functions now, year, month, day, hour, minute, second.

Example: year(__system/submissionDate) lt year(now())

$orderby

(query)

string

If provided, will sort responses according to specified order expression. Only the same fields as $filter above can be used to sort. Multiple expressions can be used together.

Example: __system/submitterId asc, __system/updatedAt desc

$expand

(query)

string

Repetitions, which should get expanded. Currently, only * is implemented, which expands all repetitions.

Example: *

$select

(query)

string

If provided, will return only the selected fields.

Example: __id, age, name, meta/instanceID

$skiptoken

(query)

string

Opaque cursor from @odata.nextLink used for paging.

HTTP Status: 200

Content Type: application/json


Example
{
  "@odata.context": "https://your.odk.server/v1/projects/7/forms/simple.svc/$metadata#Submissions",
  "value": [
    {
      "__id": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
      "age": 25,
      "meta": {
        "instanceID": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44"
      },
      "name": "Bob"
    },
    {
      "__id": "uuid:297000fd-8eb2-4232-8863-d25f82521b87",
      "age": 30,
      "meta": {
        "instanceID": "uuid:297000fd-8eb2-4232-8863-d25f82521b87"
      },
      "name": "Alice"
    }
  ]
}

Schema
HTTP Status: 406

Content Type: application/json


Example
{
  "code": "406.1",
  "message": "Requested format not acceptable; this resource allows: (application/json, json)."
}

Schema
HTTP Status: 501

Content Type: application/json


Example
{
  "code": "501.1",
  "message": "The requested feature $unsupported is not supported by this server."
}

Schema
Data Download Path
GET /dl/projects{projectId}/forms/{xmlFormId}/submissions/{instanceId}/attachments/{filename}

(introduced: version 1.2)

This route is a web browser oriented endpoint intended for user-interactive usage only. It's not part of the Central API, but is documented here as it can be useful.

If you are writing or configuring an OData client and have submission media files to deal with, you can run into authentication problems directly fetching or linking the media file URLs that are provided in the OData feed. This can be due to several reasons: if the user is not logged into the Central administration site (and thus has no valid cookie), if the request comes from a foreign origin (and thus cookies are not sent by the browser), and more.

To help manage this, the frontend provides a /dl path that allows file download. Just take a normal attachment download path and replace the /v1 near the beginning of the path with /dl, and the user will be taken to a page managed by the Central administration website that will ensure the user is logged in, and offer the file as a download.

Because this /dl path returns a web page that causes a file download rather than directly returning the media file in question, it cannot be used to directly embed or retrieve these files, for example in a <img> tag.

Parameters

projectId

number

The numeric ID of the Project

Example: 7

xmlFormId

string

The xmlFormId of the Form whose OData service you wish to access.

Example: simple

instanceId

string

The instanceId of the Submission being referenced.

Example: uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44

filename

string

The name of the file to be retrieved.

Example: file1.jpg

HTTP Status: 200

Content Type: text/html


Example
(html markup data)

Schema
OData Dataset Service
ODK Central presents one OData service for every Dataset as a way to get an OData feed of Entities. To access the OData service, add .svc to the resource URL for the given Dataset.

Service Document
GET /v1/projects/{projectId}/datasets/{name}.svc

The Service Document provides a link to the main source of information in this OData service: the list of Entities in this Dataset, as well as the Metadata Document describing the schema of this information.

This document is available only in JSON format.

Parameters

projectId

number

The numeric ID of the Project

Example: 7

name

string

The name of the Dataset whose OData service you wish to access.

Example: trees

HTTP Status: 200

Content Type: application/json; charset=utf-8; odata.metadata=minimal


Example
{
  "@odata.context": "https://your.odk.server/v1/projects/7/datasets/sample.svc/$metadata",
  "value": [
    {
      "kind": "EntitySet",
      "name": "Entities",
      "url": "Entities"
    },
    {
      "kind": "EntitySet",
      "name": "Entities.children.child",
      "url": "Entities.children.child"
    }
  ]
}

Schema
HTTP Status: 200

Content Type: application/json


Example
{
  "@odata.context": "https://your.odk.server/v1/projects/7/datasets/sample.svc/$metadata",
  "value": [
    {
      "kind": "EntitySet",
      "name": "Entities",
      "url": "Entities"
    },
    {
      "kind": "EntitySet",
      "name": "Entities.children.child",
      "url": "Entities.children.child"
    }
  ]
}

Schema
HTTP Status: 406

Content Type: application/json


Example
{
  "code": "406.1",
  "message": "Requested format not acceptable; this resource allows: (application/json, json)."
}

Schema
Metadata Document
GET /v1/projects/{projectId}/datasets/{name}.svc/$metadata

The Metadata Document describes, in EDMX CSDL, the schema of all the data you can retrieve from the OData Dataset Service in question. Essentially, these are the Dataset properties, or the schema of each Entity, translated into the OData format.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

name

string

Name of the Dataset

Example: people

HTTP Status: 200

Content Type: application/xml


Example
<?xml version="1.0" encoding="UTF-8"?>
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
    <edmx:DataServices>
        <Schema xmlns="http://docs.oasis-open.org/odata/ns/edm" Namespace="org.opendatakit.entity">
            <ComplexType Name="metadata">
                <Property Name="createdAt" Type="Edm.DateTimeOffset"/>
                <Property Name="creatorId" Type="Edm.String"/>
                <Property Name="creatorName" Type="Edm.String"/>
                <Property Name="updates" Type="Edm.Int64"/>
                <Property Name="updatedAt" Type="Edm.DateTimeOffset"/>
                <Property Name="version" Type="Edm.Int64"/>
                <Property Name="conflict" Type="Edm.String"/>
            </ComplexType>
        </Schema>
        <Schema xmlns="http://docs.oasis-open.org/odata/ns/edm" Namespace="org.opendatakit.user.trees">
            <EntityType Name="Entities">
                <Key>
                    <PropertyRef Name="__id"/>
                </Key>
                <Property Name="__id" Type="Edm.String"/>
                <Property Name="__system" Type="org.opendatakit.entity.metadata"/>
                <Property Name="label" Type="Edm.String"/>
                <Property Name="geometry" Type="Edm.String"/>
                <Property Name="species" Type="Edm.String"/>
                <Property Name="circumference_cm" Type="Edm.String"/>
            </EntityType>
            <EntityContainer Name="trees">
                <EntitySet Name="Entities" EntityType="org.opendatakit.user.trees.Entities">
                    <Annotation Term="Org.OData.Capabilities.V1.ConformanceLevel" EnumMember="Org.OData.Capabilities.V1.ConformanceLevelType/Minimal"/>
                    <Annotation Term="Org.OData.Capabilities.V1.BatchSupported" Bool="false"/>
                    <Annotation Term="Org.OData.Capabilities.V1.CountRestrictions">
                        <Record>
                            <PropertyValue Property="Countable" Bool="true"/>
                        </Record>
                    </Annotation>
                    <Annotation Term="Org.OData.Capabilities.V1.FilterFunctions">
                        <Record>
                            <PropertyValue Property="NonCountableProperties">
                                <Collection>
                                    <String>eq</String>
                                </Collection>
                            </PropertyValue>
                        </Record>
                    </Annotation>
                    <Annotation Term="Org.OData.Capabilities.V1.FilterFunctions">
                        <Record>
                            <PropertyValue Property="Filterable" Bool="true"/>
                            <PropertyValue Property="RequiresFilter" Bool="false"/>
                            <PropertyValue Property="NonFilterableProperties">
                                <Collection>
                                    <PropertyPath>geometry</PropertyPath>
                                    <PropertyPath>species</PropertyPath>
                                    <PropertyPath>circumference_cm</PropertyPath>
                                </Collection>
                            </PropertyValue>
                        </Record>
                    </Annotation>
                    <Annotation Term="Org.OData.Capabilities.V1.SortRestrictions">
                        <Record>
                            <PropertyValue Property="Sortable" Bool="false"/>
                        </Record>
                    </Annotation>
                    <Annotation Term="Org.OData.Capabilities.V1.ExpandRestrictions">
                        <Record>
                            <PropertyValue Property="Expandable" Bool="false"/>
                        </Record>
                    </Annotation>
                </EntitySet>
            </EntityContainer>
        </Schema>
    </edmx:DataServices>
</edmx:Edmx>

Schema
HTTP Status: 406

Content Type: application/xml


Example
No Example

Schema
HTTP Status: 406

Content Type: application/json


Example
{
  "code": "406.1",
  "message": "Requested format not acceptable; this resource allows: (application/json, json)."
}

Schema
Data Document
GET /v1/projects/{projectId}/datasets/{name}.svc/Entities

A data document is the straightforward JSON representation of all the Entities in a Dataset.

The $top and $skip querystring parameters, specified by OData, apply limit and offset operations to the data, respectively. The $count parameter, also an OData standard, will annotate the response data with the total row count, regardless of the scoping requested by $top and $skip. If $top parameter is provided in the request then the response will include @odata.nextLink that you can use as is to fetch the next set of data. As of ODK Central v2023.4, @odata.nextLink contains a $skiptoken (an opaque cursor) to better paginate around deleted Entities.

The $filter querystring parameter can be used to filter certain data fields in the system-level schema, but not the Dataset properties. The operators lt, le, eq, ne, ge, gt, not, and, and or are supported. The built-in functions now, year, month, day, hour, minute, second are supported.

The fields you can query against are as follows:

Entity Metadata	OData Field Name
Entity UUID	__id
Entity Creator Actor ID	__system/creatorId
Entity Timestamp	__system/createdAt
Entity Update Timestamp	__system/updatedAt
Entity Conflict	__system/conflict
Entity Delete Timestamp	__system/deletedAt
Note that createdAt, updatedAt and deletedAt are time components. This means that any comparisons you make need to account for the full time of the entity. It might seem like $filter=__system/createdAt le 2020-01-31 would return all results on or before 31 Jan 2020, but in fact only entities made before midnight of that day would be accepted. To include all of the month of January, you need to filter by either $filter=__system/createdAt le 2020-01-31T23:59:59.999Z or $filter=__system/createdAt lt 2020-02-01. Remember also that you can query by a specific timezone.

Please see the OData documentation on $filter operations and functions for more information.

The $select query parameter will return just the fields you specify and is supported on __id, __system, __system/creatorId, __system/createdAt and __system/updatedAt, as well as on user defined properties.

The $orderby query parameter will return Entities sorted by different fields, which come from the same list used by $filter, as noted above. The order can be specified as ASC (ascending) or DESC (descending), which are case-insensitive. Multiple sort expressions can be used together, separated by commas, e.g. $orderby=__system/creatorId ASC, __system/conflict DESC.

The $search query parameter can be used to search entity data (user-defined properties) and the label field. Central does not implement the OData specification's suggested search techniques—such as AND, NOT, and parentheses grouping—exactly as described. Instead, the search behavior is similar to that of a web search engine:

Multiple words return entities that contain all the searched words (logical AND operation).
The OR keyword can be used to find entities that contain any of the searched words.
Quoted text (e.g., "quoted text") searches for entities containing the exact phrase.
A dash (-) before a word excludes entities that contain that word (logical NOT).
As the vast majority of clients only support the JSON OData format, that is the only format ODK Central offers.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

name

string

Name of the Dataset

Example: people

$skip

(query)

number

If supplied, the first $skip rows will be omitted from the results.

Example: 10

$top

(query)

number

If supplied, only up to $top rows will be returned in the results.

Example: 5

$count

(query)

boolean

If set to true, an @odata.count property will be added to the result indicating the total number of rows, ignoring the above paging parameters.

Example: true

$filter

(query)

string

If provided, will filter responses to those matching the query. Only certain fields are available to reference. The operators lt, le, eq, neq, ge, gt, not, and, and or are supported, and the built-in functions now, year, month, day, hour, minute, second.

Example: year(__system/createdAt) lt year(now())

$orderby

(query)

string

If provided, will sort responses according to specified order expression. Only the same fields as $filter above can be used to sort. Multiple expressions can be used together.

Example: __system/creatorId asc, __system/updatedAt desc

$select

(query)

string

If provided, will return only the selected fields.

Example: __id, label, name

$skiptoken

(query)

string

Opaque cursor from @odata.nextLink used for paging.

HTTP Status: 200

Content Type: application/json


Example
{
  "@odata.context": "https://your.odk.server/v1/projects/7/datasets/trees.svc/$metadata#Entities",
  "value": [
    {
      "__id": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
      "label": "25cm purpleheart",
      "geometry": "32.7413996 -117.1394617 53.80000305175781 13.933,",
      "species": "purpleheart,",
      "circumference_cm": 2,
      "__system": {
        "createdAt": "2022-12-09T19:41:16.478Z",
        "creatorId": 39,
        "creatorName": "Tree surveyor",
        "updates": "1,",
        "updatedAt": "2023-04-31T19:41:16.478Z",
        "deletedAt": null,
        "version": 1,
        "conflict": null
      }
    },
    {
      "__id": "aeebd746-3b1e-4a24-ba9d-ed6547bd5ff1",
      "label": "345cm mora",
      "__system": {
        "createdAt": "2023-04-09T19:10:16.128Z",
        "creatorId": 39,
        "creatorName": "Tree surveyor",
        "updates": "1,",
        "updatedAt": "2023-04-31T19:41:16.478Z",
        "deletedAt": null,
        "version": 2,
        "conflict": null
      },
      "geometry": "47.722581 18.562111 0 0,",
      "species": "mora,",
      "circumference_cm": 345
    }
  ]
}

Schema
HTTP Status: 406

Content Type: application/json


Example
{
  "code": "406.1",
  "message": "Requested format not acceptable; this resource allows: (application/json, json)."
}

Schema
HTTP Status: 501

Content Type: application/json


Example
{
  "code": "501.1",
  "message": "The requested feature $unsupported is not supported by this server."
}

Schema
Draft Testing
(introduced: version 0.8)

To facilitate testing, there is an alternative collection of OData endpoints that will give access to the submissions uploaded to a Draft Form. This can be useful for ensuring that changes to your form do not break downstream dashboards or applications.

They are all identical to the non-Draft OData endpoints, but they will only return the Draft Form schema and Submissions.

Service Document
GET /v1/projects/{projectId}/forms/{xmlFormId}/draft.svc

Identical to the non-Draft version of this endpoint.

Parameters

projectId

number

The numeric ID of the Project

Example: 7

xmlFormId

string

The xmlFormId of the Form whose OData service you wish to access.

Example: simple

HTTP Status: 200

Content Type: application/json; charset=utf-8; odata.metadata=minimal


Example
{
  "@odata.context": "https://your.odk.server/v1/projects/7/forms/sample.svc/$metadata",
  "value": [
    {
      "kind": "EntitySet",
      "name": "Submissions",
      "url": "Submissions"
    },
    {
      "kind": "EntitySet",
      "name": "Submissions.children.child",
      "url": "Submissions.children.child"
    }
  ]
}

Schema
HTTP Status: 200

Content Type: application/json


Example
{
  "@odata.context": "https://your.odk.server/v1/projects/7/forms/sample.svc/$metadata",
  "value": [
    {
      "kind": "EntitySet",
      "name": "Submissions",
      "url": "Submissions"
    },
    {
      "kind": "EntitySet",
      "name": "Submissions.children.child",
      "url": "Submissions.children.child"
    }
  ]
}

Schema
HTTP Status: 406

Content Type: application/json; charset=utf-8; odata.metadata=minimal


Example
{
  "code": "pencil",
  "message": "pencil"
}

Schema
HTTP Status: 406

Content Type: application/json


Example
{
  "code": "406.1",
  "message": "Requested format not acceptable; this resource allows: (application/json, json)."
}

Schema
Metadata Document
GET /v1/projects/{projectId}/forms/{xmlFormId}/draft.svc/$metadata

Identical to the non-Draft version of this endpoint.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form whose OData service you wish to access.

Example: simple

HTTP Status: 200

Content Type: application/xml


Example
<?xml version="1.0" encoding="UTF-8"?>
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <edmx:DataServices>
    <Schema xmlns="http://docs.oasis-open.org/odata/ns/edm" Namespace="org.opendatakit.user.simple">
      <EntityType Name="Submissions">
        <Key><PropertyRef Name="__id"/></Key>
        <Property Name="__id" Type="Edm.String"/>
        <Property Name="meta" Type="org.opendatakit.user.simple.meta"/>
        <Property Name="name" Type="Edm.String"/>
        <Property Name="age" Type="Edm.Int64"/>
      </EntityType>
      <ComplexType Name="meta">
        <Property Name="instanceID" Type="Edm.String"/>
      </ComplexType>
      <EntityContainer Name="simple">
        <EntitySet Name="Submissions" EntityType="org.opendatakit.user.simple.Submissions">
          <Annotation Term="Org.OData.Capabilities.V1.ConformanceLevel" EnumMember="Org.OData.Capabilities.V1.ConformanceLevelType/Minimal"/>
          <Annotation Term="Org.OData.Capabilities.V1.BatchSupported" Bool="false"/>
          <Annotation Term="Org.OData.Capabilities.V1.CountRestrictions">
            <Record><PropertyValue Property="Countable" Bool="true"/></Record>
          </Annotation>
          <Annotation Term="Org.OData.Capabilities.V1.FilterFunctions">
            <Record>
              <PropertyValue Property="NonCountableProperties">
                <Collection>
                  <String>eq</String>
                </Collection>
              </PropertyValue>
            </Record>
          </Annotation>
          <Annotation Term="Org.OData.Capabilities.V1.FilterFunctions">
            <Record>
              <PropertyValue Property="Filterable" Bool="true"/>
              <PropertyValue Property="RequiresFilter" Bool="false"/>
              <PropertyValue Property="NonFilterableProperties">
                <Collection>
                  <PropertyPath>meta</PropertyPath>
                  <PropertyPath>name</PropertyPath>
                  <PropertyPath>age</PropertyPath>
                </Collection>
              </PropertyValue>
            </Record>
          </Annotation>
          <Annotation Term="Org.OData.Capabilities.V1.SortRestrictions">
            <Record><PropertyValue Property="Sortable" Bool="false"/></Record>
          </Annotation>
          <Annotation Term="Org.OData.Capabilities.V1.ExpandRestrictions">
            <Record><PropertyValue Property="Expandable" Bool="false"/></Record>
          </Annotation>
        </EntitySet>
      </EntityContainer>
    </Schema>
  </edmx:DataServices>
</edmx:Edmx>

Schema
HTTP Status: 406

Content Type: application/xml


Example
No Example

Schema
HTTP Status: 406

Content Type: application/json


Example
{
  "code": "406.1",
  "message": "Requested format not acceptable; this resource allows: (application/json, json)."
}

Schema
Data Document
GET /v1/projects/{projectId}/forms/{xmlFormId}/draft.svc/{table}

Identical to the non-Draft version of this endpoint.

Parameters

projectId

number

The numeric ID of the Project

Example: 16

xmlFormId

string

The xmlFormId of the Form whose OData service you wish to access.

Example: simple

table

string

The name of the table to be returned. These names can be found in the output of the Service Document.

Example: Submissions

$skip

(query)

number

If supplied, the first $skip rows will be omitted from the results.

Example: 10

$top

(query)

number

If supplied, only up to $top rows will be returned in the results.

Example: 5

$count

(query)

boolean

If set to true, an @odata.count property will be added to the result indicating the total number of rows, ignoring the above paging parameters.

Example: true

$wkt

(query)

boolean

If set to true, geospatial data will be returned as Well-Known Text (WKT) strings rather than GeoJSON structures.

Example: true

$filter

(query)

string

If provided, will filter responses to those matching the query. Only certain fields are available to reference. The operators lt, le, eq, neq, ge, gt, not, and, and or are supported, and the built-in functions now, year, month, day, hour, minute, second.

Example: year(__system/submissionDate) lt year(now())

$expand

(query)

string

Repetitions, which should get expanded. Currently, only * is implemented, which expands all repetitions.

Example: *

$select

(query)

string

If provided, will return only the selected fields.

Example: __id, age, name, meta/instanceID

HTTP Status: 200

Content Type: application/json


Example
{
  "@odata.context": "https://your.odk.server/v1/projects/7/forms/simple.svc/$metadata#Submissions",
  "value": [
    {
      "__id": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44",
      "age": 25,
      "meta": {
        "instanceID": "uuid:85cb9aff-005e-4edd-9739-dc9c1a829c44"
      },
      "name": "Bob"
    },
    {
      "__id": "uuid:297000fd-8eb2-4232-8863-d25f82521b87",
      "age": 30,
      "meta": {
        "instanceID": "uuid:297000fd-8eb2-4232-8863-d25f82521b87"
      },
      "name": "Alice"
    }
  ]
}

Schema
HTTP Status: 406

Content Type: application/json


Example
{
  "code": "406.1",
  "message": "Requested format not acceptable; this resource allows: (application/json, json)."
}

Schema
HTTP Status: 501

Content Type: application/json


Example
{
  "code": "501.1",
  "message": "The requested feature $unsupported is not supported by this server."
}

System Endpoints
There are some resources available for getting or setting system information and configuration. You can set the Usage Reporting configuration for the server, retrieve the Server Audit Logs, or perform a Direct Backup.

Usage Reporting Configuration
(introduced: version 1.3)

Getting the current configuration
GET /v1/config/analytics

If the Usage Reporting configuration is not set, this endpoint will return a 404. Once the configuration is set, this endpoint will indicate whether the server will share usage data with the Central team. If the server will share usage data, and contact information was provided, this endpoint will also return the provided work email address and organization name.

This endpoint doesn't take any request parameter or data

HTTP Status: 200

Content Type: application/json


Example
{
  "key": "some_type",
  "setAt": "2018-01-06T00:32:52.787Z",
  "value": {
    "enabled": true,
    "email": "my.email.address@getodk.org",
    "organization": "Organization Name"
  }
}

Schema
HTTP Status: 404

Content Type: application/json


Example
{
  "code": "404.1",
  "message": "Could not find the resource you were looking for."
}

Schema
Setting a new configuration
POST /v1/config/analytics

An Administrator can use this endpoint to choose whether the server will share anonymous usage data with the Central team. This configuration affects the entire server. Until the Usage Reporting configuration is set, Administrators will see a message on the Central administration website that provides further information.

If an Administrator specifies true for enabled, the server will share anonymous usage data monthly with the Central team. By specifying true, the Administrator accepts the Terms of Service and Privacy Policy. The Administrator can also share contact information to include with the report.

If an Administrator specifies false for enabled, the server will not share anonymous usage data with the Central team. Administrators will no longer see the message on the administration website.

If the Usage Reporting configuration is already set, the current configuration will be overwritten with the new one.

Request body


Example
{
  "enabled": true,
  "email": "my.email.address@getodk.org",
  "organization": "Organization Name"
}

Schema
HTTP Status: 200

Content Type: application/json


Example
{
  "key": "some_type",
  "setAt": "2018-01-06T00:32:52.787Z",
  "value": {
    "enabled": true,
    "email": "my.email.address@getodk.org",
    "organization": "Organization Name"
  }
}

Schema
Unsetting the current configuration
DELETE /v1/config/analytics

If the Usage Reporting configuration is unset, Administrators will once again see a message on the the Central administration website.

This endpoint doesn't take any request parameter or data

HTTP Status: 200

Content Type: application/json


Example
{
  "success": true
}

Schema
Usage Report Preview
(introduced: version 1.3)

An Administrator of Central may opt in to sending periodic reports summarizing usage. Configuration of this reporting is described here. For added transparency, the API provides a preview of the reported metrics.

Getting the Usage Report preview
GET /v1/analytics/preview

An Administrator can use this endpoint to preview the metrics being sent. The preview is computed on the fly and represents what the report would look like if sent at that time. This endpoint does not directly submit the Usage Report; that is handled internally as a scheduled Central task.

This endpoint doesn't take any request parameter or data

HTTP Status: 200

Content Type: application/json


Example
{}

Schema
Server Audit Logs
(introduced: version 0.6)

Many actions on ODK Central will automatically log an event to the Server Audit Log. Creating a new Form, for instance, will log a form.create event, with information about the Actor who performed the action, and sometimes some additional details specific to the event.

Any time an audit action is logged, the request headers are checked. If X-Action-Notes are provided anywhere, those notes will be logged into the audit entries as well. Note that some requests generate multiple audit entries; in these cases, the note will be attached to every entry logged.

Server Audit Logs entries are created for the following actions:

user.create when a new User is created.
user.update when User information is updated, like email or password.
user.assignment.create when a User is assigned to a Server Role.
user.assignment.delete when a User is unassigned from a Server Role.
user.session.create when a User logs in.
user.delete when a User is deleted.
project.create when a new Project is created.
project.update when top-level Project information is updated, like its name.
project.delete when a Project is deleted.
form.create when a new Form is created.
form.update when top-level Form information is updated, like its name or state.
form.update.draft.set when a Draft Form definition is set.
form.update.draft.delete when a Draft Form definition is deleted.
form.update.publish when a Draft Form is published to the Form.
form.update.draft.replace when a Draft Form is changed in place.
form.attachment.update when a Form Attachment binary is set or cleared.
form.submissions.export when a Form's Submissions are exported to CSV.
form.delete when a Form is deleted.
form.restore when a Form that was deleted is restored.
form.purge when a Form is permanently purged.
field_key.create when a new App User is created.
field_key.assignment.create when an App User is assigned to a Server Role.
field_key.assignment.delete when an App User is unassigned from a Server Role.
field_key.session.end when an App User's access is revoked.
field_key.delete when an App User is deleted.
public_link.create when a new Public Link is created.
public_link.assignment.create when a Public Link is assigned to a Server Role.
public_link.assignment.delete when a Public Link is unassigned from a Server Role.
public_link.session.end when a Public Link's access is revoked.
public_link.delete when a Public Link is deleted.
submission.create when a new Submission is created.
submission.update when a Submission's metadata is updated.
submission.update.version when a Submission XML data is updated.
submission.attachment.update when a Submission Attachment binary is set or cleared, but only via the REST API. Attachments created alongside the submission over the OpenRosa /submission API (including submissions from Collect) do not generate audit log entries.
submission.delete when a Submission is soft-deleted.
submission.purge when soft-deleted Submissions are purged.
submission.restore when a Submission is restored.
submission.backlog.hold when an Entity Submission is first held in processing backlog.
submission.backlog.reprocess when an Entity Submission is reprocessed and removed from the backlog.
submission.backlog.force when an Entity Submission is force-processed after being in backlog.
dataset.create when a Dataset is created.
dataset.update when a Dataset is updated.
dataset.update.publish when a Dataset is published.
entity.create when an Entity is created.
entity.error when there is an error processing a Submission to create or update an Entity.
entity.update.version when an Entity is updated.
entity.update.resolve when an Entity conflict is resolved.
entity.delete when an Entity is deleted.
entity.restore when a deleted Entity is restored.
entity.purge when a deleted Entity is purged (ppermanently deleted).
entity.bulk.delete when Entities are deleted in bulk.
entity.bulk.restore when Entities are restored in bulk.
config.set when a system configuration is set.
upgrade.server when Central is upgraded to a new version.
upgrade.process.form.entities_version when Central flags an Entity-related Form for a potential automatic upgrade.
analytics when a Usage Report is attempted.
blobs.s3.upload when blobs are moved from the database to external storage.
blobs.s3.failed-to-pending when blobs that failed to upload are reset to the pending state to be retried.
Deprecated: backup when a backup operation is attempted for Google Drive backups.
Getting Audit Log Entries
GET /v1/audits

This resource allows access to those log entries, with some paging and filtering options. These are provided by querystring parameters: action allows filtering by the action types listed above, start and end allow filtering by log timestamp (see below), and limit and offset control paging. If no paging parameters are given, the server will attempt to return every audit log entry that it has.

The start and end parameters work based on exact timestamps, given in ISO 8601 format. It is possible to provide just a datestring (eg 2000-01-01), in which case midnight will be inferred. But this value alone leaves the timezone unspecified. When no timezone is given, the server's local time will be used: the standard Docker deployment will always set server local time to UTC, but installations may have been customized, and there is no guarantee the UTC default hasn't been overridden.

For this reason, we recommend always setting a timezone when querying based on start and end: either by appending a z to indicate UTC (eg 2000-01-01z) or by explicitly specifying a timezone per ISO 8601 (eg 2000-01-01+08). The same applies for full timestamps (eg 2000-01-01T12:12:12z, 2000-01-01T12:12:12+08).

start may be given without end, and vice versa, in which case the timestamp filter will only be bounded on the specified side. They are both inclusive (>= and <=, respectively).

This endpoint supports retrieving extended metadata; provide a header X-Extended-Metadata: true to additionally expand the actorId into full actor details, and acteeId into full actee details. The actor will always be an Actor, but the actee may be an Actor, a Project, a Form, or some other type of object depending on the type of action.

Parameters

action

(query)

string

The name of the action to filter by.

Example: form.create

start

(query)

string

The timestamp before which log entries are to be filtered out.

Example: 2000-01-01z

end

(query)

string

The timestamp after which log entries are to be filtered out.

Example: 2000-12-31T23:59.999z

limit

(query)

number

The maximum number of entries to return.

Example: 100

offset

(query)

number

The zero-indexed number of entries to skip from the result.

Example: 200

HTTP Status: 200

Content Type: application/json


Example
[
  {
    "actorId": 42,
    "action": "user.session.create",
    "details": {
      "userAgent": "Mozilla/5.0"
    },
    "acteeId": "85cb9aff-005e-4edd-9739-dc9c1a829c44",
    "loggedAt": "2018-04-18T23:19:14.802Z"
  }
]

Schema
HTTP Status: 200

Content Type: application/json; extended


Example
[
  {
    "actorId": 42,
    "action": "form.create",
    "details": {
      "userAgent": "Mozilla/5.0"
    },
    "acteeId": "85cb9aff-005e-4edd-9739-dc9c1a829c44",
    "loggedAt": "2018-04-18T23:19:14.802Z",
    "actor": {
      "createdAt": "2018-04-18T23:19:14.802Z",
      "displayName": "My Display Name",
      "id": 115,
      "type": "user",
      "updatedAt": "2018-04-18T23:42:11.406Z",
      "deletedAt": "2018-04-18T23:42:11.406Z"
    }
  }
]

Schema
HTTP Status: 400

Content Type: application/json


Example
{
  "code": "400",
  "message": "Could not parse the given data (2 chars) as json."
}

Schema
Direct Backup
(introduced: version 1.1)

ODK Central offers an HTTP endpoint that will immediately perform a backup on the system database and send that encrypted backup as the response. To use it, POST with an encryption passphrase.

Note that performing the backup takes a great deal of time, during which the request will be held open. As a result, the endpoint will trickle junk data every five seconds while that processing is occurring to prevent the request from timing out. Depending on how much data you have, it can take many minutes for the data stream to speed up to a full transfer rate.

Using an Encryption Passphrase
POST /v1/backup

Use the POST verb to start a direct download ad-hoc backup. You will want to supply a passphrase with your chosen encryption passphrase. It is possible to omit this, in which case the backup will still be encrypted, but it will decrypt given an empty passphrase.

Please see the section notes above about the long-running nature of this endpoint.

Request body


Example
{
  "passphrase": "my-password"
}

Schema
HTTP Status: 200

Content Type: application/zip


Example
"(binary data)"

Encryption
ODK Central supports two types of encryption:

The old methodology, where you generate an RSA keypair and use it with locally-downloaded encrypted data to decrypt submissions. We refer to these sorts of keys in this documentation as "self-supplied keys."

Managed Encryption, where Central will generate and store an RSA keypair for you, secured under a passphrase that Central does not save. The CSV export path can then decrypt all records on the fly given the passphrase.

Given the self-supplied key case, Central does not understand how to decrypt records, and the CSV export will export only metadata fields (and no binary attachments) for encrypted records. You may retrieve each data resource over the REST API and decrypt them yourself, or use ODK Briefcase to do this.

Managed Encryption is recommended for most people. The data is still encrypted "at rest" on the server, and the private key needed to decrypt the data is itself encrypted by the passphrase. Neither the passphrase nor the decrypted private key are ever stored; they are forgotten as soon as the server has finished the work at hand.

The relevant API operations are documented inline above; here we guide you through what exists from a high level.

To invoke Project Manage Encryption, you may use the web management interface, or you may POST /projects/…/key.

To list all the encryption keys associated with the submissions on a given form, you can GET /projects/…/forms/…/submissions/keys. This is particularly useful for obtaining the integer numeric ID associated with each key, which will be necessary to decrypt the records, as well as for obtaining reminder hints about each passphrase.

To perform decryption, you can GET or POST /projects/…/forms/…/submissions.csv.zip with extra parameters to provide the necessary passphrases. If you are building a browser-based application, it is recommended that you POST rather than GET: please see the notes in the linked sections for additional details.

Note that the OData JSON API does not (presently) decrypt data. Any encrypted submissions will be returned only with basic metadata, like submission date and user.